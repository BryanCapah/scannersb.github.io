{"version":3,"sources":["apiServices/index.js","Page/StockEntry/GeneralServices/moduleServices.js","apiServices/dropdown/index.js"],"names":["getUserData","a","dispatch","sessionId","setComplete","type","GET_USER","status","url","axios","data","headers","isSuccess","user","message","code","statusMessage","throwErrorStatus","userLogout","email","logout","USER_LOGOUT","window","location","replace","checkSessionId","getPoBySkuCode","moduleName","setModule","poNumber","warehouseUuid","areaId","areaName","setSkuList","setLocalEntryData","param","length","value","entryData","jobPost","list","wait","map","ripeness","expiryDate","codeGrade","inboundDate","inboundQty","initialWeight","photo","skuName","skuUuid","skuNumber","supplierId","supplierName","totalPack","uom","wmsPoSkuCode","slot","category","getGrade","skuId","grade","ddGrade","filter","label","id","warehouseSource","warehouseDestination","areaSource","areaDestination","idx","findIndex","push","packSize","checked","gradeList","warehouseId","unitOfMeassures","totalQty","poList","itemList","qty","expiryDateText","dateDMY","date","Promise","all","console","log","getStockTakeSummary","stockMovementTargetRepack","targetRepack","zeroQuantity","singleView","module","desc","areaIdDestination","transaction","GET_STOCK_TAKE_ACTION","isLoading","dt","skuList","d","isFloat","isExist","sku","targetMovementProgress","parseInt","originalUom","getStockTakeSummaryAddSku","selectedSkusNumber","includes","targetMovement","tmp","getUnfinishedEntries","IS_LOADING","toLowerCase","savedJs","lists","getOutboundType","outboundTypeList","po","ripenessLevel","weight","parseFloat","number","edited","item","outboundType","outbound","isNaN","initialWeightUpdate","initialWeightOver","CREATE_JOB_SHEET","STATUS","getPORepacking","removeEntryModule","setDiscard","getPoBySkuId","poItems","targetMovements","validatePoSkuInfoId","skuData","bulk","method","then","response","VALIDATE_PO_SKU_INFO_ID","skuCodeValidated","validateSkuNumber","skuNumberData","skuNumberValidated","submitCsv","dataCsv","setSubmitStatus","source","submitCsvStockTransfer","catch","error","submitCsvTargetRepack","saveJobSheet","moduleEntry","setIsSuccess","name","table","finalModule","Object","assign","JSON","parse","stringify","post","success","moduleEntrywithId","saveImage","e","file","target","files","options","maxSizeMB","maxWidthOrHeight","useWebWorker","fileType","imageCompression","compressedFile","newFile","File","formData","FormData","append","getWasteWarehouseArea","setAreaId","getWarehouses","selectedSkuCheck","count","addSku","moduleSummary","jobSheet","getEditedData","totalWeightCount","activeSku","total","qqq","Number","isInteger","toFixed","totalPackCount","pack","jobSheetChecker","checkisEmpty","isRequired","qtyIsEmpty","noteIsEmpty","outboundTypeIsEmpty","ripenessIsEmpty","gradeIsEmpty","packIsEmpty","responseCheck","summaryData","preRemoveSku","totalListItemWeightCount","moduleList","removeSku","resetSKU","selected","SET_AREA","countQty","poListIdx","entryListIdx","deleteRow","js","update","initialWeightScreenUpdate","splice","setSwitch","search","updateList","isMovement","filterTargetRepack","targetRepacks","colWidth","document","documentElement","clientWidth","gr","totalMove","countPackMovement","countPack","targetUom","targetUos","percent","warehouse","targetDate","no","undefined","slotList","s","columns","Header","placeholder","accessor","width","style","textAlign","display","justifyContent","className","headerClassName","updateTargetRepack","setTargetRepack","updatedTargetRepacks","ls","concat","getWarehouseArea","WAREHOUSE_AREA","warehouseAreaCsv","getRipenessLevel","ddList","i","String","RIPENESS_LEVEL","skuDescription","multiplier","parentToChildMultiplier","OUTBOUND_TYPE","outboundTypeCsv","listItem","description","getWarehouse"],"mappings":"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","file":"static/js/13.12942a89.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport imageCompression from 'browser-image-compression';\r\nimport { isFloat, throwErrorStatus, dateDMY } from 'services'\r\nimport {\r\n  GET_STOCK_TAKE_ACTION,\r\n  GET_USER,\r\n  USER_LOGOUT,\r\n  STATUS,\r\n  VALIDATE_PO_SKU_INFO_ID,\r\n  CREATE_JOB_SHEET,\r\n  IS_LOADING,\r\n} from \"apiServices/action\";\r\nimport { getGrade, getOutboundType } from \"./dropdown\";\r\nimport { totalQty } from \"Page/StockEntry/GeneralServices/moduleServices\";\r\n\r\n//get user credential by email\r\nexport const getUserData = async ({ dispatch, sessionId, setComplete }) => {\r\n  try {\r\n    dispatch({ type: GET_USER, status: null });\r\n    const url = `user/validate?sessionId=${sessionId}`;\r\n    const { data, headers } = await axios(url);\r\n    setComplete(true);\r\n    if (data) {\r\n      data[\"sessionId\"] = headers[\"session-id\"];\r\n\r\n      if (data?.isSuccess)\r\n        dispatch({ type: GET_USER, user: data, status: null });\r\n      else\r\n        dispatch({\r\n          type: GET_USER,\r\n          user: null,\r\n          status: { message: \"Unauthorized\", code: 401 },\r\n          statusMessage: data.message,\r\n        });\r\n    }\r\n    return true;\r\n  } catch (e) {\r\n    const status = throwErrorStatus(e);\r\n    setComplete(true);\r\n    dispatch({\r\n      type: \"STATUS\",\r\n      status,\r\n      user: null,\r\n    });\r\n  }\r\n};\r\n\r\n//logout\r\nexport const userLogout = async ({ dispatch, email }) => {\r\n  try {\r\n    const logout = `/user/signOut?email=${email}`;\r\n    await axios(logout);\r\n    dispatch({ type: USER_LOGOUT, user: null });\r\n    window.location.replace(\"https://dev-wms-web.sayurbox.tech/\");\r\n    return true;\r\n  } catch (error) { }\r\n};\r\n\r\nexport const checkSessionId = async ({ dispatch, sessionId }) => {\r\n  try {\r\n    const url = `/user/checkSession?sessionId=${sessionId}`;\r\n    const data = await axios(url);\r\n    if (data) {\r\n      if (!data?.data?.isSuccess) dispatch({ type: USER_LOGOUT, user: null });\r\n    }\r\n  }\r\n  catch (e) {\r\n    const status = throwErrorStatus(e)\r\n    dispatch({\r\n      type: GET_USER,\r\n      user: null,\r\n      status: { message: \"Unauthorized\", code: 401 },\r\n      statusMessage: status.message,\r\n    });\r\n  }\r\n};\r\n\r\n// get by po sku code\r\n\r\nexport const getPoBySkuCode = async ({\r\n  moduleName,\r\n  setModule,\r\n  dispatch,\r\n  poNumber,\r\n  warehouseUuid,\r\n  areaId,\r\n  areaName,\r\n  setSkuList,\r\n  setLocalEntryData\r\n}) => {\r\n  try {\r\n    let param = ''\r\n    if (poNumber.length > 0) param = `&wmsPoSkuCode=${poNumber}`;\r\n    if (warehouseUuid) param = param + `&warehouseUuid=${warehouseUuid}`;\r\n    if (areaId) param = param + `&areaId=${areaId?.value}`;\r\n    let url = `/stocktake/poByPoSkuCode? ${param}`;\r\n    const { data, status } = await axios(url);\r\n    if (data?.data?.length) {\r\n      let entryData = {}\r\n      entryData.jobPost = {}\r\n      entryData.jobPost.list = []\r\n      const wait = data.data.map(async data => {\r\n        const {\r\n          ripeness,\r\n          expiryDate,\r\n          codeGrade,\r\n          inboundDate,\r\n          inboundQty,\r\n          initialWeight,\r\n          photo,\r\n          skuName,\r\n          skuUuid,\r\n          skuNumber,\r\n          supplierId,\r\n          supplierName,\r\n          totalPack,\r\n          uom,\r\n          wmsPoSkuCode,\r\n          slot,\r\n          category\r\n        } = data\r\n        const grade = await getGrade({ skuId: skuUuid })\r\n        let ddGrade = grade?.filter(data => data.label === skuName)\r\n        ddGrade?.length ? ddGrade = ddGrade[0] : ddGrade = { label: null, value: null }\r\n        entryData.jobPost.id = 0\r\n        entryData.jobPost.warehouseSource = warehouseUuid\r\n        entryData.jobPost.warehouseDestination = warehouseUuid\r\n        entryData.jobPost.areaSource = areaId?.value\r\n        entryData.jobPost.areaName = areaId?.label\r\n        entryData.jobPost.areaDestination = areaId?.value\r\n        if (entryData?.jobPost?.list?.length) {\r\n          const idx = entryData?.jobPost.list?.findIndex((data, idx) => data?.skuName === skuName)\r\n          if (idx === -1) {\r\n            entryData.jobPost.list.push(\r\n              {\r\n                category: category,\r\n                packSize: totalPack,\r\n                checked: true,\r\n                gradeList: grade,\r\n                slot: slot,\r\n                skuUuid: skuUuid,\r\n                skuNumber: skuNumber,\r\n                skuName: skuName,\r\n                warehouseId: warehouseUuid,\r\n                unitOfMeassures: uom,\r\n                totalQty: initialWeight,\r\n                photo: photo,\r\n                poList: [\r\n                  {\r\n                    wmsPoSkuCode: wmsPoSkuCode,\r\n                    skuUuid: skuUuid,\r\n                    inboundDate: inboundDate,\r\n                    initialWeight: initialWeight,\r\n                    uom: uom,\r\n                    expiryDate: expiryDate,\r\n                    supplierId: supplierId,\r\n                    supplierName: supplierName,\r\n                    codeGrade: codeGrade,\r\n                    inboundQty: inboundQty,\r\n                    totalPack: totalPack,\r\n                    category: category,\r\n                    itemList: [\r\n                      {\r\n                        qty: initialWeight,\r\n                        grade: ddGrade,\r\n                        ripeness: {\r\n                          label: ripeness,\r\n                          value: ripeness\r\n                        },\r\n                        expiryDate: expiryDate,\r\n                        expiryDateText: dateDMY({ date: expiryDate }),\r\n                      }\r\n                    ]\r\n                  }\r\n                ]\r\n              }\r\n            )\r\n          }\r\n          if (idx >= 0) {\r\n            entryData.jobPost.list[idx].totalQty += initialWeight\r\n            entryData.jobPost.list[idx].poList.push(\r\n              {\r\n                wmsPoSkuCode: wmsPoSkuCode,\r\n                skuUuid: skuUuid,\r\n                inboundDate: inboundDate,\r\n                initialWeight: initialWeight,\r\n                uom: uom,\r\n                expiryDate: expiryDate,\r\n                supplierId: supplierId,\r\n                supplierName: supplierName,\r\n                codeGrade: codeGrade,\r\n                inboundQty: inboundQty,\r\n                totalPack: totalPack,\r\n                category: category,\r\n                itemList: [\r\n                  {\r\n                    qty: initialWeight,\r\n                    grade: ddGrade,\r\n                    ripeness: {\r\n                      label: ripeness,\r\n                      value: ripeness\r\n                    },\r\n                    expiryDate: expiryDate,\r\n                    expiryDateText: dateDMY({ date: expiryDate }),\r\n                  }\r\n                ]\r\n              }\r\n            )\r\n          }\r\n        }\r\n\r\n        if (!entryData?.jobPost?.list?.length) {\r\n          entryData.jobPost.list.push(\r\n            {\r\n              checked: true,\r\n              category: category,\r\n              packSize: totalPack,\r\n              gradeList: grade,\r\n              skuUuid: skuUuid,\r\n              skuNumber: skuNumber,\r\n              skuName: skuName,\r\n              warehouseId: warehouseUuid,\r\n              unitOfMeassures: uom,\r\n              totalQty: initialWeight,\r\n              photo: photo,\r\n              poList: [\r\n                {\r\n                  wmsPoSkuCode: wmsPoSkuCode,\r\n                  skuUuid: skuUuid,\r\n                  inboundDate: inboundDate,\r\n                  initialWeight: initialWeight,\r\n                  uom: uom,\r\n                  expiryDate: expiryDate,\r\n                  supplierId: supplierId,\r\n                  supplierName: supplierName,\r\n                  codeGrade: codeGrade,\r\n                  inboundQty: inboundQty,\r\n                  totalPack: totalPack,\r\n                  category: category,\r\n                  itemList: [\r\n                    {\r\n                      qty: initialWeight,\r\n                      grade: ddGrade,\r\n                      ripeness: {\r\n                        label: ripeness,\r\n                        value: ripeness\r\n                      },\r\n                      expiryDate: expiryDate,\r\n                      expiryDateText: dateDMY({ date: expiryDate }),\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          )\r\n        }\r\n      })\r\n      await Promise.all(wait)\r\n      await setLocalEntryData(entryData)\r\n    }\r\n  }\r\n  catch (e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\n// get stock take summary data\r\nexport const getStockTakeSummary = async ({\r\n  stockMovementTargetRepack,\r\n  targetRepack,\r\n  moduleName,\r\n  zeroQuantity,\r\n  singleView,\r\n  module,\r\n  setModule,\r\n  dispatch,\r\n  desc,\r\n  warehouseUuid,\r\n  areaId,\r\n  areaIdDestination,\r\n  transaction,\r\n}) => {\r\n  try {\r\n    let param = \"\";\r\n    // let cancelToken = axios.CancelToken.source();\r\n    if (desc.length > 0) param = `&desc=${desc}`;\r\n    if (desc.length === 0) param = `&desc=${''}`;\r\n    if (warehouseUuid) param = param + `&warehouseUuid=${warehouseUuid}`;\r\n    if (areaId) param = param + `&areaId=${areaId?.value}`;\r\n    if (transaction === 'waste') param = param + `&transaction=${transaction}`\r\n    if (areaIdDestination === 'movement') param = param + `&areaId=${areaIdDestination?.value}`\r\n    if (moduleName === 'stockMovement' && stockMovementTargetRepack) param = param + `&haveTargetMovement=${stockMovementTargetRepack}`\r\n    if (moduleName === 'repack' && targetRepack) param = param + `&haveTargetRepack=${targetRepack}`\r\n    let url = `oss/skus? ${param}`;\r\n\r\n    dispatch({ type: GET_STOCK_TAKE_ACTION, isLoading: true });\r\n    setModule(dt);\r\n    const { data, status } = await axios(url);\r\n    let dt = [];\r\n    // filter selected sku\r\n    const skuList = module?.jobPost?.list\r\n    if (!data?.data) dispatch({ type: GET_STOCK_TAKE_ACTION, isLoading: false });\r\n    let tmp = data?.data.map(d => {\r\n      //if outbound, qty < 0 then skip\r\n      if (isFloat(d.totalQty) < 0.01) { }\r\n      if (isFloat(d.totalQty) <= 0 && zeroQuantity && moduleName === 'stockTake') {\r\n        let isExist = skuList?.filter(sku => sku.skuUuid === d.skuUuid)\r\n        if (singleView) isExist = []\r\n        dt.push({\r\n          targetMovementProgress: d.targetMovementProgress?.length ? d.targetMovementProgress : [],\r\n          checked: isExist?.length > 0 ? true : false,\r\n          gradeList: d.gradeList,\r\n          photo: d.photo,\r\n          poList: d.poList,\r\n          packSize: d.packSize,\r\n          category: d.category,\r\n          skuName: d.skuName,\r\n          skuNumber: parseInt(d.skuNumber),\r\n          skuUuid: d.skuUuid,\r\n          totalQty: isFloat(d.totalQty),\r\n          unitOfMeassures: d.unitOfMeassures,\r\n          warehouseId: d.warehouseId,\r\n          originalUom: d.originalUom,\r\n        });\r\n      }\r\n      if (isFloat(d.totalQty) > 0 && (moduleName === 'stockTake' ? !zeroQuantity : true)) {\r\n        let isExist = skuList?.filter(sku => sku.skuUuid === d.skuUuid)\r\n        if (singleView) isExist = []\r\n        dt.push({\r\n          targetMovementProgress: d.targetMovementProgress?.length ? d.targetMovementProgress : [],\r\n          checked: isExist?.length > 0 ? true : false,\r\n          gradeList: d.gradeList,\r\n          photo: d.photo,\r\n          poList: d.poList,\r\n          packSize: d.packSize,\r\n          category: d.category,\r\n          skuName: d.skuName,\r\n          skuNumber: parseInt(d.skuNumber),\r\n          skuUuid: d.skuUuid,\r\n          totalQty: isFloat(d.totalQty),\r\n          unitOfMeassures: d.unitOfMeassures,\r\n          warehouseId: d.warehouseId,\r\n          originalUom: d.originalUom,\r\n        });\r\n      }\r\n    });\r\n    setModule(dt);\r\n    dispatch({ type: GET_STOCK_TAKE_ACTION, isLoading: false });\r\n  } catch (e) { }\r\n};\r\n\r\nexport const getStockTakeSummaryAddSku = async ({\r\n  zeroQuantity,\r\n  moduleName,\r\n  setModule,\r\n  dispatch,\r\n  desc,\r\n  warehouseUuid,\r\n  areaId,\r\n  selectedSkusNumber,\r\n  transaction,\r\n}) => {\r\n  try {\r\n    let param = \"\";\r\n    if (desc) param = `&desc=${desc}`;\r\n    if (warehouseUuid) param = param + `&warehouseUuid=${warehouseUuid}`;\r\n    if (areaId) param = param + `&areaId=${areaId?.value}`;\r\n    if (transaction === \"waste\") param = param + `&transaction=${transaction}`;\r\n    let url = `oss/skus? ${param}`;\r\n    dispatch({ type: GET_STOCK_TAKE_ACTION, isLoading: true });\r\n    setModule(dt);\r\n    const { data, status } = await axios(url);\r\n\r\n    let dt = [];\r\n    let x = data?.data.map((d, idx) => {\r\n      if (selectedSkusNumber.includes(parseInt(d.skuNumber))) {\r\n        return false;\r\n      }\r\n\r\n      if (isFloat(d.totalQty) < 0.01) { }\r\n      if (isFloat(d.totalQty) <= 0 && zeroQuantity && moduleName === 'stockTake') {\r\n        dt.push({\r\n          targetMovement: d.targetMovementProgress?.length ? d.targetMovementProgress : [],\r\n          gradeList: d.gradeList,\r\n          photo: d.photo,\r\n          poList: d.poList,\r\n          packSize: d.packSize,\r\n          category: d.category,\r\n          skuName: d.skuName,\r\n          skuNumber: parseInt(d.skuNumber),\r\n          skuUuid: d.skuUuid,\r\n          totalQty: isFloat(d.totalQty),\r\n          unitOfMeassures: d.unitOfMeassures,\r\n          warehouseId: d.warehouseId,\r\n          originalUom: d.originalUom,\r\n        });\r\n      }\r\n      if (isFloat(d.totalQty) > 0 && (moduleName === 'stockTake' ? !zeroQuantity : true)) {\r\n        let tmp = {\r\n          targetMovement: d.targetMovementProgress?.length ? d.targetMovementProgress : [],\r\n          checked: d.checked,\r\n          gradeList: d.gradeList,\r\n          photo: d.photo,\r\n          poList: d.poList,\r\n          skuName: d.skuName,\r\n          skuNumber: parseInt(d.skuNumber),\r\n          packSize: d.packSize,\r\n          category: d.category,\r\n          skuUuid: d.skuUuid,\r\n          totalQty: isFloat(d.totalQty),\r\n          unitOfMeassures: d.unitOfMeassures,\r\n          warehouseId: d.warehouseId,\r\n          originalUom: d.originalUom,\r\n        };\r\n        dt.push(tmp);\r\n      }\r\n    });\r\n    setModule(dt);\r\n    dispatch({ type: GET_STOCK_TAKE_ACTION, isLoading: false });\r\n  } catch (e) {\r\n    // dispatch({ type: STATUS, status: 500, isLoading: false });\r\n  }\r\n};\r\n\r\n// get unfinished entry\r\nexport const getUnfinishedEntries = async ({\r\n  dispatch,\r\n  moduleName,\r\n  isExist,\r\n  ripeness,\r\n}) => {\r\n  if (isExist) return;\r\n  try {\r\n    dispatch({ type: IS_LOADING, isLoading: true });\r\n    const url = `${moduleName.toLowerCase()}/unfinishedEntries`;\r\n    const { data } = await axios(url);\r\n    if (data.data?.length === 0 || !data.data[0].list || data.data[0]?.list?.length === 0) {\r\n      dispatch({ type: IS_LOADING, isLoading: false, [`${moduleName}FirstLoad`]: true })\r\n      return\r\n    }\r\n    let savedJs = { jobPost: { ...data.data[0] } };\r\n    let lists = [];\r\n    if (data) {\r\n      const list = savedJs.jobPost.list.map(async list => {\r\n        list.checked = true\r\n        if (moduleName === 'outbound') list.outboundTypeList = await getOutboundType({ dispatch })\r\n        if (moduleName === 'stockTake') list.gradeList = await getGrade({ skuId: list.skuUuid, dispatch })\r\n        if (moduleName === 'repack') list.gradeList = await getGrade({ skuId: list.skuUuid, dispatch })\r\n        if (moduleName === 'waste') list.gradeList = await getGrade({ skuId: list.skuUuid, dispatch })\r\n        if (moduleName === 'stockMovement') list.gradeList = await getGrade({ skuId: list.skuUuid, dispatch })\r\n        list.poList.map(po => {\r\n          po.category = list.category\r\n          po.skuUuid = list.skuUuid\r\n          po.uom = list.unitOfMeassures\r\n          po.ripenessLevel = 0\r\n          const weight = list.unitOfMeassures === 'gram' || 'kg' ? parseFloat(po.initialWeight) : parseInt(po.initialWeight)\r\n          po.initialWeight = weight\r\n          let number = 0\r\n          po.edited = po.itemList.length > 0 ? true : false\r\n          po.itemList.map(item => {\r\n            item.expiryDate = po?.expiryDate\r\n            item.expiryDateText = dateDMY({ date: po?.expiryDate })\r\n\r\n            if (moduleName === 'stockTake') {\r\n              //restructure ripeness\r\n              item.ripeness = ripeness.filter(\r\n                (ripeness) => ripeness?.value === item?.ripeness?.value\r\n              );\r\n              item.ripeness = item.ripeness[0];\r\n\r\n              //restructure grade\r\n              item.grade = list.gradeList.filter(\r\n                (grade) => grade?.value === item?.grade?.value\r\n              );\r\n              item.grade = item.grade[0];\r\n            }\r\n\r\n            if (moduleName === \"repack\") {\r\n              //restructure grade\r\n              item.grade = list.gradeList.filter(\r\n                (grade) => grade?.value === item?.grade?.value\r\n              );\r\n              item.grade = item.grade[0];\r\n            }\r\n\r\n            if (moduleName === \"outbound\") {\r\n              //resturcture outbound type\r\n              item.outboundType = list.outboundTypeList.filter(\r\n                (outbound) => outbound?.value === item?.outboundType?.value\r\n              );\r\n              item.outboundType = item.outboundType[0];\r\n            }\r\n\r\n            if (\r\n              list.unitOfMeassures !== \"gram\" ||\r\n              list.unitOfMeassures !== \"kg\"\r\n            ) {\r\n              if (!isNaN(item.qty)) number += parseInt(item.qty);\r\n            }\r\n            return item;\r\n          });\r\n          po.initialWeightUpdate =\r\n            po.inboundQty - number <= 0 ? 0 : po.inboundQty - number;\r\n          number >= po.inboundQty\r\n            ? (po.initialWeightOver = number)\r\n            : (po.initialWeightOver = 0);\r\n          return po;\r\n        });\r\n        lists.push(list);\r\n      });\r\n      const wait = await Promise.all(list);\r\n      savedJs.jobPost.list = lists;\r\n      dispatch({\r\n        type: CREATE_JOB_SHEET,\r\n        [`${moduleName}EntryData`]: savedJs,\r\n        isLoading: false,\r\n        [`${moduleName}FirstLoad`]: true,\r\n      });\r\n    }\r\n  } catch (error) {\r\n    dispatch({ type: STATUS, [`${moduleName}FirstLoad`]: true });\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getPORepacking = async ({ skuId, warehouseId, uom }) => {\r\n  const url = `repack/totalWeightBySku?warehouseUuid=${warehouseId}&skuId=${skuId}&uom=${uom}`\r\n  const data = await axios(url)\r\n  if (data.data) return data.data\r\n}\r\n\r\nexport const removeEntryModule = async ({ id, moduleName, dispatch, setDiscard }) => {\r\n  if (id === 0) {\r\n    dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: null })\r\n    if (typeof (setDiscard) === 'function') setDiscard(false)\r\n    return true\r\n  }\r\n  try {\r\n    const url = `${moduleName.toLowerCase()}/discard?jobId=${id}`\r\n    const { data } = await axios(url)\r\n    dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: null })\r\n    if (typeof (setDiscard) === 'function') setDiscard(false)\r\n    return true\r\n  }\r\n  catch (e) {\r\n    return false\r\n  }\r\n};\r\n\r\n//get po by sku id\r\nexport const getPoBySkuId = async ({ skuId, warehouseUuid, areaId, dispatch, moduleName, zeroQuantity }) => {\r\n  try {\r\n    const url = `${moduleName?.toLowerCase()}/poBySkuId?skuId=${skuId}&warehouseUuid=${warehouseUuid}&areaId=${areaId}&zeroQuantity=${zeroQuantity}`;\r\n    const { data } = await axios(url);\r\n    if (!data?.data?.poItems?.length) dispatch({ type: 'STATUS', status: { code: 500, message: 'There is no PO' } })\r\n    if (moduleName === 'stockMovement') return { poItems: data?.data.poItems, targetMovements: data?.data.targetMovements }\r\n    return data?.data?.poItems;\r\n  } catch (error) {\r\n    // const status = throwErrorStatus(error)\r\n    // console.log(error)\r\n    // dispatch({type:'STATUS', status})\r\n    return;\r\n  }\r\n};\r\n\r\n// validate and get data from po sku info id\r\nexport const validatePoSkuInfoId = async ({\r\n  dispatch,\r\n  skuData,\r\n  status,\r\n  bulk = true,\r\n}) => {\r\n  if (\r\n    (status === false || status === null || skuData === null) &&\r\n    bulk === true\r\n  ) {\r\n    return 0;\r\n  }\r\n\r\n  try {\r\n    const url = \"/stocktake/rowValidationUpload\";\r\n    await axios({\r\n      method: \"post\",\r\n      url: url,\r\n      data: { data: skuData },\r\n    }).then(function (response) {\r\n      if (bulk === true) {\r\n        dispatch({\r\n          type: VALIDATE_PO_SKU_INFO_ID,\r\n          skuCodeValidated: response?.data.data,\r\n        });\r\n      } else {\r\n        return response?.data.data;\r\n      }\r\n    });\r\n  } catch (e) {\r\n    console.log(e);\r\n    // dispatch({ type: STATUS, status: 500 });\r\n  }\r\n};\r\n\r\nexport const validateSkuNumber = async ({\r\n  dispatch,\r\n  skuNumberData,\r\n  bulk = true,\r\n  status,\r\n}) => {\r\n  if (\r\n    (status === false || status === null || skuNumberData === null) &&\r\n    bulk === true\r\n  ) {\r\n    return 0;\r\n  }\r\n\r\n  try {\r\n    const url = \"/oss/skuByNumbers\";\r\n    await axios({\r\n      method: \"post\",\r\n      url: url,\r\n      data: { skuList: skuNumberData },\r\n    }).then(function (response) {\r\n      if (bulk === true) {\r\n        dispatch({\r\n          type: VALIDATE_PO_SKU_INFO_ID,\r\n          skuNumberValidated: response?.data.data,\r\n        });\r\n      } else {\r\n        return response?.data.data;\r\n      }\r\n    });\r\n  } catch (e) {\r\n    console.log(e);\r\n    // dispatch({ type: STATUS, status: 500 });\r\n  }\r\n};\r\n\r\n//validate and get data from po sku info id\r\nexport const submitCsv = async ({\r\n  dispatch,\r\n  dataCsv,\r\n  setSubmitStatus,\r\n  transaction,\r\n}) => {\r\n  let url = null;\r\n  if (transaction == 'stockTake') { url = \"/stocktake/submit\"; }\r\n  else if (transaction == 'movement') { url = \"/stockmovement/submit\"; }\r\n  else if (transaction == 'additionalOutbound') { url = \"/outbound/submit\"; }\r\n  else if (transaction == 'repacking') { url = \"/repack/submit\"; }\r\n  else if (transaction == 'waste') { url = \"/waste/submit\"; }\r\n\r\n\r\n  try {\r\n    return await axios({\r\n      method: \"post\",\r\n      url: url,\r\n      data: {\r\n        source: \"upload\",\r\n        jobPost: dataCsv[0],\r\n      },\r\n    }).then(function (response) {\r\n      if (response?.data?.isSuccess === true) {\r\n        dispatch({ type: STATUS, status: 200 });\r\n        setSubmitStatus(\"success\");\r\n      } else if (response?.data?.isSuccess === false) {\r\n        dispatch({ type: STATUS, status: 200 });\r\n        setSubmitStatus(\"failed\");\r\n      } else {\r\n        setSubmitStatus(false);\r\n      }\r\n      return response?.data\r\n\r\n    });\r\n  } catch (e) {\r\n    setSubmitStatus(false);\r\n    return 'error';\r\n  }\r\n};\r\n\r\nexport const submitCsvStockTransfer = async ({\r\n  dispatch,\r\n  dataCsv,\r\n  setSubmitStatus,\r\n  transaction,\r\n}) => {\r\n  let url = \"/stocktransfer/submit\";\r\n  return await axios({\r\n    method: \"post\",\r\n    url: url,\r\n    data: {\r\n      source: \"upload\",\r\n      jobPost: dataCsv[0],\r\n    },\r\n  })\r\n    .then(response => {\r\n      return response?.data;\r\n    })\r\n    .catch(error => {\r\n      return error?.response?.data;\r\n    });\r\n};\r\n\r\n\r\n//submit csv but for upload target repack \r\nexport const submitCsvTargetRepack = async ({ dispatch, data, setSubmitStatus }) => {\r\n  let url = '/repack/target_repacks/save';\r\n\r\n  try {\r\n    return await axios({\r\n      method: \"post\",\r\n      url: url,\r\n      data: {\r\n        data\r\n      },\r\n    }).then(function (response) {\r\n      if (response?.data?.isSuccess === true) {\r\n        dispatch({ type: STATUS, status: 200 });\r\n        setSubmitStatus(\"success\");\r\n      } else if (response?.data?.isSuccess === false) {\r\n        dispatch({ type: STATUS, status: 200 });\r\n        setSubmitStatus(\"failed\");\r\n      } else {\r\n        setSubmitStatus(false);\r\n      }\r\n      return response?.data;\r\n    });\r\n  } catch (e) {\r\n    setSubmitStatus(false);\r\n    return \"error\";\r\n  }\r\n};\r\n\r\n//save jobsheet\r\nexport const saveJobSheet = async ({ moduleEntry, moduleName, setIsSuccess, dispatch, name, table }) => {\r\n  try {\r\n    let finalModule = Object.assign({}, JSON.parse(JSON.stringify(moduleEntry)))\r\n\r\n    // submit & stocktake\r\n    // if(moduleName === 'stockTake' && name === 'submit'){\r\n    //   let list = finalModule.jobPost.list.map(ls => {\r\n    //     ls.poList.map(po => {\r\n    //       po.itemList = po.itemList.filter((item,idx) => {\r\n    //         if(item?.expiryDate !== po?.expiryDate || item.grade?.label !== ls.skuName) return item\r\n    //         if(idx === 0 && po.itemList.length === 1) return item.qty !== po.initialWeight\r\n\r\n    //         else return item\r\n    //       })\r\n    //       return po\r\n    //       })\r\n    //       return ls\r\n    //     })\r\n    //   finalModule.jobPost.list = list\r\n    // }\r\n    dispatch({ type: IS_LOADING, isLoading: true });\r\n    const url = `${moduleName.toLowerCase()}${name === \"submit\" ? \"/submit\" : \"/save\"\r\n      }`;\r\n    const { status, data } = await axios.post(url, finalModule);\r\n    if (data?.length === 0) {\r\n      setIsSuccess({ success: true, name: name, status: 500 })\r\n      dispatch({ type: IS_LOADING, isLoading: false })\r\n    }\r\n\r\n    let moduleEntrywithId = { ...finalModule };\r\n    // moduleEntrywithId.id = data\r\n    if (name === \"submit\") {\r\n      setIsSuccess({ success: true, name: name, status: 200 });\r\n      dispatch({ type: IS_LOADING, isLoading: false });\r\n    } else {\r\n      moduleEntrywithId.jobPost.id = data.data.id;\r\n      dispatch({\r\n        type: CREATE_JOB_SHEET,\r\n        [`${moduleName}EntryData`]: moduleEntrywithId,\r\n      });\r\n      setIsSuccess({ success: true, name: name, status: 200 });\r\n      dispatch({ type: IS_LOADING, isLoading: false });\r\n    }\r\n\r\n    // save updated target Repack\r\n    // if(moduleName === 'repack'){\r\n    //   const repack = await axios.post(`repack/target_repacks/save`, {data:table?.data})\r\n    //   if(repack?.isSuccess) {\r\n    //     setIsSuccess({ success: true, name: name, status: 500 })\r\n    //     dispatch({ type: IS_LOADING, isLoading: false })\r\n    //   }\r\n    // }\r\n\r\n    return true;\r\n  } catch (e) {\r\n    console.log(e);\r\n    const status = throwErrorStatus(e)\r\n    setIsSuccess({ success: true, name: null, status: 500, isLoading: false })\r\n    return false\r\n  }\r\n};\r\n\r\nexport const saveImage = async ({ e, dispatch }) => {\r\n  try {\r\n    dispatch({ type: IS_LOADING, isLoading: true });\r\n\r\n    let file = e.target.files[0];\r\n    var options = {\r\n      maxSizeMB: 1,\r\n      maxWidthOrHeight: 1920,\r\n      useWebWorker: true,\r\n      fileType: \"jpeg\",\r\n    };\r\n    const compressedFile = await imageCompression(file, options);\r\n    const newFile = new File([compressedFile], compressedFile.name);\r\n    let formData = new FormData();\r\n    formData.append(\"files\", newFile);\r\n    const url = `waste/uploadImages`;\r\n    const { data } = await axios.post(url, formData);\r\n    dispatch({ type: IS_LOADING, isLoading: false });\r\n    return data.data[0];\r\n  } catch (e) {\r\n    console.log(e);\r\n    // dispatch({ type: IS_LOADING, isLoading: false, status: 500 })\r\n  }\r\n};\r\n\r\n// Outbound Module\r\n\r\n//get po by sku id\r\nexport const getPoBySkuIdOutbound = async ({ skuId, warehouseUuid }) => {\r\n  try {\r\n    const url = `outbound/poBySkuId?skuId=${skuId}&warehouseUuid=${warehouseUuid}`;\r\n    const { data } = await axios(url);\r\n    return data?.data?.poItems;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n};\r\n\r\n//get waste area\r\nexport const getWasteWarehouseArea = async ({ warehouseUuid, setAreaId }) => {\r\n  try {\r\n    const url = `inventory/wasteArea?warehouseUuid=${warehouseUuid}`;\r\n    const { data } = await axios(url);\r\n    const areaId = data?.data.map((data) => ({\r\n      label: data.areaName,\r\n      value: data.id,\r\n    }));\r\n    if (areaId) setAreaId(areaId[0]);\r\n    return areaId[0];\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n};\r\n\r\n//get warehouse\r\nexport const getWarehouses = async ({ dispatch }) => {\r\n  try {\r\n    const url = `/oss/warehouses`;\r\n    const { data } = await axios(url);\r\n    dispatch({ type: 'DATA_WAREHOUSE', data })\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import { CREATE_JOB_SHEET, SET_AREA } from 'apiServices/action'\r\nimport { removeEntryModule } from 'apiServices'\r\n\r\n// check selected sku\r\nexport const selectedSkuCheck = ({ moduleEntry }) => {\r\n    let count = 0\r\n    if (moduleEntry) {\r\n        moduleEntry.jobPost.list.map(data => {\r\n            if (data.checked) count = count + 1\r\n        })\r\n    }\r\n\r\n    return count\r\n}\r\n\r\n//add new SKU\r\nexport const addSku = async ({ dispatch, moduleEntry, moduleSummary, moduleName }) => {\r\n    let jobSheet = { ...moduleSummary }\r\n    moduleEntry.map((data) => {\r\n        jobSheet.jobPost.list.push(data)\r\n    })\r\n\r\n    dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: jobSheet.jobPost.list.length > 0 ? jobSheet : null });\r\n}\r\n\r\n// get selected sku\r\nexport const getEditedData = ({ data }) => {\r\n    let edited = false;\r\n    const a = data?.poList?.map(item => {\r\n        if (item.edited) edited = true\r\n    })\r\n    return edited\r\n}\r\n\r\nexport const submitValidation = ({ moduleEntry, moduleName, setConfirmation, dispatch, setIsRequired }) => {\r\n    let isClear = []\r\n    let js = { ...moduleEntry }\r\n\r\n    const jsR = moduleEntry.jobPost.list.map(data => {\r\n        data.poList.map(po => {\r\n            po.itemList.map(item => {\r\n                const { qty, grade, ripeness, note } = item\r\n\r\n                if (po.category === 'Fruits') {\r\n                    if ((qty == 0 || isNaN(qty)) && grade?.value === null) {\r\n                        item.qtyIsEmpty = false\r\n                        item.gradeIsEmpty = false\r\n                        item.ripenessIsEmpty = false\r\n                        item.noteIsEmpty = false\r\n                    }\r\n                    else {\r\n                        if (item?.grade?.label === 'Waste' || item?.grade?.label === 'Semi Waste') {\r\n                            isNaN(qty) || qty === \"\" || qty === null ? item.qtyIsEmpty = true : item.qtyIsEmpty = false\r\n                            !grade?.value ? item.gradeIsEmpty = true : item.gradeIsEmpty = false\r\n                            grade?.label === 'Waste' && !note ? item.noteIsEmpty = true : item.noteIsEmpty = false\r\n                        }\r\n                        else {\r\n                            isNaN(qty) || qty === \"\" || qty === null ? item.qtyIsEmpty = true : item.qtyIsEmpty = false\r\n                            !grade?.value ? item.gradeIsEmpty = true : item.gradeIsEmpty = false\r\n                            !ripeness?.value ? item.ripenessIsEmpty = true : item.ripenessIsEmpty = false\r\n                            grade?.label === 'Waste' && !note ? item.noteIsEmpty = true : item.noteIsEmpty = false\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n\r\n                    if ((qty == 0 || isNaN(qty)) && grade?.value === null) {\r\n                        item.qtyIsEmpty = false\r\n                        item.gradeIsEmpty = false\r\n                        item.ripenessIsEmpty = false\r\n                        item.noteIsEmpty = false\r\n                    }\r\n                    else {\r\n                        isNaN(qty) || qty === \"\" || qty === null ? item.qtyIsEmpty = true : item.qtyIsEmpty = false\r\n                        !grade?.value ? item.gradeIsEmpty = true : item.gradeIsEmpty = false\r\n                        grade?.label === 'Waste' && !note ? item.noteIsEmpty = true : item.noteIsEmpty = false\r\n                    }\r\n                }\r\n\r\n                if (item?.qtyIsEmpty || item?.gradeIsEmpty || item?.ripenessIsEmpty || item?.noteIsEmpty || item?.qtyToCompareIsEmpty) isClear.push(false)\r\n                else isClear.push(true)\r\n                return item\r\n            })\r\n            return po\r\n        })\r\n        return data\r\n    })\r\n\r\n\r\n    //validate there is value\r\n    let valid = false\r\n    jsR.map(data => {\r\n        data.poList.map(po => {\r\n            po.itemList.map(item => {\r\n                let i = false\r\n                if (item?.qty >= 0) valid = true\r\n            })\r\n        })\r\n    })\r\n\r\n    js.jobPost.list = jsR\r\n    dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: js })\r\n    if (!isClear.includes(false) && valid) {\r\n        setConfirmation({ show: true, name: 'submit' })\r\n    }\r\n    else {\r\n        setConfirmation({ show: false, name: null })\r\n        setIsRequired(true)\r\n    }\r\n}\r\n\r\nexport const totalWeightCount = ({ moduleEntry, activeSku }) => {\r\n    let total = 0\r\n    if (moduleEntry) {\r\n        moduleEntry.jobPost.list[activeSku].poList.map(po => {\r\n            po.itemList.map(item => {\r\n                const qqq = Number.isInteger(item.qty) ? parseInt(item.qty) : Number.parseFloat(item.qty ? item.qty : 0)\r\n                total += qqq\r\n            })\r\n        })\r\n    }\r\n    total = Number.isInteger(total) ? total : Number.parseFloat(total).toFixed(2)\r\n    return total\r\n}\r\n\r\nexport const totalPackCount = ({ moduleEntry, activeSku }) => {\r\n    let total = 0\r\n    if (moduleEntry) {\r\n        moduleEntry.jobPost.list[activeSku].poList.map(po => {\r\n            po.itemList.map(item => {\r\n                const qqq = Number.isInteger(item.pack) ? parseInt(item.pack) : Number.parseFloat(item.pack ? item.pack : 0)\r\n                total += qqq\r\n            })\r\n        })\r\n    }\r\n    total = Number.isInteger(total) ? total : Number.parseFloat(total).toFixed(2)\r\n    return total\r\n}\r\n\r\n\r\n\r\nexport const totalListWeightCount = ({ moduleList }) => {\r\n    let total = 0\r\n    if (moduleList) {\r\n        moduleList.poList.map(po => {\r\n            po.itemList.map(item => {\r\n                const qqq = Number.isInteger(item.qty) ? parseInt(item.qty) : Number.parseFloat(item.qty ? item.qty : 0)\r\n                total += qqq\r\n            })\r\n        })\r\n    }\r\n    total = Number.isInteger(total) ? total : Number.parseFloat(total).toFixed(2)\r\n    return total\r\n}\r\n\r\n// edited jobsheet checker\r\nexport const jobSheetChecker = ({ moduleEntry }) => {\r\n    let edited = false;\r\n    const a = moduleEntry?.jobPost?.list?.map(item => {\r\n        const check = getEditedData({ data: item })\r\n        if (check) edited = true\r\n    })\r\n    return edited\r\n}\r\n\r\nexport const totalQty = (qty) => {\r\n    if (qty) {\r\n        if (Number.isInteger(qty)) return qty\r\n        else return Number.parseFloat(qty).toFixed(2)\r\n    }\r\n    else return 0\r\n}\r\n\r\nexport const checkisEmpty = (moduleEntry) => {\r\n    let isRequired = false\r\n    moduleEntry.poList.map(po => {\r\n        po.itemList.map(item => {\r\n            if (item.qtyIsEmpty || item.noteIsEmpty || item.outboundTypeIsEmpty || item.ripenessIsEmpty || item.gradeIsEmpty || item.packIsEmpty) isRequired = true\r\n        })\r\n    })\r\n    return isRequired\r\n}\r\n\r\n// check loading\r\nexport const responseCheck = ({ isLoading, summaryData = null }) => {\r\n    if (!summaryData && !isLoading) {\r\n        return true\r\n    }\r\n    if (isLoading) {\r\n        return false\r\n    }\r\n    else {\r\n        return true\r\n    }\r\n}\r\n\r\n//pre remove sku\r\nexport const preRemoveSku = ({ dispatch, moduleEntry, moduleName, idx, checked }) => {\r\n    let jobSheet = { ...moduleEntry }\r\n    jobSheet.jobPost.list[idx].checked = checked\r\n    dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: jobSheet })\r\n}\r\n\r\nexport const totalListItemWeightCount = ({ moduleList }) => {\r\n    let total = 0\r\n    if (moduleList) {\r\n        moduleList.map(item => {\r\n            const qqq = Number.isInteger(item.qty) ? parseInt(item.qty) : Number.parseFloat(item.qty ? item.qty : 0)\r\n            total += qqq\r\n        })\r\n    }\r\n    total = Number.isInteger(total) ? total : Number.parseFloat(total).toFixed(2)\r\n    return total\r\n}\r\n\r\n//get initial jobsheet\r\nexport const getInitialJs = ({ moduleEntry }) => {\r\n    return moduleEntry.jobPost.list.length\r\n}\r\n\r\n//remove sku\r\nexport const removeSku = async ({ dispatch, moduleEntry, moduleName }) => {\r\n    let jobSheet = { ...moduleEntry }\r\n\r\n    const list = moduleEntry.jobPost.list.filter(data => { if (data.checked) return data })\r\n    jobSheet.jobPost.list = list\r\n    dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: jobSheet })\r\n    if (list.length === 0) removeEntryModule({ id: jobSheet.jobPost.id, moduleName, dispatch })\r\n}\r\n\r\nexport const resetSKU = ({ dispatch, moduleSummary, moduleName }) => {\r\n    let jobSheet = { ...moduleSummary }\r\n    jobSheet.jobPost.list.map(list => {\r\n        list.checked = true\r\n    })\r\n    dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: jobSheet })\r\n}\r\n\r\nexport const setAreaId = ({ dispatch, selected }) => {\r\n    if (selected) dispatch({ type: SET_AREA, areaId: selected })\r\n}\r\n\r\nexport const countQty = ({ activeSku, moduleEntry, poListIdx, entryListIdx }) => {\r\n    let number = parseInt(0)\r\n    const list = moduleEntry.jobPost.list[activeSku].poList[poListIdx].itemList\r\n    list.map((item, idx) => {\r\n        if (idx !== entryListIdx) number += Number.isInteger(item?.qty) ? item?.qty : parseFloat(item?.qty)\r\n    })\r\n\r\n    return number\r\n}\r\n\r\nexport const deleteRow = ({\r\n    dispatch,\r\n    moduleEntry,\r\n    moduleName,\r\n    activeSku,\r\n    poListIdx,\r\n    entryListIdx,\r\n    e,\r\n    countQty\r\n}) => {\r\n    let js = { ...moduleEntry }\r\n    const number = countQty({ moduleEntry, activeSku, poListIdx, entryListIdx })\r\n    const update = js.jobPost.list[activeSku].poList[poListIdx].initialWeight\r\n\r\n    js.jobPost.list[activeSku].poList[poListIdx].initialWeightScreenUpdate = update - number\r\n    js.jobPost.list[activeSku].poList[poListIdx].itemList.splice(entryListIdx, 1)\r\n\r\n    if (js.jobPost.list[activeSku].poList[poListIdx].itemList.length === 0) js.jobPost.list[activeSku].poList[poListIdx].edited = false\r\n    dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: js })\r\n}\r\n\r\nexport const setZeroQuantity = ({ dispatch, zeroQuantity }) => {\r\n    dispatch({ type: 'SET_ZERO_QUANTITY', data: !zeroQuantity })\r\n}\r\n\r\nexport const setMovementTargetRepack = ({ dispatch, stockMovementTargetRepack }) => {\r\n    dispatch({ type: 'SET_MOVEMENT_TARGET_REPACK', data: !stockMovementTargetRepack })\r\n}\r\n\r\nexport const setSwitch = ({ moduleName, search, updateList, dispatch, zeroQuantity, stockMovementTargetRepack, isMovement }) => {\r\n    if (!isMovement) setZeroQuantity({ dispatch, zeroQuantity })\r\n    if (isMovement) setMovementTargetRepack({ dispatch, stockMovementTargetRepack })\r\n    if (search) updateList(!zeroQuantity, !stockMovementTargetRepack, moduleName)\r\n}\r\n\r\nexport const countPack = ({ activeSku, moduleEntry, grade, slot }) => {\r\n    let number = 0\r\n    const list = moduleEntry.jobPost.list[activeSku].poList[0].itemList\r\n    list.map((item) => {\r\n        if (item?.pack && item.grade.label === grade && item.slot?.value == slot) number += item?.pack\r\n    })\r\n    return number\r\n}\r\n\r\nexport const countPackMovement = ({ activeSku, moduleEntry, grade, slot }) => {\r\n    let number = 0\r\n    const list = moduleEntry.jobPost.list[activeSku].poList\r\n    list.map(po => {\r\n        po.itemList.map(item => {\r\n            if (item?.qty && item.grade.label === grade) number += item?.qty\r\n        })\r\n    })\r\n    return number\r\n}\r\n\r\n\r\nexport const filterTargetRepack = (targetRepacks, gradeList, activeSku, moduleEntry, slot, targetMovement) => {\r\n    const width = document.documentElement.clientWidth\r\n    const colWidth = width <= 500 ? 100 : 'auto'\r\n    let id = gradeList?.map(data => data.value)\r\n    let data = targetRepacks?.map((data, idx) => {\r\n        if (id.includes(data.skuUuid)) {\r\n\r\n            // set grade\r\n            let grade = null\r\n            gradeList.map(gr => {\r\n                if (gr.value === data.skuUuid) grade = gr.label\r\n            })\r\n\r\n            // set percent\r\n            const totalPack = (targetMovement ? data?.totalMove : data?.totalPack) + (targetMovement ? countPackMovement({ activeSku, moduleEntry, grade, slot: data?.slot }) : countPack({ activeSku, moduleEntry, grade, slot: data?.slot }))\r\n            const targetUom = data.targetUom\r\n            const targetUos = data.targetUos\r\n            const percent = (totalPack / (targetMovement ? targetUos : targetUom)) * 100\r\n\r\n            return {\r\n                warehouse: data.warehouse,\r\n                skuUuid: data.skuUuid,\r\n                skuName: data.skuName,\r\n                targetDate: data.targetDate,\r\n                targetUom: data.targetUom,\r\n                targetUos: data.targetUos,\r\n                slot: data.slot,\r\n                totalPack: totalPack,\r\n                totalMove: data.totalMove,\r\n                no: idx + 1,\r\n                grade: grade,\r\n                [targetMovement ? '%Moved' : '%Repack']: `${percent?.toFixed(2)}%`,\r\n            }\r\n        }\r\n    })\r\n    data = data?.filter(data => data !== undefined)\r\n    if (slot?.length) {\r\n        const slotList = slot.map(s => Number.parseInt(s?.value))\r\n        if (!slotList.includes(null)) data = data.filter(data => {\r\n            return slotList.includes(Number.parseInt(data.slot))\r\n        })\r\n    }\r\n    data = data?.map((data, idx) => {\r\n        data.no = idx + 1\r\n        return data\r\n    })\r\n    if (!data) data = []\r\n    const repack = [\r\n        { Header: 'Slot', placeholder: 'Slot', accessor: 'slot', width: 70, style: { textAlign: 'left', display: 'end', justifyContent: 'flex-end' } },\r\n        { Header: 'Grade', placeholder: 'Grade', accessor: 'grade', width: 250 },\r\n        { Header: 'Total Pack', placeholder: 'Total Pack', accessor: 'totalPack', style: { textAlign: 'right', display: 'flex', justifyContent: 'flex-end' }, width: colWidth, },\r\n        { Header: 'Target Pack', placeholder: 'Target Pack', accessor: 'targetUom', width: colWidth, style: { textAlign: 'right !important', display: 'flex', justifyContent: 'flex-end' }, className: 'flex-adjust', headerClassName: 'flex-adjust' },\r\n        { Header: '%Repack', placeholder: '%Repack', accessor: '%Repack', width: colWidth, style: { textAlign: 'right', display: 'flex', justifyContent: 'flex-end' }, },\r\n    ]\r\n\r\n    const move = [\r\n        // { Header: 'Slot', placeholder: 'Slot', accessor: 'slot', width: 70, style: { textAlign: 'left', display: 'end', justifyContent: 'flex-end' } },\r\n        { Header: 'Grade', placeholder: 'Grade', accessor: 'grade', width: 220, style: { textAlign: 'left', display: 'flex', justifyContent: 'flex-end' }, className: 'flex-adjust', headerClassName: 'flex-adjust' },\r\n        { Header: 'Total Movement', placeholder: 'Total Movement', accessor: 'totalPack', width: colWidth, style: { textAlign: 'right !important', display: 'flex', justifyContent: 'flex-end' }, className: 'flex-end !important', headerClassName: 'flex-end !important' },\r\n        // { Header: 'Total Movement', placeholder: 'Total Movement', accessor: 'totalPack', style: { textAlign: 'left', display: 'flex', justifyContent: 'flex-end' }, width: colWidth, },\r\n        { Header: 'Target Movement', placeholder: 'Target Movement', accessor: 'targetUos', width: colWidth, style: { textAlign: 'right !important', display: 'flex', justifyContent: 'flex-end' }, className: 'flex-adjust', headerClassName: 'flex-adjust' },\r\n        { Header: '%Moved', placeholder: '%Moved', accessor: '%Moved', width: colWidth, style: { textAlign: 'right', display: 'flex', justifyContent: 'flex-end' }, },\r\n    ]\r\n    let table = { data, columns: targetMovement ? move : repack }\r\n    return table\r\n}\r\n\r\nexport const updateTargetRepack = ({ data, targetRepacks, activeSku, dispatch }) => {\r\n    // let newUpdatedTargetRepacks = []\r\n\r\n    // targetRepacks.map(target => {\r\n    //     data.map(updatedTarget => {\r\n    //             if(updatedTarget.skuName === target.skuName){\r\n    //                 target.totalPack = updatedTarget.totalPack\r\n    //                 newUpdatedTargetRepacks.push(target)\r\n    //             }\r\n    //         })\r\n    // })\r\n\r\n    // console.log(newUpdatedTargetRepacks);\r\n}\r\n\r\nexport const setTargetRepack = ({ moduleEntry, dispatch }) => {\r\n    let updatedTargetRepacks = []\r\n    moduleEntry.jobPost.list.map(ls => {\r\n        if (ls.poList[0].targetRepacks?.length) updatedTargetRepacks = updatedTargetRepacks.concat(ls.poList[0].targetRepacks)\r\n    })\r\n    dispatch({ type: 'IS_LOADING', targetRepacks: updatedTargetRepacks })\r\n}\r\n\r\nexport const addSlot = ({ dispatch, moduleEntry, slot, moduleName }) => {\r\n    let newModuleEntry = { ...moduleEntry }\r\n\r\n    if (slot?.length) {\r\n        newModuleEntry.jobPost.slot = slot.map(s => {\r\n            if (Number.isInteger(s?.value)) return Number.parseInt(s?.value)\r\n            else return 0\r\n        })\r\n        dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: newModuleEntry })\r\n    }\r\n}","import axios from \"axios\";\r\nimport { WAREHOUSE_AREA, RIPENESS_LEVEL, GRADE, OUTBOUND_TYPE } from \"../action\";\r\n\r\nexport const getWarehouseArea = async ({\r\n  warehouseUuid,\r\n  dispatch,\r\n  type = \"dropdown\",\r\n}) => {\r\n  try {\r\n    let url = `/inventory/warehouseArea?warehouseUuid=${warehouseUuid}`;\r\n    const { data = null } = await axios(url);\r\n    if (type == \"csvValidator\") {\r\n      //get warehouse area for csv validator\r\n      dispatch({\r\n        type: WAREHOUSE_AREA,\r\n        warehouseAreaCsv: data?.data.map((data) => ({\r\n          label: data?.areaName,\r\n          value: data?.id,\r\n        })),\r\n      });\r\n    } else {\r\n      return data?.data.map((data) => ({\r\n          label: data?.areaName,\r\n          value: data?.id,\r\n        }))\r\n    }\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nexport const getRipenessLevel = async ({ dispatch }) => {\r\n  try {\r\n    const url = `/inventory/ripenessLevel`;\r\n    const { data } = await axios(url);\r\n    const ddList = data?.data.map((data, i) => ({ label: data, value: String(data) }))\r\n    dispatch({\r\n      type: RIPENESS_LEVEL,\r\n      ripenessLevel: ddList\r\n    });\r\n    return ddList\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nexport const getGrade = async ({ skuId,dispatch }) => {\r\n  try {\r\n    const url = `/inventory/grade?skuId=${skuId}`;\r\n    const { data } = await axios(url);\r\n    // console.log(data);\r\n    if (data) {\r\n      return data.data.map((data) => ({\r\n        label: data.skuDescription,\r\n        value: data.id,\r\n        multiplier:data.parentToChildMultiplier,\r\n        uom:data.uom\r\n      }));\r\n    }\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nexport const getOutboundType = async ({\r\n  type = \"dropdown\",\r\n  dispatch\r\n}) => {\r\n  try {\r\n    const url = `/inventory/outboundType`;\r\n    const { data } = await axios(url);\r\n    let outboundType = []\r\n    if (data) {\r\n      if (type == 'csvValidator') {\r\n        dispatch({\r\n          type: OUTBOUND_TYPE,\r\n          outboundTypeCsv: data?.data.map((listItem) => ({\r\n            label: listItem.description,\r\n            value: listItem.code\r\n          })),\r\n        });\r\n      } else {\r\n        outboundType = data.data.map(listItem => ({\r\n          label: listItem.description,\r\n          value: listItem.code\r\n        }))\r\n      }\r\n    }\r\n    return outboundType;\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nexport const getWarehouse = async({}) => {\r\n  try{\r\n    const url = `/oss/warehouses`\r\n  const {data} = await axios(url)\r\n  if(data){\r\n    return data?.data.map(data => ({label: data.name, value:data.id}))\r\n  }\r\n  }\r\n  catch(e){\r\n    console.log(e)\r\n  }\r\n}"],"sourceRoot":""}