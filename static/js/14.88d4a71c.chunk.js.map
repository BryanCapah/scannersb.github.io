{"version":3,"sources":["apiServices/index.js","apiServices/dropdown/index.js"],"names":["getUserData","a","dispatch","sessionId","setComplete","type","GET_USER","status","url","axios","data","headers","isSuccess","user","message","code","statusMessage","throwErrorStatus","userLogout","email","logout","USER_LOGOUT","window","location","replace","getStockTakeSummary","moduleName","zeroQuantity","singleView","module","setModule","desc","warehouseUuid","areaId","areaIdDestination","transaction","param","length","value","GET_STOCK_TAKE_ACTION","isLoading","dt","skuList","jobPost","list","map","d","isFloat","totalQty","isExist","filter","sku","skuUuid","push","checked","gradeList","photo","poList","packSize","category","skuName","skuNumber","parseInt","unitOfMeassures","warehouseId","originalUom","getStockTakeSummaryAddSku","selectedSkusNumber","idx","includes","tmp","getUnfinishedEntries","ripeness","IS_LOADING","toLowerCase","savedJs","lists","getOutboundType","outboundTypeList","getGrade","skuId","po","uom","ripenessLevel","weight","parseFloat","initialWeight","number","edited","itemList","item","expiryDate","expiryDateText","dateDMY","date","grade","outboundType","outbound","isNaN","qty","initialWeightUpdate","inboundQty","initialWeightOver","Promise","all","CREATE_JOB_SHEET","STATUS","console","log","getPORepacking","removeEntryModule","id","setDiscard","getPoBySkuId","poItems","validatePoSkuInfoId","skuData","bulk","method","then","response","VALIDATE_PO_SKU_INFO_ID","skuCodeValidated","validateSkuNumber","skuNumberData","skuNumberValidated","submitCsv","dataCsv","setSubmitStatus","source","saveJobSheet","moduleEntry","setIsSuccess","name","finalModule","Object","assign","JSON","parse","stringify","ls","label","post","success","moduleEntrywithId","saveImage","e","file","target","files","options","maxSizeMB","maxWidthOrHeight","useWebWorker","fileType","imageCompression","compressedFile","newFile","File","formData","FormData","append","getWasteWarehouseArea","setAreaId","areaName","getWarehouseArea","WAREHOUSE_AREA","warehouseAreaCsv","getRipenessLevel","ddList","i","String","RIPENESS_LEVEL","skuDescription","multiplier","parentToChildMultiplier","OUTBOUND_TYPE","outboundTypeCsv","listItem","description","getWarehouse"],"mappings":"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","file":"static/js/14.88d4a71c.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport imageCompression from 'browser-image-compression';\r\nimport { isFloat, throwErrorStatus,dateDMY } from 'services'\r\nimport {\r\n  GET_STOCK_TAKE_ACTION,\r\n  GET_USER,\r\n  USER_LOGOUT,\r\n  STATUS,\r\n  VALIDATE_PO_SKU_INFO_ID,\r\n  CREATE_JOB_SHEET, IS_LOADING\r\n} from \"apiServices/action\";\r\nimport { getGrade, getOutboundType } from './dropdown'\r\n\r\n//get user credential by email\r\nexport const getUserData = async ({\r\n  dispatch,\r\n  sessionId,\r\n  setComplete\r\n}) => {\r\n  try {\r\n    dispatch({ type: GET_USER, status: null });\r\n    const url = `user/validate?sessionId=${sessionId}`;\r\n    const { data, headers } = await axios(url);\r\n    setComplete(true)\r\n    if (data) {\r\n      data[\"sessionId\"] = headers[\"session-id\"];\r\n\r\n      if (data?.isSuccess) dispatch({ type: GET_USER, user: data, status: null });\r\n      else dispatch({\r\n        type: GET_USER,\r\n        user: null,\r\n        status: { message: 'Unauthorized', code: 401 },\r\n        statusMessage: data.message\r\n      });\r\n    }\r\n    return true;\r\n  } catch (e) {\r\n    const status = throwErrorStatus(e)\r\n    setComplete(true)\r\n    dispatch({\r\n      type: \"STATUS\",\r\n      status,\r\n      user: null\r\n    });\r\n  }\r\n};\r\n\r\n//logout\r\nexport const userLogout = async ({ dispatch, email }) => {\r\n  try {\r\n    const logout = `/user/signOut?email=${email}`;\r\n    await axios(logout);\r\n    dispatch({ type: USER_LOGOUT, user: null });\r\n    window.location.replace(\"https://dev-wms-web.sayurbox.tech/ech/\");\r\n    return true;\r\n  } catch (error) {\r\n\r\n  }\r\n};\r\n\r\n// get stock take summary data\r\nexport const getStockTakeSummary = async ({\r\n  moduleName,\r\n  zeroQuantity,\r\n  singleView,\r\n  module,\r\n  setModule,\r\n  dispatch,\r\n  desc,\r\n  warehouseUuid,\r\n  areaId,\r\n  areaIdDestination,\r\n  transaction,\r\n}) => {\r\n  try {\r\n    let param = \"\";\r\n    // let cancelToken = axios.CancelToken.source();\r\n    if (desc.length > 0) param = `&desc=${desc}`;\r\n    if (warehouseUuid) param = param + `&warehouseUuid=${warehouseUuid}`;\r\n    if (areaId) param = param + `&areaId=${areaId?.value}`;\r\n    if (transaction === 'waste') param = param + `&transaction=${transaction}`\r\n    if (areaIdDestination === 'movement') param = param + `&areaId=${areaIdDestination?.value}`\r\n    let url = `oss/skus? ${param}`;\r\n\r\n    dispatch({ type: GET_STOCK_TAKE_ACTION, isLoading: true });\r\n    setModule(dt)\r\n    const { data, status } = await axios(url);\r\n    let dt = [];\r\n    // filter selected sku\r\n    const skuList = module?.jobPost?.list\r\n    if(!data?.data) dispatch({ type: GET_STOCK_TAKE_ACTION, isLoading: false });\r\n    let tmp = data?.data.map(d => {\r\n      //if outbound, qty < 0 then skip\r\n      if (isFloat(d.totalQty) < 0.01) { }\r\n      if(isFloat(d.totalQty) <= 0 && zeroQuantity && moduleName === 'stockTake'){\r\n        let isExist =  skuList?.filter(sku => sku.skuUuid === d.skuUuid)\r\n       if(singleView) isExist = []\r\n        dt.push({\r\n          checked: isExist?.length > 0 ? true : false,\r\n          gradeList: d.gradeList,\r\n          photo: d.photo,\r\n          poList: d.poList,\r\n          packSize: d.packSize,\r\n          category: d.category,\r\n          skuName: d.skuName,\r\n          skuNumber: parseInt(d.skuNumber),\r\n          skuUuid: d.skuUuid,\r\n          totalQty: isFloat(d.totalQty),\r\n          unitOfMeassures: d.unitOfMeassures,\r\n          warehouseId: d.warehouseId,\r\n          originalUom: d.originalUom\r\n        })\r\n      }\r\n      if(isFloat(d.totalQty)> 0 && (moduleName === 'stockTake' ? !zeroQuantity : true)) {\r\n       let isExist =  skuList?.filter(sku => sku.skuUuid === d.skuUuid)\r\n       if(singleView) isExist = []\r\n        dt.push({\r\n          checked: isExist?.length > 0 ? true : false,\r\n          gradeList: d.gradeList,\r\n          photo: d.photo,\r\n          poList: d.poList,\r\n          packSize: d.packSize,\r\n          category: d.category,\r\n          skuName: d.skuName,\r\n          skuNumber: parseInt(d.skuNumber),\r\n          skuUuid: d.skuUuid,\r\n          totalQty: isFloat(d.totalQty),\r\n          unitOfMeassures: d.unitOfMeassures,\r\n          warehouseId: d.warehouseId,\r\n          originalUom: d.originalUom\r\n        })\r\n      }\r\n    })\r\n    setModule(dt)\r\n    dispatch({ type: GET_STOCK_TAKE_ACTION, isLoading: false });\r\n  } catch (e) {\r\n\r\n  }\r\n};\r\n\r\nexport const getStockTakeSummaryAddSku = async ({\r\n  zeroQuantity,\r\n  moduleName,\r\n  setModule,\r\n  dispatch,\r\n  desc,\r\n  warehouseUuid,\r\n  areaId,\r\n  selectedSkusNumber,\r\n  transaction\r\n}) => {\r\n  try {\r\n    let param = \"\";\r\n    if (desc) param = `&desc=${desc}`;\r\n    if (warehouseUuid) param = param + `&warehouseUuid=${warehouseUuid}`;\r\n    if (areaId) param = param + `&areaId=${areaId?.value}`;\r\n    if (transaction === 'waste') param = param + `&transaction=${transaction}`\r\n    let url = `oss/skus? ${param}`;\r\n    dispatch({ type: GET_STOCK_TAKE_ACTION, isLoading: true });\r\n    setModule(dt)\r\n    const { data, status } = await axios(url);\r\n\r\n\r\n    let dt = [];\r\n    let x = data?.data.map((d, idx) => {\r\n      if (selectedSkusNumber.includes(parseInt(d.skuNumber))) {\r\n        return false;\r\n      }\r\n\r\n      if (isFloat(d.totalQty) < 0.01) { }\r\n      if(isFloat(d.totalQty) <= 0 && zeroQuantity && moduleName === 'stockTake'){\r\n        dt.push({\r\n          gradeList: d.gradeList,\r\n          photo: d.photo,\r\n          poList: d.poList,\r\n          packSize: d.packSize,\r\n          category: d.category,\r\n          skuName: d.skuName,\r\n          skuNumber: parseInt(d.skuNumber),\r\n          skuUuid: d.skuUuid,\r\n          totalQty: isFloat(d.totalQty),\r\n          unitOfMeassures: d.unitOfMeassures,\r\n          warehouseId: d.warehouseId,\r\n          originalUom: d.originalUom\r\n        })\r\n      }\r\n      if(isFloat(d.totalQty)> 0 && (moduleName === 'stockTake' ? !zeroQuantity : true)) {\r\n        let tmp = {\r\n          checked: d.checked,\r\n          gradeList: d.gradeList,\r\n          photo: d.photo,\r\n          poList: d.poList,\r\n          skuName: d.skuName,\r\n          skuNumber: parseInt(d.skuNumber),\r\n          packSize: d.packSize,\r\n          category: d.category,\r\n          skuUuid: d.skuUuid,\r\n          totalQty: isFloat(d.totalQty),\r\n          unitOfMeassures: d.unitOfMeassures,\r\n          warehouseId: d.warehouseId,\r\n          originalUom: d.originalUom\r\n        }\r\n        dt.push(tmp)\r\n      }\r\n    });\r\n    setModule(dt)\r\n    dispatch({ type: GET_STOCK_TAKE_ACTION, isLoading: false });\r\n  } catch (e) {\r\n    // dispatch({ type: STATUS, status: 500, isLoading: false });\r\n  }\r\n};\r\n\r\n// get unfinished entry\r\nexport const getUnfinishedEntries = async ({ dispatch, moduleName, isExist, ripeness }) => {\r\n  if (isExist) return\r\n  try {\r\n    dispatch({ type: IS_LOADING, isLoading: true })\r\n    const url = `${moduleName.toLowerCase()}/unfinishedEntries`;\r\n    const { data } = await axios(url);\r\n    if (data.data?.length === 0 ||!data.data[0].list || data.data[0]?.list?.length === 0) {\r\n      dispatch({ type: IS_LOADING, isLoading: false, [`${moduleName}FirstLoad`]: true })\r\n      return\r\n    }\r\n    let savedJs = { jobPost: { ...data.data[0] } }\r\n    let lists = []\r\n    if (data) {\r\n      const list = savedJs.jobPost.list.map(async list => {\r\n        list.checked = true\r\n        if (moduleName === 'outbound') list.outboundTypeList = await getOutboundType({ dispatch })\r\n        if (moduleName === 'stockTake') list.gradeList = await getGrade({ skuId: list.skuUuid, dispatch })\r\n        if (moduleName === 'repack') list.gradeList = await getGrade({ skuId: list.skuUuid, dispatch })\r\n        if (moduleName === 'waste') list.gradeList = await getGrade({ skuId: list.skuUuid, dispatch })\r\n        if (moduleName === 'stockMovement') list.gradeList = await getGrade({ skuId: list.skuUuid, dispatch })\r\n        list.poList.map(po => {\r\n          po.category = list.category\r\n          po.skuUuid = list.skuUuid\r\n          po.uom = list.unitOfMeassures\r\n          po.ripenessLevel = 0\r\n          const weight = list.unitOfMeassures === 'gram' || 'kg' ? parseFloat(po.initialWeight) : parseInt(po.initialWeight)\r\n          po.initialWeight = weight\r\n          let number = 0\r\n          po.edited = po.itemList.length > 0 ? true : false\r\n          po.itemList.map(item => {\r\n            item.expiryDate = po?.expiryDate\r\n            item.expiryDateText = dateDMY({date:po?.expiryDate})\r\n\r\n            if (moduleName === 'stockTake') {\r\n              //restructure ripeness\r\n              item.ripeness = ripeness.filter(ripeness => ripeness?.value === item?.ripeness?.value)\r\n              item.ripeness = item.ripeness[0]\r\n\r\n              //restructure grade\r\n              item.grade = list.gradeList.filter(grade => grade?.value === item?.grade?.value)\r\n              item.grade = item.grade[0]\r\n            }\r\n\r\n            if (moduleName === 'repack') {\r\n              //restructure grade\r\n              item.grade = list.gradeList.filter(grade => grade?.value === item?.grade?.value)\r\n              item.grade = item.grade[0]\r\n            }\r\n\r\n            if (moduleName === 'outbound') {\r\n              //resturcture outbound type\r\n              item.outboundType = list.outboundTypeList.filter(outbound => outbound?.value === item?.outboundType?.value)\r\n              item.outboundType = item.outboundType[0]\r\n            }\r\n\r\n            if (list.unitOfMeassures !== 'gram' || list.unitOfMeassures !== 'kg') {\r\n              if (!isNaN(item.qty)) number += parseInt(item.qty)\r\n            }\r\n            return item\r\n          })\r\n          po.initialWeightUpdate = (po.inboundQty - number) <= 0 ? 0 : po.inboundQty - number\r\n          number >= po.inboundQty ? po.initialWeightOver = number : po.initialWeightOver = 0\r\n          return po\r\n        })\r\n        lists.push(list)\r\n      })\r\n      const wait = await Promise.all(list)\r\n      savedJs.jobPost.list = lists\r\n      dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: savedJs, isLoading: false, [`${moduleName}FirstLoad`]: true })\r\n    }\r\n  } catch (error) {\r\n    dispatch({ type: STATUS, [`${moduleName}FirstLoad`]: true })\r\n    console.log(error)\r\n  }\r\n};\r\n\r\nexport const getPORepacking = async({skuId, warehouseId,uom}) => {\r\n  const url = `repack/totalWeightBySku?warehouseUuid=${warehouseId}&skuId=${skuId}&uom=${uom}`\r\n  const data = await axios(url)\r\n  if(data.data) return data.data\r\n}\r\n\r\nexport const removeEntryModule = async ({ id, moduleName, dispatch,setDiscard }) => {\r\n  if (id === 0) {\r\n    dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: null })\r\n    if(typeof(setDiscard) === 'function') setDiscard(false)\r\n    return true\r\n  }\r\n  try {\r\n    const url = `${moduleName.toLowerCase()}/discard?jobId=${id}`\r\n    const { data } = await axios(url)\r\n    dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: null })\r\n    if(typeof(setDiscard) === 'function') setDiscard(false)\r\n    return true\r\n  }\r\n  catch (e) {\r\n    return false\r\n  }\r\n}\r\n\r\n//get po by sku id\r\nexport const getPoBySkuId = async ({ skuId, warehouseUuid, areaId, dispatch, moduleName,zeroQuantity }) => {\r\n  try {\r\n    const url = `${moduleName?.toLowerCase()}/poBySkuId?skuId=${skuId}&warehouseUuid=${warehouseUuid}&areaId=${areaId}&zeroQuantity=${zeroQuantity}`;\r\n    const { data } = await axios(url);\r\n    if (!data?.data?.poItems?.length) dispatch({ type: 'STATUS', status: { code: 500, message: 'There is no PO' } })\r\n    return data?.data?.poItems;\r\n  } catch (error) {\r\n    // const status = throwErrorStatus(error)\r\n    // console.log(error)\r\n    // dispatch({type:'STATUS', status})\r\n    return\r\n  }\r\n};\r\n\r\n// validate and get data from po sku info id\r\nexport const validatePoSkuInfoId = async ({\r\n  dispatch,\r\n  skuData,\r\n  status,\r\n  bulk = true,\r\n}) => {\r\n  if (\r\n    (status === false || status === null || skuData === null) &&\r\n    bulk === true\r\n  ) {\r\n    return 0;\r\n  }\r\n\r\n  try {\r\n    const url = \"/stocktake/rowValidationUpload\";\r\n    await axios({\r\n      method: \"post\",\r\n      url: url,\r\n      data: { data: skuData },\r\n    }).then(function (response) {\r\n      if (bulk === true) {\r\n        dispatch({\r\n          type: VALIDATE_PO_SKU_INFO_ID,\r\n          skuCodeValidated: response?.data.data,\r\n        });\r\n      } else {\r\n        return response?.data.data;\r\n      }\r\n    });\r\n  } catch (e) {\r\n    console.log(e);\r\n    // dispatch({ type: STATUS, status: 500 });\r\n  }\r\n};\r\n\r\n\r\nexport const validateSkuNumber = async ({\r\n  dispatch,\r\n  skuNumberData,\r\n  bulk = true,\r\n  status\r\n}) => {\r\n  if (\r\n    (status === false || status === null || skuNumberData === null) &&\r\n    bulk === true\r\n  ) {\r\n    return 0;\r\n  }\r\n\r\n  try {\r\n    const url = \"/oss/skuByNumbers\";\r\n    await axios({\r\n      method: \"post\",\r\n      url: url,\r\n      data: { skuList: skuNumberData },\r\n    }).then(function (response) {\r\n      if (bulk === true) {\r\n        dispatch({\r\n          type: VALIDATE_PO_SKU_INFO_ID,\r\n          skuNumberValidated: response?.data.data,\r\n        });\r\n      } else {\r\n        return response?.data.data;\r\n      }\r\n    });\r\n  } catch (e) {\r\n    console.log(e);\r\n    // dispatch({ type: STATUS, status: 500 });\r\n  }\r\n};\r\n\r\n//validate and get data from po sku info id\r\nexport const submitCsv = async ({ dispatch, dataCsv, setSubmitStatus, transaction }) => {\r\n  let url = null;\r\n  if (transaction == 'stockTake') { url = \"/stocktake/submit\"; }\r\n  else if (transaction == 'movement') { url = \"/stockmovement/submit\"; }\r\n  else if (transaction == 'additionalOutbound') { url = \"/outbound/submit\"; }\r\n  else if (transaction == 'repacking') { url = \"/repack/submit\"; }\r\n  else if (transaction == 'waste') { url = \"/waste/submit\"; }\r\n   \r\n\r\n  try {\r\n    return await axios({\r\n      method: \"post\",\r\n      url: url,\r\n      data: {\r\n        source: \"upload\",\r\n        jobPost: dataCsv[0]\r\n      },\r\n    }).then(function (response) {\r\n      if (response?.data?.isSuccess === true) {\r\n        dispatch({ type: STATUS, status: 200 });\r\n        setSubmitStatus('success');\r\n      } else if (response?.data?.isSuccess === false) {\r\n        dispatch({ type: STATUS, status: 200 });\r\n        setSubmitStatus('failed');\r\n      } else {\r\n        setSubmitStatus(false);\r\n      }\r\n      return response?.data?.data;\r\n    });\r\n  } catch (e) {\r\n    setSubmitStatus(false);\r\n    return 'error';\r\n  }\r\n};\r\n\r\n//save jobsheet\r\nexport const saveJobSheet = async ({ moduleEntry, moduleName, setIsSuccess, dispatch, name }) => {\r\n  try {\r\n    let finalModule = Object.assign({}, JSON.parse(JSON.stringify(moduleEntry)))\r\n    \r\n    if(moduleName === 'stockTake' && name === 'submit'){\r\n      let list = finalModule.jobPost.list.map(ls => {\r\n        ls.poList.map(po => {\r\n          po.itemList = po.itemList.filter((item,idx) => {\r\n            if(item?.expiryDate !== po?.expiryDate || item.grade?.label !== ls.skuName) return item\r\n            if(idx === 0 && po.itemList.length === 1) return item.qty !== po.initialWeight\r\n            else return item\r\n          })\r\n          return po\r\n          })\r\n          return ls\r\n        })\r\n      finalModule.jobPost.list = list\r\n    }\r\n    dispatch({ type: IS_LOADING, isLoading: true })\r\n    const url = `${moduleName.toLowerCase()}${name === 'submit' ? '/submit' : '/save'}`;\r\n    const { status, data } = await axios.post(url, finalModule);\r\n    if(data?.length === 0) {\r\n      setIsSuccess({ success: true, name: name, status: 500 })\r\n      dispatch({ type: IS_LOADING, isLoading: false })\r\n    }\r\n\r\n    let moduleEntrywithId = { ...finalModule }\r\n    // moduleEntrywithId.id = data\r\n    if (name === 'submit') {\r\n      setIsSuccess({ success: true, name: name, status: 200 })\r\n      dispatch({ type: IS_LOADING, isLoading: false })\r\n    }\r\n    else {\r\n      moduleEntrywithId.jobPost.id = data.data.id\r\n      dispatch({ type: CREATE_JOB_SHEET, [`${moduleName}EntryData`]: moduleEntrywithId })\r\n      setIsSuccess({ success: true, name: name, status: 200 })\r\n      dispatch({ type: IS_LOADING, isLoading: false })\r\n    }\r\n\r\n    return true\r\n  } catch (e) {\r\n    console.log(e);\r\n    const status = throwErrorStatus(e)\r\n    setIsSuccess({ success: true, name: null, status:500,isLoading:false })\r\n    return false\r\n  }\r\n\r\n};\r\n\r\nexport const saveImage = async ({ e, dispatch, }) => {\r\n  try {\r\n    dispatch({ type: IS_LOADING, isLoading: true })\r\n\r\n    let file = e.target.files[0]\r\n    var options = {\r\n      maxSizeMB: 1,\r\n      maxWidthOrHeight: 1920,\r\n      useWebWorker: true,\r\n      fileType: 'jpeg'\r\n    }\r\n    const compressedFile = await imageCompression(file, options)\r\n    const newFile = new File([compressedFile], compressedFile.name)\r\n    let formData = new FormData();\r\n    formData.append('files', newFile);\r\n    const url = `waste/uploadImages`;\r\n    const { data } = await axios.post(url, formData);\r\n    dispatch({ type: IS_LOADING, isLoading: false })\r\n    return data.data[0]\r\n  } catch (e) {\r\n    console.log(e);\r\n    // dispatch({ type: IS_LOADING, isLoading: false, status: 500 })\r\n  }\r\n\r\n};\r\n\r\n\r\n// Outbound Module\r\n\r\n//get po by sku id\r\nexport const getPoBySkuIdOutbound = async ({ skuId, warehouseUuid }) => {\r\n  try {\r\n    const url = `outbound/poBySkuId?skuId=${skuId}&warehouseUuid=${warehouseUuid}`;\r\n    const { data } = await axios(url);\r\n    return data?.data?.poItems;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n};\r\n\r\n//get waste area\r\nexport const getWasteWarehouseArea = async ({ warehouseUuid, setAreaId }) => {\r\n  try {\r\n    const url = `inventory/wasteArea?warehouseUuid=${warehouseUuid}`;\r\n    const { data } = await axios(url);\r\n    const areaId = data?.data.map(data => ({ label: data.areaName, value: data.id }))\r\n    if (areaId) setAreaId(areaId[0])\r\n    return areaId[0];\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n}\r\n\r\n","import axios from \"axios\";\r\nimport { WAREHOUSE_AREA, RIPENESS_LEVEL, GRADE, OUTBOUND_TYPE } from \"../action\";\r\n\r\nexport const getWarehouseArea = async ({\r\n  warehouseUuid,\r\n  dispatch,\r\n  type = \"dropdown\",\r\n}) => {\r\n  try {\r\n    let url = `/inventory/warehouseArea?warehouseUuid=${warehouseUuid}`;\r\n    const { data = null } = await axios(url);\r\n    if (type == \"csvValidator\") {\r\n      //get warehouse area for csv validator\r\n      dispatch({\r\n        type: WAREHOUSE_AREA,\r\n        warehouseAreaCsv: data?.data.map((data) => ({\r\n          label: data?.areaName,\r\n          value: data?.id,\r\n        })),\r\n      });\r\n    } else {\r\n      return data?.data.map((data) => ({\r\n          label: data?.areaName,\r\n          value: data?.id,\r\n        }))\r\n    }\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nexport const getRipenessLevel = async ({ dispatch }) => {\r\n  try {\r\n    const url = `/inventory/ripenessLevel`;\r\n    const { data } = await axios(url);\r\n    const ddList = data?.data.map((data, i) => ({ label: data, value: String(data) }))\r\n    dispatch({\r\n      type: RIPENESS_LEVEL,\r\n      ripenessLevel: ddList\r\n    });\r\n    return ddList\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nexport const getGrade = async ({ skuId,dispatch }) => {\r\n  try {\r\n    const url = `/inventory/grade?skuId=${skuId}`;\r\n    const { data } = await axios(url);\r\n    // console.log(data);\r\n    if (data) {\r\n      return data.data.map((data) => ({\r\n        label: data.skuDescription,\r\n        value: data.id,\r\n        multiplier:data.parentToChildMultiplier,\r\n        uom:data.uom\r\n      }));\r\n    }\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nexport const getOutboundType = async ({\r\n  type = \"dropdown\",\r\n  dispatch\r\n}) => {\r\n  try {\r\n    const url = `/inventory/outboundType`;\r\n    const { data } = await axios(url);\r\n    let outboundType = []\r\n    if (data) {\r\n      if (type == 'csvValidator') {\r\n        dispatch({\r\n          type: OUTBOUND_TYPE,\r\n          outboundTypeCsv: data?.data.map((listItem) => ({\r\n            label: listItem.description,\r\n            value: listItem.code\r\n          })),\r\n        });\r\n      } else {\r\n        outboundType = data.data.map(listItem => ({\r\n          label: listItem.description,\r\n          value: listItem.code\r\n        }))\r\n      }\r\n    }\r\n    return outboundType;\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nexport const getWarehouse = async({}) => {\r\n  try{\r\n    const url = `/oss/warehouses`\r\n  const {data} = await axios(url)\r\n  if(data){\r\n    console.log(data);\r\n    return data?.data.map(data => ({label: data.name, value:data.id}))\r\n  }\r\n  }\r\n  catch(e){\r\n    console.log(e)\r\n  }\r\n}"],"sourceRoot":""}