(this["webpackJsonp@coreui/coreui-pro-react-admin-template"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template"]||[]).push([[31],{1251:function(e,t,n){"use strict";n.r(t);var a=n(659),o=n(1),s=n.n(o),r=n(56),i=n(20),u=n(673),l=n(675),c=(n(749),n(65)),d=n.n(c),m=n(91),p=n(19),f=n(663),v=n(22),h=n.n(v),b=function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a,o,s,r,i,u,l,c,m,p,v,b,y,g,w,E,x,k;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.csvData,a=t.dispatch,t.selectorStatus,o=t.setIsShowModal,s=t.setIsSubmitText,r=t.setActionButtonTitle,i=t.setCancelButtonTitle,u=t.setMsg1,l=t.setMsg2,c=t.setTitle,m=t.setModalShow,p=t.fileName,t.setCancelButtonClass,v=t.setActionButtonClass,b=t.setColourTitle,s("Loading..."),y=[],g=(new Date).getTime(),new Date(g),y=[{jobPost:{id:0,warehouseSource:n[0].warehouseSource||"",warehouseDestination:n[0].warehouseSource||"",areaSource:n[0].areaSource||"",areaDestination:n[0].areaSource||"",list:null}}],w=[],E=[],n.map((function(e,t){w.includes(e.skuUuid)||(w.push(e.skuUuid),E.push({skuNumber:e.skuNumber,skuUuid:e.skuUuid,uom:e.uom,photo:e.photo}))})),console.clear(),x=[],E.forEach((function(e,t){if(null===e||void 0===e||""===e)return!1;var a={};a.skuUuid=e.skuUuid,a.skuNumber=e.skuNumber,a.unitOfMeassures=e.uom,a.photo=e.photo,a.poList=[],n.map((function(t,n){if(t.skuNumber!==e.skuNumber)return!1;var o={};o.wmsPoSkuCode=t.wmsPoSkuCode||"",o.inboundDate=t.inboundDate||0,o.expiryDate=t.expiryDate||0,o.supplierUuid=t.supplierUuid||"",o.supplierName=t.supplierName||"","WASTE"==t.grade.toUpperCase()?o.grade="waste":"SEMI WASTE"==t.grade.toUpperCase()?o.grade="semi_waste":o.grade=t.grade||e.skuUuid,o.qty=t.qty||0,o.ripeness=t.ripeness||"",a.poList.push(o)})),x.push(a)})),k=[],x.forEach((function(e,t){var n={},a=[],o=[];e.poList.map((function(e,t){if(!a.includes(e.wmsPoSkuCode)){a.push(e.wmsPoSkuCode);var n={};n.wmsPoSkuCode=e.wmsPoSkuCode||"",n.inboundDate=h()(e.inboundDate).valueOf()||"",n.expiryDate=h()(e.expiryDate).valueOf()||"",n.supplierId=e.supplierUuid||"",n.supplierName=e.supplierName||"",n.itemList=[],o.push(n)}var s=a.indexOf(e.wmsPoSkuCode),r={};r.grade={label:e.grade,value:e.grade},r.ripeness={label:e.ripeness,value:e.ripeness},r.qty=e.qty||0,r.pack=e.pack||0,o[s].itemList.push(r)})),n.skuUuid=e.skuUuid,n.skuNumber=e.skuNumber,n.unitOfMeassures=e.unitOfMeassures,n.photo=e.photo,n.poList=o,k.push(n)})),y[0].jobPost.list=k,e.next=17,Object(f.r)({dataCsv:y,dispatch:a});case 17:e.sent,o(!1),s("Submit"),r("Done"),i(""),u(p+" upload successfull."),l("Would you import another file?"),c("Success"),v("bg-green background ml-0"),b("green"),m(!0);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=n(666);t.default=Object(i.i)((function(e){var t=Object(r.c)(),n=Object(r.d)((function(e){return e.csvFileName})),i=Object(r.d)((function(e){return e.csvData})),c=Object(r.d)((function(e){return e.csvField})),d=Object(r.d)((function(e){return e.warehouseAreaCsv})),m=Object(r.d)((function(e){return e.status})),f=s.a.useState(!1),v=Object(a.a)(f,2),h=v[0],g=v[1],w=s.a.useState(null),E=Object(a.a)(w,2),x=E[0],k=E[1],C=s.a.useState(!0),N=Object(a.a)(C,2),S=N[0],O=N[1],T=s.a.useState(!1),j=Object(a.a)(T,2),L=j[0],U=j[1],I=s.a.useState(!1),D=Object(a.a)(I,2),B=D[0],F=D[1],A=s.a.useState(!0),P=Object(a.a)(A,2),R=P[0],W=P[1],_=s.a.useState(null),M=Object(a.a)(_,2),q=M[0],K=M[1],G=s.a.useState(null),V=Object(a.a)(G,2),H=V[0],z=V[1],J=s.a.useState(null),Y=Object(a.a)(J,2),Q=Y[0],X=Y[1],Z=s.a.useState(null),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=s.a.useState(null),ae=Object(a.a)(ne,2),oe=ae[0],se=ae[1],re=s.a.useState("Submit"),ie=Object(a.a)(re,2),ue=ie[0],le=ie[1],ce=s.a.useState(null),de=Object(a.a)(ce,2),me=de[0],pe=de[1],fe=s.a.useState(null),ve=Object(a.a)(fe,2),he=ve[0],be=ve[1],ye=s.a.useState(null),ge=Object(a.a)(ye,2),we=ge[0],Ee=ge[1];if(Object(o.useEffect)((function(){!function(e){var t=e.csvData,n=e.csvField,a=e.setIsValidate,o=e.setCheckingCsv;if(void 0===t)return 0;var s=!0;t.map((function(e,t){n.map((function(t,n){!1===e[t.dataField+"Status"]&&(s=!1)}))})),a(!1!==s),o(!1)}({csvData:i,csvField:c,setIsValidate:U,setCheckingCsv:W})}),[R]),Object(o.useEffect)((function(){}),[i]),void 0===i||null===i)return e.history.push("/inventory-entry/stock-take/upload"),0;var xe=function(e){!function(e){var t=e.param,n=e.dispatch,a=e.setCheckingCsv;n({type:p.l,csvData:t}),a(!0)}({param:e,dispatch:t,setCheckingCsv:W})};return s.a.createElement("div",{className:"w-100 d-flex flex-column stock-take-summary"},s.a.createElement(u.a,{globalData:i,columns:c,tableClass:"reviewTable",hiddenRows:x,warehouseArea:d,setCsvDataTmp:function(e){return xe(e)},setIsValidate:function(e){return U(e)},dispatch:t,setCheckingCsv:W}),s.a.createElement("div",{className:"row pt-3"},s.a.createElement("div",{className:"col-4"},s.a.createElement("button",{type:"button",className:"btn px-3 mr-3 text no-shadow",style:{backgroundColor:"#fff"},onClick:function(){return function(e){var t=e.csvData,n=e.csvField,a=e.isShowErrorOnly,o=e.setIsShowErrorOnly,s=e.setIsHiddenRows,r=e.setCheckingCsv,i=[],u=[];t.map((function(e,t){var a=!0,o=t+1;n.map((function(t,n){var o=t.dataField+"Status";!1===e[o]&&(a=!1)})),!1===a?i.includes(o)||i.push(o):u.includes(o)||u.push(o)}));var l=[];if(!0===a){if((l=u.filter((function(e){return!i.includes(e)}))).length==t.length)return 0}else l=[];s(l),o(!a),r(!0)}({csvData:i,csvField:c,isShowErrorOnly:S,setIsShowErrorOnly:O,setIsHiddenRows:k,setCheckingCsv:W})}},"Show ",S?"Errors Only":"All"),s.a.createElement("button",{type:"button",className:"btn px-3 mr-3  text no-shadow",style:{backgroundColor:"#fff"},onClick:function(){return function(e){var t=e.csvData,n=e.csvField,a=e.dispatch,o=e.setCheckingCsv,s=[];t.map((function(e,t){var a=!0;n.map((function(t,n){var o=t.dataField+"Status";!1===e[o]&&(a=!1)})),!0===a&&s.push(e)})),a({type:p.l,csvData:s}),o(!0)}({csvData:i,csvField:c,dispatch:t,setCheckingCsv:W})}},"Delete Errors Field")),s.a.createElement("div",{className:"col-4",style:{lineHeight:"40px"}},"Review your imported file: ",n," (",i.length||0," Lines)"),s.a.createElement("div",{className:"col-4"},s.a.createElement("button",{type:"button",className:"btn px-5 bg-red text-white no-shadow float-right",onClick:function(){return e.history.goBack()}},"Discard"),s.a.createElement("button",{type:"button",class:"btn px-5 mr-3 text-white no-shadow float-right "+(!0===L&&(null===i||void 0===i?void 0:i.length)>0?"bg-green":"bg-primaryGrey disabled"),onClick:function(){return g(!h)}},"Submit"))),s.a.createElement(y.a,{status:m,onCloseFunction:function(){F(!1)},statusDisplay:B,title:q,cancelButtonTitle:ee,actionButtonTitle:oe,colorText:we,refreshOnCancel:!1,msg1:H,msg2:Q,cancelButtonClass:me,actionButtonClass:he+" ml-0",actionButtonEvent:function(){return e.history.push("/inventory-entry/stock-take/upload")}}),s.a.createElement(l.a,{submit:function(){return b({dispatch:t,csvData:i,setIsShowModal:g,setIsSubmitText:le,setActionButtonTitle:se,setCancelButtonTitle:te,setMsg1:z,setMsg2:X,setTitle:K,setModalShow:F,setCancelButtonClass:pe,setActionButtonClass:be,setColourTitle:Ee,fileName:n})},submitText:ue,show:h,setIsShowModal:g}))}))},666:function(e,t,n){"use strict";var a=n(659),o=n(1),s=n.n(o),r=n(661),i=(n(667),n(56)),u=n(19);t.a=function(e){var t=e.refresh,n=e.status,l=e.icon,c=e.statusDisplay,d=void 0!==c&&c,m=e.title,p=void 0===m?"":m,f=e.cancelButtonTitle,v=void 0===f?"Cancel":f,h=e.actionButtonTitle,b=void 0===h?"Submit":h,y=e.cancelButtonClass,g=void 0===y?"bg-background":y,w=e.actionButtonClass,E=void 0===w?"bg-background":w,x=e.actionButtonEvent,k=void 0===x?null:x,C=e.colorText,N=void 0===C?"red":C,S=e.msg1,O=void 0===S?null:S,T=e.msg2,j=void 0===T?null:T,L=e.onCloseFunction,U=void 0===L?null:L,I=e.refreshOnCancel,D=void 0===I||I,B=e.setIsSuccess,F=Object(i.c)();500===(null===n||void 0===n?void 0:n.code)&&0==d&&(l="em-pensive",p="Server Error",v="Try Again",b="Contact Administration",N="red",O=null===n||void 0===n?void 0:n.message,j="Please try again or contact Sayurbox administration for further information.",g="bg-green",d=!0,D=!0),408===(null===n||void 0===n?void 0:n.code)&&0==d&&(l="em-alarm_clock",p="Request Timeout",v="Try Again",b="Contact Administration",N="red",O=null===n||void 0===n?void 0:n.message,j="Please try again or contact Sayurbox administration for further information.",g="bg-green",d=!0,D=!0),400===(null===n||void 0===n?void 0:n.code)&&0==d&&(l="em-alarm_clock",p="Server Error",v="Try Again",b="Contact Administration",N="red",O=null===n||void 0===n?void 0:n.message,j="Please try again or contact Sayurbox administration for further information.",g="bg-green",d=!0,D=!1),404===(null===n||void 0===n?void 0:n.code)&&(p="Something wrong with the application",v="Try Again",b="Contact Administration",N="red",O=null===n||void 0===n?void 0:n.message,j="Please try again or contact Sayurbox administration for further information.",g="bg-green",d=!0,D=!1);var A=Object(o.useState)(d),P=Object(a.a)(A,2),R=P[0],W=P[1];return Object(o.useEffect)((function(){W(d)}),[d]),Object(o.useEffect)((function(){}),[R]),window.onkeydown=function(e){return 27===e.keyCode?W(!1):null},s.a.createElement(r.B,{className:"".concat(R?null:"d-none")},s.a.createElement(r.f,null,s.a.createElement(r.s,{show:R,closeOnBackdrop:!1,onClose:function(){W(!1),"function"===typeof B&&B({success:null,name:null}),F({type:u.k,status:null}),U&&U()},size:"lg",style:{minHeight:"280px"},bodyOpenClassName:"p-3"},s.a.createElement("div",{className:"d-flex flex-row-reverse"},s.a.createElement("i",{className:"pr-3 pt-3 iconU-modalClose",onClick:function(){W(!1),"function"===typeof B&&B({success:null,name:null}),F({type:u.k,status:null}),U&&U()}})),s.a.createElement(r.v,{className:"px-5 pt-5 border-none"},s.a.createElement(r.w,{className:"text LatoBold ".concat(N)},p," ",s.a.createElement("span",null,s.a.createElement("i",{className:"em ".concat(l)})))),s.a.createElement(r.t,{className:"px-5 py-0"},s.a.createElement("p",{className:"text mb-2"},O),s.a.createElement("p",{className:"text"},j)),s.a.createElement(r.u,{className:"px-5 pb-5 pt-0 justify-content-start border-none"},v?s.a.createElement(r.d,{className:"".concat(g," no-shadow px-5 mt-4 mb-0 mx-0"),onClick:function(){D?"function"===typeof t?t():function(e){var t=e.refresh;!0===(void 0===t||t)&&window.location.reload(!1)}({refresh:!0}):function(e){var t=e.setShow,n=e.parentOncCloseFunction;t(!1),n&&n()}({setShow:W,parentOncCloseFunction:U}),F({type:u.k,status:null})}},v):null,b?s.a.createElement(r.d,{className:"".concat(E," text no-shadow px-5 mt-4 mb-0 ml-3 mr-0"),onClick:function(){k?(k(),W(!1)):W(!1)}},b):null," "))))}},667:function(e,t,n){},671:function(e,t,n){},673:function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return g}));var a=n(65),o=n.n(a),s=n(91),r=n(169),i=n(170),u=n(172),l=n(171),c=n(1),d=n.n(c),m=n(661),p=n(694),f=n.n(p),v=(n(674),n(696),n(47)),h=n.n(v),b=n(697),y=n.n(b),g=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).changeWarehouseUuid=function(e,t,n,r,i,u,l){var c=a.props,d=c.setCsvDataTmp,m=c.globalData,p=m.findIndex((function(e){return e.id==r})),f=i.indexOf(e);m[p][t]=u[f],m[p][n]=l[f],setTimeout(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(m);case 1:case"end":return e.stop()}}),e)}))),400)},a.validatePOSKU=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var i,u,l,c,d,m,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=a.props,u=i.setCsvDataTmp,l=i.globalData,c=i.setIsValidate,d=l,e.prev=2,c(!1),"/stocktake/rowValidationUpload",m=null,p=null,setTimeout(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=document.getElementById("".concat(r)),p=document.getElementById("".concat(r,"span")),null!==m&&void 0!==m){e.next=4;break}return e.abrupt("return",0);case 4:return p.innerHTML="Validating",e.next=7,h()({method:"post",url:"/stocktake/rowValidationUpload",data:{data:[t]}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data,o=d.findIndex((function(e){return e.id==n}));a[0]&&!0===a[0].isExist?(d[o].wmsPoSkuCode=a[0].wmsPoSkuCode,d[o].wmsPoSkuCodeStatus=!0,d[o].wmsPoSkuCodeReason="PO SKU Code Not Found",d[o].expiryDate=a[0].expiryDate,d[o].inboundDate=a[0].inboundDate,d[o].supplierName=a[0].supplierName,d[o].supplierUuid=a[0].supplierUuid,d[o].uom=a[0].uom,d[o].photos=a[0].photos,m.classList.remove("red"),m.classList.add("hiddenTooltip")):(d[o].wmsPoSkuCodeStatus=!1,d[o].wmsPoSkuCodeReason="PO SKU Code Not Found",d[o].expiryDate="",d[o].inboundDate="",d[o].supplierName="",d[o].supplierUuid="",m.classList.add("red"),m.classList.remove("hiddenTooltip"),p.innerHTML="PO SKU Code Not Found"),u(d)}));case 7:case"end":return e.stop()}}),e)}))),400),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),a.validateOutbountReason=function(e,t,n){var o=a.props.globalData,s=o.findIndex((function(e){return e.id==t})),r=o[s];""==e&&"LAINNYA"==r.outboundType.toUpperCase()&&setTimeout((function(){var e=document.getElementById("row".concat(t,"-outboundReason"));e.classList.add("red","tooltip-custom"),e.innerHTML="Outbound Reason Can't be empty<span class=\"tooltiptext\">Outbound Reason Can't be empty if Outbound type = 'Lainnya'</span>"}),300)},a.validateOutbountType=function(e,t,n){var o=a.props,s=o.globalData,r=o.setIsValidate,i=s;if(r(!1),"LAINNYA"!==e.toUpperCase())return r(!0),0;var u=i.findIndex((function(e){return e.id==t}));""==i[u].outboundReason&&setTimeout((function(){var e=document.getElementById("row".concat(t,"-outboundReason"));e.classList.add("red","tooltip-custom"),e.innerHTML="Outbound Reason Can't be empty<span class=\"tooltiptext\">Outbound Reason Can't be empty if Outbound type = 'Lainnya'</span>"}),300)},a.validateSKUNumber=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r,i){var u,l,c,d,m,p,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=a.props,l=u.globalData,c=u.setCsvDataTmp,d=u.setIsValidate,m=l,e.prev=2,d(!1),"/oss/skuByNumbers",p=null,f=null,setTimeout(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=document.getElementById("".concat(r)),f=document.getElementById("".concat(r,"span")),null!==p&&void 0!==p){e.next=4;break}return e.abrupt("return",0);case 4:return f.innerHTML="Validating",e.next=7,h()({method:"post",url:"/oss/skuByNumbers",data:{skuList:[t]}}).then((function(e){var a,o=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data,s=e.data.isSuccess,r=m.findIndex((function(e){return e.id==n}));!0===s&&o.length>0?(m[r][i]=o[0].skuNumber,m[r][i+"Reason"]=o[0].skuDescription,m[r][i+"Status"]=!0,m[r][i+"Uuid"]=o[0].id,p.classList.remove("red"),p.classList.add("hiddenTooltip"),"skuNumber"==i&&(m[r].skuUuid=o[0].id,m[r].photo=o[0].imageMd),"newGrade"==i&&(m[r].newGradeUom=o[0].uom)):(m[r][i]=t,m[r][i+"Reason"]="SKU Number Not Found",m[r][i+"Status"]=!1,m[r][i+"Uuid"]=null,p.classList.add("red"),p.classList.remove("hiddenTooltip"),f.innerHTML="SKU Number Not Found","skuNumber"==i&&(m[r].skuUuid="",m[r].photo=""),"newGrade"==i&&(m[r].newGradeUom=null)),c(m)}));case 7:case"end":return e.stop()}}),e)}))),400),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,a,o){return e.apply(this,arguments)}}(),a.state={validateStatus:!1,validateResult:"Please Wait...",rowCount:0,keyy:0},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.columns,a=t.hiddenRows,o=t.tableClass,s=t.warehouseArea,r=t.outboundType,i=t.setCheckingCsv,u=t.globalData,l=t.editable,c=void 0===l||l,p=t.warehousesData,v=void 0===p?[]:p,h=this.state,b=(h.validateStatus,h.keyy),g=[],w=[],E=[];if(v){var x;null===v||void 0===v||null===(x=v.data)||void 0===x||x.map((function(e){g.push(e.code),w.push(e.id),E.push(e.name)}))}var k=s.map((function(e){return e.label.toUpperCase()}))||[],C=s.map((function(e){return e.value}))||[],N=r?r.map((function(e){return e.label.toUpperCase()})):[],S=r?r.map((function(e){return e.value})):[],O=n.map((function(t,n){return t.validator=function(n,a,o,s){var r=t.dataField,u=r+"Status",l=r+"Reason",c=!0,d=null,m="row"+a.id+"-"+r;"wmsPoSkuCode"==r&&(e.validatePOSKU(n,a.id,m,r),c=!0),"skuNumber"==r&&(e.validateSKUNumber(n,a.id,m,r),c=!0);var p=["WASTE","SEMI WASTE"];if("newGrade"==r&&"waste"==e.props.transaction?p.includes(n.toUpperCase())?(a.newGradeUuid=n,a.newGradeUom=null):(d="Waste Type not found",h=!1,c=!1):"newGrade"==r&&(p.includes(n.toUpperCase())?(a.newGradeUuid=n,a.newGradeUom=null):parseInt(n)?(c=!0,e.validateSKUNumber(n,a.id,m,r)):""==n?(a.newGradeUuid=null,a.newGradeUom=null,c=!0):(d="Grade Undefined",h=!1,c=!1)),"outboundType"==r&&S.length>0)if(N.includes(n.toUpperCase())){var f=N.indexOf(n.toUpperCase());a.outboundTypeCode=S[f],c=!0,e.validateOutbountType(n,a.id,m)}else c=!1,d="Outbound Type Not Found";if("outboundReason"==r&&e.validateOutbountReason(n,a.id,m),"warehouse"==r&&(g.includes(n)?e.changeWarehouseUuid(n,"warehouseUuid","warehouseName",a.id,g,w,E):(c=!1,d="Warehouse Not Found")),"warehouseDestination"==r&&(g.includes(n)?e.changeWarehouseUuid(n,"warehouseDestinationUuid","warehouseDestinationName",a.id,g,w,E):(c=!1,d="Warehouse Not Found")),"areaName"==r||"areaNameDestination"==r)if(k.includes(n.toUpperCase())){var v=k.indexOf(n.toUpperCase());"areaNameDestination"==r?a.areaDestination=C[v]:a.areaSource=C[v],c=!0}else c=!1,d="Warehouse Area Not Found";"newPack"==r&&(!isNaN(n)?c=!0:(c=!1,d="Pack Should be a number"));var h=null;!1===(h="number"!=t.type||!isNaN(n))&&(d="".concat(t.text," Should be a ").concat(t.type));if(["grade","outboundReason","ripenessLevel","newRipeness","reason","expiryDate"].includes(r)&&""===n)d="",h=!0,c=!0;else if("grade"==r){["WASTE","SEMI WASTE"].includes(n.toUpperCase())||(d="Waste Type Not Found",h=!1,c=!1)}if("ripenessLevel"==r||"newRipeness"==r){[0,1,2,3].includes(parseInt(n))||""==n?(h=!0,c=!0,d="",""==n&&(n="")):(h=!1,c=!1,d="Undefined Ripeness Level")}if("date_indo"==t.type){n.match(/(0[1-9]|[12][0-9]|3[01])[-.](0[1-9]|1[012])[-.](19|20)\d\d/)||""==n?(h=!0,c=!0):(d="Date format must be 'dd-mm-yyyy'",h=!1,c=!1)}if(a[l]=d,c&&h){["wmsPoSkuCode","skuNumber"].includes(r)||(a[u]=!0,i())}return{valid:!(!c||!h),message:d}},t.formatter=function(e,n,a){var o=t.dataField,s=o+"Status",r=o+"Reason",i="row"+n.id+"-"+o,u=n[r];return!1===n[s]?(!1,!1,d.a.createElement("div",{id:i,className:"tooltip-custom red"},e,d.a.createElement("span",{id:i+"span",className:"tooltiptext"},u))):d.a.createElement("div",{id:i,className:"tooltip-custom hiddenTooltip"},e,d.a.createElement("span",{id:i+"span",className:"tooltiptext"},u))},t})),T={sortFunc:this.sortFunc,sortCaret:function(e,t){return e?"asc"===e?d.a.createElement("i",{className:"iconU-tableSortingTop ml-2"}):"desc"===e?d.a.createElement("i",{className:"iconU-tableSortingBottom ml-2"}):null:d.a.createElement("i",{className:"iconU-tableSortingNull ml-2"})}};return console.clear(),console.log(u),d.a.createElement(m.e,{className:"table-responsive"},d.a.createElement(f.a,{keyField:"id",data:u,columns:O,sort:T,classes:o||null,cellEdit:!0===c?y()({mode:"click",blurToSave:!0,nonEditableRows:function(){return e.props.dataDoubleRow||[]}}):null,bordered:!1,hiddenRows:a,key:b}))}}]),n}(d.a.Component),w=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.columns,n=e.tableClass,a=e.data,o=t.map((function(e,t){return e.formatter=function(t,n,a){var o=e.dataField;return"uploadStatus"==o&&"Failed"===n.uploadStatus?d.a.createElement("div",{className:"tooltip-custom red"},t,d.a.createElement("span",{className:"tooltiptext"},n.uploadStatusReason)):"uploadStatus"==o&&"Success"===n.uploadStatus?d.a.createElement("div",{className:"green"},t,d.a.createElement("span",null)):d.a.createElement("div",null,t,d.a.createElement("span",null))},e})),s={sortFunc:this.sortFunc,sortCaret:function(e,t){return e?"asc"===e?d.a.createElement("i",{className:"iconU-tableSortingTop ml-2"}):"desc"===e?d.a.createElement("i",{className:"iconU-tableSortingBottom ml-2"}):null:d.a.createElement("i",{className:"iconU-tableSortingNull ml-2"})}};return d.a.createElement(m.e,{className:"table-responsive"},d.a.createElement(f.a,{keyField:"id",data:a,columns:o,sort:s,classes:n||null,bordered:!1}))}}]),n}(d.a.Component)},674:function(e,t,n){},675:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return p}));var a=n(659),o=n(1),s=n.n(o),r=n(661),i=(n(671),n(56)),u=n(664),l=n(705),c=function(e){var t=e.e,n=e.state,a=e.isCaptcha,o=e.setIsValidated,s=e.setIsType,r=e.isType,i=t.key,l=Object(u.a)(r);if(["ArrowUp","ArrowDown","Tab"].includes(i))return 0;if("Backspace"===i){var c=Object(u.a)(r);""==c[n]&&1!==n&&(document.getElementById("t"+(parseInt(n)-1)).focus(),document.getElementById("t"+(parseInt(n)-1)).value="",c[n-1]="",l[n-1]=""),console.log(c)}else if("ArrowLeft"===i){if(1!==n)return document.getElementById("t"+(parseInt(n)-1)).focus(),document.getElementById("t"+(parseInt(n)-1)).setSelectionRange(-1,-1),0}else if("ArrowRight"===i){if(3!==n)return document.getElementById("t"+(parseInt(n)+1)).focus(),document.getElementById("t"+(parseInt(n)+1)).setSelectionRange(-1,-1),0}else 3!==n&&document.getElementById("t"+(parseInt(n)+1)).focus();l[n]="Backspace"===i?"":i.toUpperCase();if(!"QWERTYUIOPLKJHGFDSAZXCVBNM1234567890".split("").includes(i.toUpperCase())&&""!=l[n])return 0;document.getElementById("t"+parseInt(n)).value=l[n],s(l);var d=!0;a.map((function(e,t){0!=t&&l[t+1]!=a[t]&&(d=!1)})),o(d)},d=n(662),m=function(e){var t,n,a,i=e.moduleEntry,u=e.confirmation,c=e.setConfirmation,m=e.save,p=e.submit,f=e.isSuccess,v=e.isLoading,h=e.moveAll,b=e.setAction,y=e.moduleName,g=e.noSkuChecking,w=e.singleViewData,E=document.documentElement.clientHeight-300,x="Submit";"save"===u.name&&(x="Save"),Object(o.useEffect)((function(){f&&c({show:!1,name:null})}),[f]),window.onkeydown=function(e){return 27===e.keyCode?c({show:!1,name:null}):null},Object(o.useEffect)((function(){b(u.name)}),[u]);var k=w&&!h?w:i,C=null===k||void 0===k||null===(t=k.jobPost)||void 0===t?void 0:t.areaDestinationName,N=null===k||void 0===k||null===(n=k.jobPost)||void 0===n?void 0:n.warehouseDestinationName,S=null===k||void 0===k||null===(a=k.jobPost)||void 0===a?void 0:a.areaName,O=function(e,t,n){if(null===e||void 0===e?void 0:e.length){var a=[];e.map((function(e){e.poList.map((function(o){o.itemList.map((function(o){var s,r,i,u,c,d,m=o.qty,p=o.grade,f=Object(l.a)(m)?parseInt(m):m?parseFloat(m):0,v=t?e.skuName:"waste"===n?(null===(s=o.wasteType)||void 0===s?void 0:s.label)?null===(r=o.wasteType)||void 0===r?void 0:r.label:e.skuName:null===p||void 0===p?void 0:p.label,h="waste"===n?"Semi Waste"===(null===(i=o.wasteType)||void 0===i?void 0:i.label)||"Waste"===(null===(u=o.wasteType)||void 0===u?void 0:u.label):"Waste"===(null===p||void 0===p?void 0:p.label)||"Semi Waste"===(null===p||void 0===p?void 0:p.label),b=t?e.unitOfMeassures:"gram"===(null===p||void 0===p?void 0:p.uom)?"kg":null===p||void 0===p?void 0:p.uom,y={sku:v,qty:f,uom:b,wqty:0,swqty:0};h&&(y.qty=0,y.sku=e.skuName),("waste"===n?"Waste"===(null===(c=o.wasteType)||void 0===c?void 0:c.label):"Waste"===(null===p||void 0===p?void 0:p.label))&&(y.wqty=f),("waste"===n?"Semi Waste"===(null===(d=o.wasteType)||void 0===d?void 0:d.label):"Semi Waste"===(null===p||void 0===p?void 0:p.label))&&(y.swqty=f);var g,w,E=a.findIndex((function(t){return(null===t||void 0===t?void 0:t.sku)===(h?e.skuName:v)}));("waste"!==n&&(-1===E&&a.push(y),-1!==E&&(h||(a[E].qty+=f),"Semi Waste"===(null===p||void 0===p?void 0:p.label)&&(a[E].swqty+=f),"Waste"===(null===p||void 0===p?void 0:p.label)&&(a[E].wqty+=f))),"waste"===n)&&(-1===E&&a.push(y),-1!==E&&(h||(a[E].qty+=f),"Semi Waste"===(null===(g=o.wasteType)||void 0===g?void 0:g.label)&&(a[E].swqty+=f),"Waste"===(null===(w=o.wasteType)||void 0===w?void 0:w.label)&&(a[E].wqty+=f)))}))}))}));var o=e.length?e[0].skuName:"No SKU",s=a.findIndex((function(e){return e.sku===o}));return a.forEach((function(e){-1!==s&&("Waste"===e.sku&&(a[s].wqty=e.qty),"Semi Waste"===e.sku&&(a[s].swqty=e.qty))})),a}}(null===k||void 0===k?void 0:k.jobPost.list,g,y);return s.a.createElement(r.B,{className:u.show?null:"d-none"},s.a.createElement(r.f,null,s.a.createElement(r.s,{show:u.show,closeOnBackdrop:!1},s.a.createElement(r.v,{className:"px-4 pt-5 border-none"},s.a.createElement(r.w,{className:"text LatoBold"},"Confirmation ",s.a.createElement("span",null,s.a.createElement("i",{className:"em em-pray"}))),s.a.createElement("label",{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&c({show:!1,name:null})},onClick:function(){return c({show:!1,name:null})},className:"sku-item iconU-modalClose"})),s.a.createElement(r.t,{className:"px-4 py-0",style:{minHeight:E}},s.a.createElement("p",{className:"text mb-2"},s.a.createElement("span",null,"Are you sure want to ".concat("Waste"==S?"update":"send"," this Item ")),s.a.createElement("span",{className:" ".concat(C?null:"d-none")}," from"),s.a.createElement("span",{className:"green ".concat(C?null:"d-none")}," ".concat(S," ")),s.a.createElement("span",null,"outbound"==y?"from":"repack"===y?"":"to"," "),s.a.createElement("span",{className:"green ".concat("repack"!==y?null:"d-none")}," ".concat("stockTransfer"===y?N:C||S," "))),s.a.createElement("p",{className:"text"},"Please double check this list, this record will store to database."),s.a.createElement("div",{style:{minHeight:E,maxHeight:E,overflow:"auto",border:"1px solid var(--lineGrey)"}},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",{style:{borderBottom:"1px solid var(--lineGrey)"}},s.a.createElement("th",{style:{color:"var(--emptyTextField)"}},"SKU List"),s.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Weight"),s.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Semi Waste"),s.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Waste"))),s.a.createElement("tbody",null,null===O||void 0===O?void 0:O.map((function(e){return s.a.createElement("tr",{style:{borderBottom:"1px solid var(--lineGrey)"}},s.a.createElement("td",{style:{maxWidth:"160px"}},e.sku),s.a.createElement("td",{className:"text-right py-3",style:{textAlign:"right"}},"".concat(Object(d.z)(null===e||void 0===e?void 0:e.qty))),s.a.createElement("td",{className:"text-right text-nowrap",style:{textAlign:"right"}},s.a.createElement("span",{className:"text-nowrap"},"".concat(Object(d.z)(null===e||void 0===e?void 0:e.swqty)," "))),s.a.createElement("td",{className:"text-right",style:{textAlign:"right"}},"".concat(Object(d.z)(null===e||void 0===e?void 0:e.wqty))))}))))),s.a.createElement("div",{className:"px-0 pb-5 pt-0 justify-content-start border-none"},s.a.createElement(r.d,{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&c({show:!1,name:null})},className:"bg-background sku-item text no-shadow px-5 mt-4 mb-0 mx-0",onClick:function(){return c({show:!1,name:null})}},"Cancel"),s.a.createElement(r.d,{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&(v?null:"save"===u.name?m():p())},className:"".concat(v?"bg-softGreen text":"bg-green text-white"," no-shadow px-5 mt-4 sku-item mb-0 ml-3 mr-0"),onClick:function(){return v?null:"save"===u.name?m():p()}},v?"Processing...":x)," ")))))},p=function(e){for(var t=e.show,n=void 0!==t&&t,u=e.setIsShowModal,l=e.submit,d=e.submitText,m=void 0===d?"Submit":d,p="",f="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",v=f.length,h=[],b=0;b<3;b++){var y=f.charAt(Math.floor(Math.random()*v));p+=y,h.push(y)}Object(i.c)();var g=Object(i.d)((function(e){return e.csvFileName})),w=s.a.useState(h),E=Object(a.a)(w,2),x=E[0],k=(E[1],s.a.useState(p)),C=Object(a.a)(k,2),N=C[0],S=(C[1],s.a.useState(!1)),O=Object(a.a)(S,2),T=O[0],j=O[1],L=s.a.useState("Submit"),U=Object(a.a)(L,2),I=(U[0],U[1],s.a.useState([])),D=Object(a.a)(I,2),B=D[0],F=D[1];return Object(o.useEffect)((function(){!0===n&&(document.getElementById("t1").value="",document.getElementById("t2").value="",document.getElementById("t3").value="")}),[n]),s.a.createElement(r.B,{className:n?null:"d-none"},s.a.createElement(r.f,null,s.a.createElement(r.s,{show:n,onClose:function(){u(!1)},size:"lg",style:{height:"400px"}},s.a.createElement(r.v,{className:"px-5 pt-5 border-none"},s.a.createElement(r.w,{className:"text LatoBold"},"Confirmation")),s.a.createElement(r.t,{className:"px-5 py-0"},s.a.createElement("p",{className:"text mb-2"},"Are you sure want to upload ",s.a.createElement("span",{className:"green"},"Edited")," ",g,"?"),s.a.createElement("p",{className:"text"},"Once uploaded this record will store to databases."),s.a.createElement("p",{className:"text mb-2"},"Please type \u2018",N,"\u2019 on the Box to confirm upload file."),s.a.createElement("div",{className:"captcha-box"},s.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:1,isCaptcha:x,setIsValidated:j,setIsType:F,isType:B})},id:"t1",type:"text",style:{textTransform:"uppercase"},className:"captcha-input",maxLength:"1",placeholder:x[0]}),s.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:2,isCaptcha:x,setIsValidated:j,setIsType:F,isType:B})},id:"t2",type:"text",style:{textTransform:"uppercase"},className:"captcha-input ml-0 mr-0",maxLength:"1",placeholder:x[1]}),s.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:3,isCaptcha:x,setIsValidated:j,setIsType:F,isType:B})},id:"t3",type:"text",style:{textTransform:"uppercase"},className:"captcha-input",maxLength:"1",placeholder:x[2]}))),s.a.createElement(r.u,{className:"px-5 pb-5 pt-0 justify-content-start border-none"},s.a.createElement(r.d,{className:"bg-background text no-shadow px-5 mt-4 mb-0 mx-0",onClick:function(){u(!1)}},"Cancel"),s.a.createElement(r.d,{className:(T?"bg-green":"bg-emptyTextField disabled")+" no-shadow px-5 mt-4 mb-0 ml-3 mr-0",onClick:function(){l(),j(!1)}},m)," "))))}},693:function(e,t,n){"use strict";var a,o="object"===typeof Reflect?Reflect:null,s=o&&"function"===typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};a=o&&"function"===typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!==e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,a){function o(){void 0!==s&&e.removeListener("error",s),n([].slice.call(arguments))}var s;"error"!==t&&(s=function(n){e.removeListener(t,o),a(n)},e.once("error",s)),e.once(t,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function d(e,t,n,a){var o,s,r,i;if(l(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),r=s[t]),void 0===r)r=s[t]=n,++e._eventsCount;else if("function"===typeof r?r=s[t]=a?[n,r]:[r,n]:a?r.unshift(n):r.push(n),(o=c(e))>0&&r.length>o&&!r.warned){r.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=r.length,i=u,console&&console.warn&&console.warn(i)}return e}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=m.bind(a);return o.listener=n,a.wrapFn=o,o}function f(e,t,n){var a=e._events;if(void 0===a)return[];var o=a[t];return void 0===o?[]:"function"===typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,o=this._events;if(void 0!==o)a=a&&void 0===o.error;else if(!a)return!1;if(a){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var i=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw i.context=r,i}var u=o[e];if(void 0===u)return!1;if("function"===typeof u)s(u,this,t);else{var l=u.length,c=h(u,l);for(n=0;n<l;++n)s(c[n],this,t)}return!0},i.prototype.addListener=function(e,t){return d(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return d(this,e,t,!0)},i.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,a,o,s,r;if(l(t),void 0===(a=this._events))return this;if(void 0===(n=a[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){r=n[s].listener,o=s;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(a[e]=n[0]),void 0!==a.removeListener&&this.emit("removeListener",e,r||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,a;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,s=Object.keys(n);for(a=0;a<s.length;++a)"removeListener"!==(o=s[a])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;a>=0;a--)this.removeListener(e,t[a]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},i.prototype.listenerCount=v,i.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},749:function(e,t,n){}}]);
//# sourceMappingURL=31.8c2bd06e.chunk.js.map