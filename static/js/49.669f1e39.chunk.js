(this["webpackJsonp@coreui/coreui-pro-react-admin-template"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template"]||[]).push([[49],{1246:function(e,t,a){"use strict";a.r(t);var n=a(659),s=a(1),o=a.n(s),r=a(56),u=a(20),i=(a(698),a(673)),l=a(675),c=(a(727),a(65)),d=a.n(c),m=a(91),p=a(19),v=a(663),b=a(22),f=a.n(b),h=function(e){var t=e.csvData,a=e.csvField,n=e.isShowErrorOnly,s=e.setIsShowErrorOnly,o=e.setIsHiddenRows,r=e.setCheckingCsv,u=[],i=[];t.map((function(e,t){var n=!0,s=t+1;a.map((function(t,a){var s=t.dataField+"Status";!1===e[s]&&(n=!1)})),!1===n?u.includes(s)||u.push(s):i.includes(s)||i.push(s)}));var l=[];if(!0===n){if((l=i.filter((function(e){return!u.includes(e)}))).length==t.length)return 0}else l=[];o(l),s(!n),r(!0)},y=function(e){var t=(new Date).getTime(),a=new Date(t).getMilliseconds(),n=[],s=[],o=e[0].warehouseUuid||"",r=e[0].warehouseDestinationUuid||"";return e.map((function(e,t){n.includes(e.areaSource)||(s.push({id:t,warehouseSource:o,warehouseDestination:r,areaSource:e.areaSource,areaDestination:e.areaSource,list:[],createdAt:a}),n.push(e.areaSource))})),s},w=function(e){var t=[],a=e[0].warehouseUuid||"",n=e[0].warehouseDestinationUuid||"";return e.map((function(e,s){var o=!1;t.forEach((function(t,a){t&&t.skuUuid==e.skuUuid&&t.warehouseSource==e.warehouseSource&&t.warehouseDestination==e.warehouseDestinationUuid&&t.areaSource==e.areaSource&&(o=!0)})),o||t.push({warehouseSource:a,warehouseDestination:n,areaSource:e.areaSource,skuUuid:e.skuUuid,skuNumber:e.skuNumber,unitOfMeassures:e.uom,photo:e.photos,poList:[]})})),t},S=function(e,t){var a=[],n=e[0].warehouseUuid||"",s=e[0].warehouseDestinationUuid||"";return e.map((function(e,t){var o=!1,r="";console.log(e);var u=function(e){if(e)return"SEMI WASTE"==e.toUpperCase()?"semi_waste":"WASTE"==e.toUpperCase()?"waste":e}(e.newGradeUuid);u||(u=e.skuUuid),a.forEach((function(t,a){t&&t.areaSource==e.areaSource&&t.warehouseSource==e.warehouseSource&&t.warehouseDestination==e.warehouseDestination&&t.skuUuid==e.skuUuid&&t.wmsPoSkuCode==e.wmsPoSkuCode&&t.ripenessLevel==e.ripenessLevel&&t.expiryDateCol==e.expiryDateCol&&(o=!0,r=a)})),o||(a.push({skuUuid:e.skuUuid||"",areaSource:e.areaSource||"",warehouseSource:n||"",warehouseDestination:s||"",expiryDateText:e.expiryDateCol||"",expiryDate:f()(e.expiryDateCol,"DD-MM-YYYY").toDate().getTime()||"",inboundDate:e.inboundDate||"",supplierId:e.supplierUuid||"",supplierName:e.supplierName||"",wmsPoSkuCode:e.wmsPoSkuCode||"",codeGrade:e.skuUuid||"",ripenessLevel:e.ripenessLevel||0,skuNumber:e.skuNumber||"",areaName:e.areaName||"",warehouseCode:e.warehouseCode||"",itemList:[]}),r=a.length-1),a[r].itemList.push({qty:e.qty||0,areaSource:e.areaSource,skuNumber:e.skuNumber,ripeness:{label:e.ripenessLevel||"",value:e.ripenessLevel||0},expiryDate:f()(e.expiryDateCol,"DD-MM-YYYY").toDate().getTime()||"",expiryDateText:e.expiryDateCol,grade:{label:e.newGrade,value:u||e.skuUuid},codeOutbound:{label:e.outboundTypeCode||"",value:e.outboundTypeCode||""},note:e.reason||"",areaName:e.areaName||"",pack:e.inputPack||0,unitOfMeassures:e.uom||"",warehouseCodeSource:e.warehouse||"",warehouseCodeDestination:e.warehouseDestination||""})})),a},g=function(e,t,a){return t.map((function(e,n){a.map((function(a,s){a&&a.areaSource==e.areaSource&&a.warehouseSource==e.warehouseSource&&a.warehouseDestination==e.warehouseDestination&&a.skuUuid==e.skuUuid&&t[n].poList.push(a)}))})),e.map((function(n,s){t.map((function(t,o){a&&n.areaSource==t.areaSource&&n.warehouseSource==t.warehouseSource&&n.warehouseDestination==t.warehouseDestination&&e[s].list.push(t)}))})),e},N=function(e){var t=[],a=1;return e.list.map((function(e,n){e.poList.map((function(e,n){e.wmsPoSkuCode,e.ripenessLevel;e.itemList.map((function(n,s){var o,r="Failed";n.isSuccess&&(r="Success"),t.push({id:a,uploadStatus:r||"",uploadStatusReason:n.message,wmsPoSkuCode:e.wmsPoSkuCode||"",skuNumber:n.skuNumber||"",ripenessLevel:(null===(o=n.ripeness)||void 0===o?void 0:o.label)||"",qty:n.qty||0,reason:n.note||"",grade:e.codeGrade||"",areaName:n.areaName||"",warehouse:n.warehouseCodeSource||"",areaNameDestination:n.areaNameDestination||"",warehouseDestination:n.warehouseCodeDestination||"",expiryDateCol:n.expiryDateText||""}),a++}))}))})),t},k=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,s,o,r,u,i,l,c,m,b,f,h,k,E,x,C,D;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.csvData,n=t.dispatch,s=t.csvField,o=t.setIsSubmitText,r=t.setSubmitStatus,u=t.setIsShowModal,i=t.setMsg2,console.log(a),o("Loading..."),e.next=5,y(a);case 5:return l=e.sent,c=a[0].warehouseName||"Warehouse",m=a[0].areaName||"Area",b=a[0].warehouseDestinationName||"Warehouse Destination",e.next=11,w(a);case 11:return f=e.sent,e.next=14,S(a);case 14:return h=e.sent,e.next=17,g(l,f,h);case 17:return k=e.sent,e.next=20,Object(v.s)({dataCsv:k,setSubmitStatus:r,dispatch:n,transaction:"stock-transfer"});case 20:if(E=e.sent,u(!1),o("Submit"),1!=(null===E||void 0===E?void 0:E.isSuccess)){e.next=28;break}i([{className:"h5 font-weight-bold",message:"PO Number: ".concat(null===E||void 0===E||null===(x=E.data)||void 0===x?void 0:x.poNumber)},{className:"h5 green mt-4",message:"".concat(c," (").concat(m,") to ").concat(b," - ").concat((null===f||void 0===f?void 0:f.length)||0," SKU(s).")}]),r("success"),e.next=45;break;case 28:if(0!=(null===E||void 0===E?void 0:E.isSuccess)||!(null===E||void 0===E?void 0:E.jobPost)){e.next=43;break}return i([{className:"h5 font-weight-bold",message:"Failed to proceed because we can't match some of data."},{className:"h5 green mt-3",message:"Try to fix the error part and try again."}]),r("noData"),e.next=33,N((null===E||void 0===E?void 0:E.jobPost)||[]);case 33:return C=e.sent,e.next=36,n({type:p.l,csvDataResult:C});case 36:return(D=[]).push({dataField:"uploadStatus",text:"Upload Status",type:"string",sort:!0}),s.map((function(e,t){D.push(e)})),e.next=41,n({type:p.l,csvFieldResult:D});case 41:e.next=45;break;case 43:i("400 - Failed to proceed."),r("API");case 45:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=a(661),x=(a(667),a(116),function(e){var t=e.isSaved,a=(e.setIsSaved,e.confirmation,e.submit,e.statusDisplay),n=void 0!==a&&a,s=e.title,r=void 0===s?"":s,u=e.cancelButtonTitle,i=void 0===u?"Cancel":u,l=e.actionButtonTitle,c=void 0===l?"Submit":l,d=e.cancelButtonClass,m=void 0===d?"bg-background":d,p=e.actionButtonClass,v=void 0===p?"bg-background":p,b=e.actionButtonEvent,f=void 0===b?null:b,h=e.msg1,y=void 0===h?null:h,w=e.msg2,S=void 0===w?null:w,g=(e.setShow,e.onCloseFunction),N={success:{headerIcon:"em em-tada",textColor:"green",button:"bg-green"},failed:{headerIcon:"em em-anguished",textColor:"red",button:"bg-red"}},k="success"==t?N.success:N.failed,x=document.getElementById("btn_is_saved");return x&&x.focus(),o.a.createElement(E.B,{className:n?null:"d-none"},o.a.createElement(E.f,null,o.a.createElement(E.s,{show:n,onClose:function(){g()},size:"lg",style:{minHeight:"280px"},bodyOpenClassName:"p-3",closeOnBackdrop:!1},o.a.createElement("div",{className:"d-flex flex-row-reverse"},o.a.createElement("i",{className:"pr-3 pt-3 iconU-modalClose",onClick:function(){g()}})),o.a.createElement(E.t,{className:"px-5 mt-3 py-0"},o.a.createElement("label",{className:"".concat(k.textColor," LatoBold mr-2 h5 mb-3")},r)," ",o.a.createElement("span",null,o.a.createElement("i",{className:"".concat(k.headerIcon)})),o.a.createElement("div",{className:"mr-1 h5 mb-3"},"".concat(y)),o.a.createElement("div",{style:{backgroundColor:"#F5F7FA"},className:"w-100 border rounded px-3 pt-4 pb-3 mb-4"},Array.isArray(S)?S.map((function(e,t){return o.a.createElement("div",{className:e.className}," ",e.message," ")})):o.a.createElement("div",{className:"h5 font-weight-bold"},S))),o.a.createElement(E.u,{className:"px-5 pb-5 pt-0 justify-content-start border-none"},i?o.a.createElement(E.d,{className:"".concat(m," no-shadow px-5 mt-4 mb-0 mx-0"),onClick:function(){g()}},i):null,c?o.a.createElement(E.d,{className:"".concat(v," text no-shadow px-5 mt-4 mb-0 ml-3 mr-0"),onClick:function(){f()}},c):null," "))))});a(666),t.default=Object(u.i)((function(e){var t=Object(r.c)(),a=Object(r.d)((function(e){return e.csvFileName})),u=Object(r.d)((function(e){return e.csvData})),c=Object(r.d)((function(e){return e.csvField})),d=Object(r.d)((function(e){return e.warehouseAreaCsv})),m=Object(r.d)((function(e){return e.status})),v=Object(r.d)((function(e){return e.warehouseData})),b=o.a.useState(!1),f=Object(n.a)(b,2),y=f[0],w=f[1],S=o.a.useState(null),g=Object(n.a)(S,2),N=g[0],E=g[1],C=o.a.useState(!0),D=Object(n.a)(C,2),O=D[0],U=D[1],T=o.a.useState(!1),I=Object(n.a)(T,2),j=I[0],F=I[1],L=o.a.useState(!1),B=Object(n.a)(L,2),A=B[0],R=B[1],P=o.a.useState(!0),W=Object(n.a)(P,2),M=W[0],q=W[1],G=o.a.useState(!1),K=Object(n.a)(G,2),V=K[0],H=K[1],Y=o.a.useState(null),J=Object(n.a)(Y,2),_=J[0],z=J[1],Q=o.a.useState(null),X=Object(n.a)(Q,2),Z=X[0],$=X[1],ee=o.a.useState(null),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],se=o.a.useState(null),oe=Object(n.a)(se,2),re=oe[0],ue=oe[1],ie=o.a.useState(null),le=Object(n.a)(ie,2),ce=le[0],de=le[1],me=o.a.useState("Submit"),pe=Object(n.a)(me,2),ve=pe[0],be=pe[1],fe=o.a.useState(null),he=Object(n.a)(fe,2),ye=he[0],we=he[1],Se=o.a.useState(null),ge=Object(n.a)(Se,2),Ne=ge[0],ke=ge[1],Ee=o.a.useState(null),xe=Object(n.a)(Ee,2),Ce=xe[0],De=xe[1];if(Object(s.useEffect)((function(){!function(e){var t=e.csvData,a=e.csvField,n=e.setIsValidate,s=e.setCheckingCsv;if(void 0===t)return 0;var o=!0;t.map((function(e,t){a.map((function(t,a){var n=e[t.dataField+"Status"];"outboundType"==t.dataField&&("LAINNYA"==e[t.dataField].toUpperCase()&&""==e.outboundReason&&(n=!1));!1===n&&(o=!1)}))})),n(!1!==o),s(!1)}({csvData:u,csvField:c,setIsValidate:F,setCheckingCsv:q})}),[M]),Object(s.useEffect)((function(){"success"==V?(z("Success!"),$(a+" upload successfull."),ue("Cancel"),de("Select Again"),ke("bg-green background"),De("green"),R(!0)):"API"==V?(z("Failed!"),$(a+" failed to upload."),ue("Cancel"),de("Retry"),ke("bg-red background"),De("red"),R(!0)):"noData"==V&&(z("Failed!"),$(a+" failed to upload."),ue("Check"),we("bg-red background"),ke("d-none"),De("red"),R(!0))}),[V]),void 0===u||null===u)return e.history.push("/inventory-entry/stock-transfer/CSV-upload"),0;var Oe=function(e){!function(e){var t=e.param,a=e.dispatch,n=e.setCheckingCsv;a({type:p.l,csvData:t}),n(!0)}({param:e,dispatch:t,setCheckingCsv:q}),h({csvData:u,csvField:c,isShowErrorOnly:!1,setIsShowErrorOnly:U,setIsHiddenRows:E,setCheckingCsv:q})};return o.a.createElement("div",{className:"w-100 d-flex flex-column stock-take-summary"},o.a.createElement(i.a,{globalData:u,columns:c,tableClass:"reviewTable",hiddenRows:N,warehouseArea:d,setCsvDataTmp:function(e){return Oe(e)},setIsValidate:function(e){return F(e)},dispatch:t,setCheckingCsv:q,warehousesData:v}),o.a.createElement("div",{className:"row pt-3"},o.a.createElement("div",{className:"col-4"},o.a.createElement("button",{type:"button",className:"btn px-3 mr-3 text no-shadow",style:{backgroundColor:"#fff"},onClick:function(){return h({csvData:u,csvField:c,isShowErrorOnly:O,setIsShowErrorOnly:U,setIsHiddenRows:E,setCheckingCsv:q})}},"Show ",O?"Errors Only":"All"),o.a.createElement("button",{type:"button",className:"btn px-3 mr-3  text no-shadow",style:{backgroundColor:"#fff"},onClick:function(){return function(e){var t=e.csvData,a=e.csvField,n=e.dispatch,s=e.setCheckingCsv,o=[];t.map((function(e,t){var n=!0;a.map((function(t,a){var s=t.dataField+"Status";!1===e[s]&&(n=!1)})),!0===n&&o.push(e)})),n({type:p.l,csvData:o}),s(!0)}({csvData:u,csvField:c,dispatch:t,setCheckingCsv:q})}},"Delete Errors Field")),o.a.createElement("div",{className:"col-4",style:{lineHeight:"40px"}},"Review your imported file: ",a," (",u.length||0," Lines)"),o.a.createElement("div",{className:"col-4"},o.a.createElement("button",{type:"button",className:"btn px-5 bg-red text-white no-shadow float-right",onClick:function(){return e.history.goBack()}},"Discard"),o.a.createElement("button",{type:"button",class:"btn px-5 mr-3 text-white no-shadow float-right "+(!0===j&&(null===u||void 0===u?void 0:u.length)>0?"bg-green":"bg-primaryGrey disabled"),onClick:function(){return w(!y)}},"Submit"))),o.a.createElement(x,{isSaved:V,status:m,onCloseFunction:function(){R(!1),H(!1),"success"==V?e.history.push("/inventory-entry/stock-transfer"):"noData"==V&&e.history.push("/inventory-entry/stock-transfer/CSV-upload/result")},statusDisplay:A,title:_,cancelButtonTitle:re,actionButtonTitle:ce,colorText:Ce,refreshOnCancel:!1,msg1:Z,msg2:ae,cancelButtonClass:ye,actionButtonClass:Ne+" ml-0",actionButtonEvent:function(){("success"==V||"API"==V)&&e.history.push("/inventory-entry/stock-transfer/CSV-upload")}}),o.a.createElement(l.a,{submit:function(){return k({dispatch:t,csvData:u,csvField:c,setIsShowModal:w,setIsSubmitText:be,setSubmitStatus:H,setMsg1:$,setMsg2:ne})},submitText:ve,show:y,setIsShowModal:w}))}))},671:function(e,t,a){},673:function(e,t,a){"use strict";a.d(t,"b",(function(){return S})),a.d(t,"a",(function(){return w}));var n=a(65),s=a.n(n),o=a(91),r=a(169),u=a(170),i=a(172),l=a(171),c=a(1),d=a.n(c),m=a(661),p=a(694),v=a.n(p),b=(a(674),a(696),a(47)),f=a.n(b),h=a(697),y=a.n(h),w=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).changeWarehouseUuid=function(e,t,a,r,u,i,l){var c=n.props,d=c.setCsvDataTmp,m=c.globalData,p=m.findIndex((function(e){return e.id==r})),v=u.indexOf(e);m[p][t]=i[v],m[p][a]=l[v],setTimeout(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(m);case 1:case"end":return e.stop()}}),e)}))),400)},n.validatePOSKU=function(){var e=Object(o.a)(s.a.mark((function e(t,a,r){var u,i,l,c,d,m,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=n.props,i=u.setCsvDataTmp,l=u.globalData,c=u.setIsValidate,d=l,e.prev=2,c(!1),"/stocktake/rowValidationUpload",m=null,p=null,setTimeout(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=document.getElementById("".concat(r)),p=document.getElementById("".concat(r,"span")),null!==m&&void 0!==m){e.next=4;break}return e.abrupt("return",0);case 4:return p.innerHTML="Validating",e.next=7,f()({method:"post",url:"/stocktake/rowValidationUpload",data:{data:[t]}}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data,s=d.findIndex((function(e){return e.id==a}));n[0]&&!0===n[0].isExist?(d[s].wmsPoSkuCode=n[0].wmsPoSkuCode,d[s].wmsPoSkuCodeStatus=!0,d[s].wmsPoSkuCodeReason="PO SKU Code Not Found",d[s].expiryDate=n[0].expiryDate,d[s].inboundDate=n[0].inboundDate,d[s].supplierName=n[0].supplierName,d[s].supplierUuid=n[0].supplierUuid,d[s].uom=n[0].uom,d[s].photos=n[0].photos,m.classList.remove("red"),m.classList.add("hiddenTooltip")):(d[s].wmsPoSkuCodeStatus=!1,d[s].wmsPoSkuCodeReason="PO SKU Code Not Found",d[s].expiryDate="",d[s].inboundDate="",d[s].supplierName="",d[s].supplierUuid="",m.classList.add("red"),m.classList.remove("hiddenTooltip"),p.innerHTML="PO SKU Code Not Found"),i(d)}));case 7:case"end":return e.stop()}}),e)}))),400),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),n.validateOutbountReason=function(e,t,a){var s=n.props.globalData,o=s.findIndex((function(e){return e.id==t})),r=s[o];""==e&&"LAINNYA"==r.outboundType.toUpperCase()&&setTimeout((function(){var e=document.getElementById("row".concat(t,"-outboundReason"));e.classList.add("red","tooltip-custom"),e.innerHTML="Outbound Reason Can't be empty<span class=\"tooltiptext\">Outbound Reason Can't be empty if Outbound type = 'Lainnya'</span>"}),300)},n.validateOutbountType=function(e,t,a){var s=n.props,o=s.globalData,r=s.setIsValidate,u=o;if(r(!1),"LAINNYA"!==e.toUpperCase())return r(!0),0;var i=u.findIndex((function(e){return e.id==t}));""==u[i].outboundReason&&setTimeout((function(){var e=document.getElementById("row".concat(t,"-outboundReason"));e.classList.add("red","tooltip-custom"),e.innerHTML="Outbound Reason Can't be empty<span class=\"tooltiptext\">Outbound Reason Can't be empty if Outbound type = 'Lainnya'</span>"}),300)},n.validateSKUNumber=function(){var e=Object(o.a)(s.a.mark((function e(t,a,r,u){var i,l,c,d,m,p,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.props,l=i.globalData,c=i.setCsvDataTmp,d=i.setIsValidate,m=l,e.prev=2,d(!1),"/oss/skuByNumbers",p=null,v=null,setTimeout(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=document.getElementById("".concat(r)),v=document.getElementById("".concat(r,"span")),null!==p&&void 0!==p){e.next=4;break}return e.abrupt("return",0);case 4:return v.innerHTML="Validating",e.next=7,f()({method:"post",url:"/oss/skuByNumbers",data:{skuList:[t]}}).then((function(e){var n,s=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data,o=e.data.isSuccess,r=m.findIndex((function(e){return e.id==a}));!0===o&&s.length>0?(m[r][u]=s[0].skuNumber,m[r][u+"Reason"]=s[0].skuDescription,m[r][u+"Status"]=!0,m[r][u+"Uuid"]=s[0].id,p.classList.remove("red"),p.classList.add("hiddenTooltip"),"skuNumber"==u&&(m[r].skuUuid=s[0].id,m[r].photo=s[0].imageMd),"newGrade"==u&&(m[r].newGradeUom=s[0].uom)):(m[r][u]=t,m[r][u+"Reason"]="SKU Number Not Found",m[r][u+"Status"]=!1,m[r][u+"Uuid"]=null,p.classList.add("red"),p.classList.remove("hiddenTooltip"),v.innerHTML="SKU Number Not Found","skuNumber"==u&&(m[r].skuUuid="",m[r].photo=""),"newGrade"==u&&(m[r].newGradeUom=null)),c(m)}));case 7:case"end":return e.stop()}}),e)}))),400),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,n,s){return e.apply(this,arguments)}}(),n.state={validateStatus:!1,validateResult:"Please Wait...",rowCount:0,keyy:0},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.columns,n=t.hiddenRows,s=t.tableClass,o=t.warehouseArea,r=t.outboundType,u=t.setCheckingCsv,i=t.globalData,l=t.editable,c=void 0===l||l,p=t.warehousesData,b=void 0===p?[]:p,f=this.state,h=(f.validateStatus,f.keyy),w=[],S=[],g=[];if(b){var N;null===b||void 0===b||null===(N=b.data)||void 0===N||N.map((function(e){w.push(e.code),S.push(e.id),g.push(e.name)}))}var k=o.map((function(e){return e.label.toUpperCase()}))||[],E=o.map((function(e){return e.value}))||[],x=r?r.map((function(e){return e.label.toUpperCase()})):[],C=r?r.map((function(e){return e.value})):[],D=a.map((function(t,a){return t.validator=function(a,n,s,o){var r=t.dataField,i=r+"Status",l=r+"Reason",c=!0,d=null,m="row"+n.id+"-"+r;"wmsPoSkuCode"==r&&(e.validatePOSKU(a,n.id,m,r),c=!0),"skuNumber"==r&&(e.validateSKUNumber(a,n.id,m,r),c=!0);var p=["WASTE","SEMI WASTE"];if("newGrade"==r&&"waste"==e.props.transaction?p.includes(a.toUpperCase())?(n.newGradeUuid=a,n.newGradeUom=null):(d="Waste Type not found",f=!1,c=!1):"newGrade"==r&&(p.includes(a.toUpperCase())?(n.newGradeUuid=a,n.newGradeUom=null):parseInt(a)?(c=!0,e.validateSKUNumber(a,n.id,m,r)):""==a?(n.newGradeUuid=null,n.newGradeUom=null,c=!0):(d="Grade Undefined",f=!1,c=!1)),"outboundType"==r&&C.length>0)if(x.includes(a.toUpperCase())){var v=x.indexOf(a.toUpperCase());n.outboundTypeCode=C[v],c=!0,e.validateOutbountType(a,n.id,m)}else c=!1,d="Outbound Type Not Found";if("outboundReason"==r&&e.validateOutbountReason(a,n.id,m),"warehouse"==r&&(w.includes(a)?e.changeWarehouseUuid(a,"warehouseUuid","warehouseName",n.id,w,S,g):(c=!1,d="Warehouse Not Found")),"warehouseDestination"==r&&(w.includes(a)?e.changeWarehouseUuid(a,"warehouseDestinationUuid","warehouseDestinationName",n.id,w,S,g):(c=!1,d="Warehouse Not Found")),"areaName"==r||"areaNameDestination"==r)if(k.includes(a.toUpperCase())){var b=k.indexOf(a.toUpperCase());"areaNameDestination"==r?n.areaDestination=E[b]:n.areaSource=E[b],c=!0}else c=!1,d="Warehouse Area Not Found";"newPack"==r&&(!isNaN(a)?c=!0:(c=!1,d="Pack Should be a number"));var f=null;!1===(f="number"!=t.type||!isNaN(a))&&(d="".concat(t.text," Should be a ").concat(t.type));if(["grade","outboundReason","ripenessLevel","newRipeness","reason","expiryDate"].includes(r)&&""===a)d="",f=!0,c=!0;else if("grade"==r){["WASTE","SEMI WASTE"].includes(a.toUpperCase())||(d="Waste Type Not Found",f=!1,c=!1)}if("ripenessLevel"==r||"newRipeness"==r){[0,1,2,3].includes(parseInt(a))||""==a?(f=!0,c=!0,d="",""==a&&(a="")):(f=!1,c=!1,d="Undefined Ripeness Level")}if("date_indo"==t.type){a.match(/(0[1-9]|[12][0-9]|3[01])[-.](0[1-9]|1[012])[-.](19|20)\d\d/)||""==a?(f=!0,c=!0):(d="Date format must be 'dd-mm-yyyy'",f=!1,c=!1)}if(n[l]=d,c&&f){["wmsPoSkuCode","skuNumber"].includes(r)||(n[i]=!0,u())}return{valid:!(!c||!f),message:d}},t.formatter=function(e,a,n){var s=t.dataField,o=s+"Status",r=s+"Reason",u="row"+a.id+"-"+s,i=a[r];return!1===a[o]?(!1,!1,d.a.createElement("div",{id:u,className:"tooltip-custom red"},e,d.a.createElement("span",{id:u+"span",className:"tooltiptext"},i))):d.a.createElement("div",{id:u,className:"tooltip-custom hiddenTooltip"},e,d.a.createElement("span",{id:u+"span",className:"tooltiptext"},i))},t})),O={sortFunc:this.sortFunc,sortCaret:function(e,t){return e?"asc"===e?d.a.createElement("i",{className:"iconU-tableSortingTop ml-2"}):"desc"===e?d.a.createElement("i",{className:"iconU-tableSortingBottom ml-2"}):null:d.a.createElement("i",{className:"iconU-tableSortingNull ml-2"})}};return console.clear(),console.log(i),d.a.createElement(m.e,{className:"table-responsive"},d.a.createElement(v.a,{keyField:"id",data:i,columns:D,sort:O,classes:s||null,cellEdit:!0===c?y()({mode:"click",blurToSave:!0,nonEditableRows:function(){return e.props.dataDoubleRow||[]}}):null,bordered:!1,hiddenRows:n,key:h}))}}]),a}(d.a.Component),S=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.columns,a=e.tableClass,n=e.data,s=t.map((function(e,t){return e.formatter=function(t,a,n){var s=e.dataField;return"uploadStatus"==s&&"Failed"===a.uploadStatus?d.a.createElement("div",{className:"tooltip-custom red"},t,d.a.createElement("span",{className:"tooltiptext"},a.uploadStatusReason)):"uploadStatus"==s&&"Success"===a.uploadStatus?d.a.createElement("div",{className:"green"},t,d.a.createElement("span",null)):d.a.createElement("div",null,t,d.a.createElement("span",null))},e})),o={sortFunc:this.sortFunc,sortCaret:function(e,t){return e?"asc"===e?d.a.createElement("i",{className:"iconU-tableSortingTop ml-2"}):"desc"===e?d.a.createElement("i",{className:"iconU-tableSortingBottom ml-2"}):null:d.a.createElement("i",{className:"iconU-tableSortingNull ml-2"})}};return d.a.createElement(m.e,{className:"table-responsive"},d.a.createElement(v.a,{keyField:"id",data:n,columns:s,sort:o,classes:a||null,bordered:!1}))}}]),a}(d.a.Component)},674:function(e,t,a){},675:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return p}));var n=a(659),s=a(1),o=a.n(s),r=a(661),u=(a(671),a(56)),i=a(664),l=a(705),c=function(e){var t=e.e,a=e.state,n=e.isCaptcha,s=e.setIsValidated,o=e.setIsType,r=e.isType,u=t.key,l=Object(i.a)(r);if(["ArrowUp","ArrowDown","Tab"].includes(u))return 0;if("Backspace"===u){var c=Object(i.a)(r);""==c[a]&&1!==a&&(document.getElementById("t"+(parseInt(a)-1)).focus(),document.getElementById("t"+(parseInt(a)-1)).value="",c[a-1]="",l[a-1]=""),console.log(c)}else if("ArrowLeft"===u){if(1!==a)return document.getElementById("t"+(parseInt(a)-1)).focus(),document.getElementById("t"+(parseInt(a)-1)).setSelectionRange(-1,-1),0}else if("ArrowRight"===u){if(3!==a)return document.getElementById("t"+(parseInt(a)+1)).focus(),document.getElementById("t"+(parseInt(a)+1)).setSelectionRange(-1,-1),0}else 3!==a&&document.getElementById("t"+(parseInt(a)+1)).focus();l[a]="Backspace"===u?"":u.toUpperCase();if(!"QWERTYUIOPLKJHGFDSAZXCVBNM1234567890".split("").includes(u.toUpperCase())&&""!=l[a])return 0;document.getElementById("t"+parseInt(a)).value=l[a],o(l);var d=!0;n.map((function(e,t){0!=t&&l[t+1]!=n[t]&&(d=!1)})),s(d)},d=a(662),m=function(e){var t,a,n,u=e.moduleEntry,i=e.confirmation,c=e.setConfirmation,m=e.save,p=e.submit,v=e.isSuccess,b=e.isLoading,f=e.moveAll,h=e.setAction,y=e.moduleName,w=e.noSkuChecking,S=e.singleViewData,g=document.documentElement.clientHeight-300,N="Submit";"save"===i.name&&(N="Save"),Object(s.useEffect)((function(){v&&c({show:!1,name:null})}),[v]),window.onkeydown=function(e){return 27===e.keyCode?c({show:!1,name:null}):null},Object(s.useEffect)((function(){h(i.name)}),[i]);var k=S&&!f?S:u,E=null===k||void 0===k||null===(t=k.jobPost)||void 0===t?void 0:t.areaDestinationName,x=null===k||void 0===k||null===(a=k.jobPost)||void 0===a?void 0:a.warehouseDestinationName,C=null===k||void 0===k||null===(n=k.jobPost)||void 0===n?void 0:n.areaName,D=function(e,t,a){if(null===e||void 0===e?void 0:e.length){var n=[];e.map((function(e){e.poList.map((function(s){s.itemList.map((function(s){var o,r,u,i,c,d,m=s.qty,p=s.grade,v=Object(l.a)(m)?parseInt(m):m?parseFloat(m):0,b=t?e.skuName:"waste"===a?(null===(o=s.wasteType)||void 0===o?void 0:o.label)?null===(r=s.wasteType)||void 0===r?void 0:r.label:e.skuName:null===p||void 0===p?void 0:p.label,f="waste"===a?"Semi Waste"===(null===(u=s.wasteType)||void 0===u?void 0:u.label)||"Waste"===(null===(i=s.wasteType)||void 0===i?void 0:i.label):"Waste"===(null===p||void 0===p?void 0:p.label)||"Semi Waste"===(null===p||void 0===p?void 0:p.label),h=t?e.unitOfMeassures:"gram"===(null===p||void 0===p?void 0:p.uom)?"kg":null===p||void 0===p?void 0:p.uom,y={sku:b,qty:v,uom:h,wqty:0,swqty:0};f&&(y.qty=0,y.sku=e.skuName),("waste"===a?"Waste"===(null===(c=s.wasteType)||void 0===c?void 0:c.label):"Waste"===(null===p||void 0===p?void 0:p.label))&&(y.wqty=v),("waste"===a?"Semi Waste"===(null===(d=s.wasteType)||void 0===d?void 0:d.label):"Semi Waste"===(null===p||void 0===p?void 0:p.label))&&(y.swqty=v);var w,S,g=n.findIndex((function(t){return(null===t||void 0===t?void 0:t.sku)===(f?e.skuName:b)}));("waste"!==a&&(-1===g&&n.push(y),-1!==g&&(f||(n[g].qty+=v),"Semi Waste"===(null===p||void 0===p?void 0:p.label)&&(n[g].swqty+=v),"Waste"===(null===p||void 0===p?void 0:p.label)&&(n[g].wqty+=v))),"waste"===a)&&(-1===g&&n.push(y),-1!==g&&(f||(n[g].qty+=v),"Semi Waste"===(null===(w=s.wasteType)||void 0===w?void 0:w.label)&&(n[g].swqty+=v),"Waste"===(null===(S=s.wasteType)||void 0===S?void 0:S.label)&&(n[g].wqty+=v)))}))}))}));var s=e.length?e[0].skuName:"No SKU",o=n.findIndex((function(e){return e.sku===s}));return n.forEach((function(e){-1!==o&&("Waste"===e.sku&&(n[o].wqty=e.qty),"Semi Waste"===e.sku&&(n[o].swqty=e.qty))})),n}}(null===k||void 0===k?void 0:k.jobPost.list,w,y);return o.a.createElement(r.B,{className:i.show?null:"d-none"},o.a.createElement(r.f,null,o.a.createElement(r.s,{show:i.show,closeOnBackdrop:!1},o.a.createElement(r.v,{className:"px-4 pt-5 border-none"},o.a.createElement(r.w,{className:"text LatoBold"},"Confirmation ",o.a.createElement("span",null,o.a.createElement("i",{className:"em em-pray"}))),o.a.createElement("label",{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&c({show:!1,name:null})},onClick:function(){return c({show:!1,name:null})},className:"sku-item iconU-modalClose"})),o.a.createElement(r.t,{className:"px-4 py-0",style:{minHeight:g}},o.a.createElement("p",{className:"text mb-2"},o.a.createElement("span",null,"Are you sure want to ".concat("Waste"==C?"update":"send"," this Item ")),o.a.createElement("span",{className:" ".concat(E?null:"d-none")}," from"),o.a.createElement("span",{className:"green ".concat(E?null:"d-none")}," ".concat(C," ")),o.a.createElement("span",null,"outbound"==y?"from":"repack"===y?"":"to"," "),o.a.createElement("span",{className:"green ".concat("repack"!==y?null:"d-none")}," ".concat("stockTransfer"===y?x:E||C," "))),o.a.createElement("p",{className:"text"},"Please double check this list, this record will store to database."),o.a.createElement("div",{style:{minHeight:g,maxHeight:g,overflow:"auto",border:"1px solid var(--lineGrey)"}},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",{style:{borderBottom:"1px solid var(--lineGrey)"}},o.a.createElement("th",{style:{color:"var(--emptyTextField)"}},"SKU List"),o.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Weight"),o.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Semi Waste"),o.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Waste"))),o.a.createElement("tbody",null,null===D||void 0===D?void 0:D.map((function(e){return o.a.createElement("tr",{style:{borderBottom:"1px solid var(--lineGrey)"}},o.a.createElement("td",{style:{maxWidth:"160px"}},e.sku),o.a.createElement("td",{className:"text-right py-3",style:{textAlign:"right"}},"".concat(Object(d.y)(null===e||void 0===e?void 0:e.qty))),o.a.createElement("td",{className:"text-right text-nowrap",style:{textAlign:"right"}},o.a.createElement("span",{className:"text-nowrap"},"".concat(Object(d.y)(null===e||void 0===e?void 0:e.swqty)," "))),o.a.createElement("td",{className:"text-right",style:{textAlign:"right"}},"".concat(Object(d.y)(null===e||void 0===e?void 0:e.wqty))))}))))),o.a.createElement("div",{className:"px-0 pb-5 pt-0 justify-content-start border-none"},o.a.createElement(r.d,{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&c({show:!1,name:null})},className:"bg-background sku-item text no-shadow px-5 mt-4 mb-0 mx-0",onClick:function(){return c({show:!1,name:null})}},"Cancel"),o.a.createElement(r.d,{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&(b?null:"save"===i.name?m():p())},className:"".concat(b?"bg-softGreen text":"bg-green text-white"," no-shadow px-5 mt-4 sku-item mb-0 ml-3 mr-0"),onClick:function(){return b?null:"save"===i.name?m():p()}},b?"Processing...":N)," ")))))},p=function(e){for(var t=e.show,a=void 0!==t&&t,i=e.setIsShowModal,l=e.submit,d=e.submitText,m=void 0===d?"Submit":d,p="",v="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",b=v.length,f=[],h=0;h<3;h++){var y=v.charAt(Math.floor(Math.random()*b));p+=y,f.push(y)}Object(u.c)();var w=Object(u.d)((function(e){return e.csvFileName})),S=o.a.useState(f),g=Object(n.a)(S,2),N=g[0],k=(g[1],o.a.useState(p)),E=Object(n.a)(k,2),x=E[0],C=(E[1],o.a.useState(!1)),D=Object(n.a)(C,2),O=D[0],U=D[1],T=o.a.useState("Submit"),I=Object(n.a)(T,2),j=(I[0],I[1],o.a.useState([])),F=Object(n.a)(j,2),L=F[0],B=F[1];return Object(s.useEffect)((function(){!0===a&&(document.getElementById("t1").value="",document.getElementById("t2").value="",document.getElementById("t3").value="")}),[a]),o.a.createElement(r.B,{className:a?null:"d-none"},o.a.createElement(r.f,null,o.a.createElement(r.s,{show:a,onClose:function(){i(!1)},size:"lg",style:{height:"400px"}},o.a.createElement(r.v,{className:"px-5 pt-5 border-none"},o.a.createElement(r.w,{className:"text LatoBold"},"Confirmation")),o.a.createElement(r.t,{className:"px-5 py-0"},o.a.createElement("p",{className:"text mb-2"},"Are you sure want to upload ",o.a.createElement("span",{className:"green"},"Edited")," ",w,"?"),o.a.createElement("p",{className:"text"},"Once uploaded this record will store to databases."),o.a.createElement("p",{className:"text mb-2"},"Please type \u2018",x,"\u2019 on the Box to confirm upload file."),o.a.createElement("div",{className:"captcha-box"},o.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:1,isCaptcha:N,setIsValidated:U,setIsType:B,isType:L})},id:"t1",type:"text",style:{textTransform:"uppercase"},className:"captcha-input",maxLength:"1",placeholder:N[0]}),o.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:2,isCaptcha:N,setIsValidated:U,setIsType:B,isType:L})},id:"t2",type:"text",style:{textTransform:"uppercase"},className:"captcha-input ml-0 mr-0",maxLength:"1",placeholder:N[1]}),o.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:3,isCaptcha:N,setIsValidated:U,setIsType:B,isType:L})},id:"t3",type:"text",style:{textTransform:"uppercase"},className:"captcha-input",maxLength:"1",placeholder:N[2]}))),o.a.createElement(r.u,{className:"px-5 pb-5 pt-0 justify-content-start border-none"},o.a.createElement(r.d,{className:"bg-background text no-shadow px-5 mt-4 mb-0 mx-0",onClick:function(){i(!1)}},"Cancel"),o.a.createElement(r.d,{className:(O?"bg-green":"bg-emptyTextField disabled")+" no-shadow px-5 mt-4 mb-0 ml-3 mr-0",onClick:function(){l(),U(!1)}},m)," "))))}},727:function(e,t,a){}}]);
//# sourceMappingURL=49.669f1e39.chunk.js.map