(this["webpackJsonp@coreui/coreui-pro-react-admin-template"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template"]||[]).push([[69],{1236:function(e,t,n){"use strict";n.r(t);var a=n(65),i=n.n(a),o=n(91),r=n(659),u=n(1),l=n.n(u),s=n(20),c=n(56),d=n(19),m=n(666),v=n(679),p=n(663),f=n(672),b=n(670),h=n(680),y=n.n(h),j=(n(732),n(779)),E=n(662),k=n(665),O=n(724),g=n(692);t.default=Object(s.i)((function(e){var t,n,a,h,w,x,N,D=Object(c.c)(),S=Object(s.g)(),U=Object(c.d)((function(e){return e.thereAreRequest})),I=Object(c.d)((function(e){return e.stockTransferFirstLoad})),L=Object(c.d)((function(e){return e.user.warehouseUuid})),P=Object(c.d)((function(e){return e.status})),W=Object(c.d)((function(e){return e.isLoading})),q=Object(c.d)((function(e){return e.stockTransferEntryData})),C=Object(u.useState)(null),T=Object(r.a)(C,2),B=T[0],H=T[1],A=Object(u.useState)(),K=Object(r.a)(A,2),V=K[0],F=K[1],M=Object(E.t)({moduleEntry:V,moduleName:"stockTransfer"}),z=Object(u.useState)(0),J=Object(r.a)(z,2),R=J[0],G=J[1],Q=R!==M&&M>0,X=Object(u.useState)(),Y=Object(r.a)(X,2),Z=Y[0],$=Y[1],_=Object(u.useState)(),ee=Object(r.a)(_,2),te=ee[0],ne=ee[1],ae=Object(u.useState)(),ie=Object(r.a)(ae,2),oe=ie[0],re=ie[1],ue=Object(u.useState)(),le=Object(r.a)(ue,2),se=le[0],ce=le[1];console.log(q);var de=Object(u.useState)(),me=Object(r.a)(de,2),ve=me[0],pe=me[1],fe=Object(u.useState)(),be=Object(r.a)(fe,2),he=be[0],ye=be[1],je=Object(u.useState)(),Ee=Object(r.a)(je,2),ke=Ee[0],Oe=Ee[1],ge=Object(u.useState)(),we=Object(r.a)(ge,2),xe=we[0],Ne=we[1],De=Object(u.useState)(),Se=Object(r.a)(De,2),Ue=Se[0],Ie=Se[1];Object(u.useEffect)((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){var t,n,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.e)({});case 2:return t=e.sent,e.next=5,Object(f.d)({dispatch:D});case 5:return n=e.sent,e.next=8,Object(f.f)({dispatch:D,warehouseUuid:L});case 8:return a=e.sent,e.next=11,Object(p.k)({dispatch:D,moduleName:"stockTransfer",isExist:!!q,ripeness:n});case 11:e.sent,o=t.filter((function(e){return e.value===L})),pe(o[0]),re(a),ne(t),G(M);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(u.useEffect)((function(e){Ie(!!(ke&&ve&&he&&ve!==he))}),[ke,xe,Q,ve,he]),Object(u.useEffect)((function(){F(),H()}),[ke,xe,ve,he]);var Le=Object(u.useState)(),Pe=Object(r.a)(Le,2),We=Pe[0],qe=Pe[1],Ce=Object(u.useState)(),Te=Object(r.a)(Ce,2),Be=Te[0],He=Te[1],Ae=document.documentElement.clientHeight,Ke=Ae-400,Ve=Ae-400;return l.a.createElement("div",{className:"w-100  stock-take-summary"},l.a.createElement(g.a,{discard:se,module:"Inventory Entry - Stock Transfer",moduleEntry:q,close:function(){return ce(!1)},discardEntry:function(e){return Object(p.o)({id:e,moduleName:"stockTransfer",dispatch:D,setDiscard:ce})}}),l.a.createElement(O.a,{discard:se,moduleFirstLoad:I,moduleEntry:q,redirect:function(){return e.history.push("/inventory-entry/stock-transfer/weight-entry")},previousPage:function(){return S.goBack()},setDiscard:function(){return ce(!0)}}),l.a.createElement(k.a,{status:P}),l.a.createElement("div",{className:"px-3 pt-3 bg-white border-all radius-all d-md-flex dd-group"},l.a.createElement("div",{className:"col-lg-3 px-0 stock-take-dropdown"},l.a.createElement(m.a,{show:!0,isDisabled:!0,title:"Warehouse Source",placeholder:"Select Warehouse Source",options:te,onChangeDropdown:function(e){return pe(e)},selectedValue:ve,showTitle:!0})),l.a.createElement("div",{className:"col-lg-3 px-0 stock-take-dropdown"},l.a.createElement(m.a,{show:!0,title:"Area Source",placeholder:"Select Area Source",options:null===oe||void 0===oe?void 0:oe.filter((function(e){return"Waste"!==e.label})),onChangeDropdown:function(e){return Oe(e)},selectedValue:ke,showTitle:!0})),l.a.createElement("div",{className:"col-lg-3 px-0 stock-take-dropdown"},l.a.createElement(m.a,{show:!0,title:"Warehouse Destination",placeholder:"Select Warehouse Destination",options:null===te||void 0===te?void 0:te.filter((function(e){return(null===e||void 0===e?void 0:e.label)!==(null===ve||void 0===ve?void 0:ve.label)})),onChangeDropdown:function(e){return ye(e)},selectedValue:he,showTitle:!0}))),l.a.createElement("div",{className:"pt-3 pb-0 pl-3 pr-3 bg-white mt-3 border-all radius-all mb-3"},l.a.createElement("div",{className:"d-md-flex d-lg-flex mb-3 justify-content-between"},l.a.createElement("div",{className:"text LatoBold d-flex justify-content-between align-items-center sku-des"},l.a.createElement("div",null,"Enter SKU or Description"," ",l.a.createElement("span",{className:"green"},"(".concat(M," Selected SKU").concat(M>1?"s":"",")"))))),l.a.createElement(v.a,{setSortBy:He,category:We,setCategory:qe,placeholder:"Enter SKU",filter:!1,searchHandler:function(e){return(null===ke||void 0===ke?void 0:ke.value)&&(null===ve||void 0===ve?void 0:ve.value)&&(null===he||void 0===he?void 0:he.value)&&(null===ve||void 0===ve?void 0:ve.value)!==(null===he||void 0===he?void 0:he.value)?Object(p.g)({category:We,dispatch:D,desc:e,warehouseUuid:L,areaId:ke,areaIdDesposition:xe,setModule:H,module:V},$(e)):(null===ke||void 0===ke?void 0:ke.value)?(null===ke||void 0===ke?void 0:ke.value)===(null===xe||void 0===xe?void 0:xe.value)?Ne("empty"):(null===ve||void 0===ve?void 0:ve.value)?(null===he||void 0===he?void 0:he.value)?(null===he||void 0===he?void 0:he.value)===(null===ve||void 0===ve?void 0:ve.value)?ye("empty"):null:ye("empty"):pe("empty"):Oe("empty")}}),l.a.createElement("div",{className:"mb-3 mt-3 d-flex align-items-center scroll-sku ".concat((null===B||void 0===B?void 0:B.length)?"flex-column":"flex-row"," w-100 text-center"),style:{minHeight:Ke,maxHeight:Ke}},(null===B||void 0===B?void 0:B.length)?null===B||void 0===B||null===(t=B.sort((function(e,t){return Object(E.g)(e,t,null===Be||void 0===Be?void 0:Be.value)})))||void 0===t?void 0:t.map((function(e,t){return l.a.createElement(b.a,{key:t,img:null===e||void 0===e?void 0:e.photo,skuDescription:null===e||void 0===e?void 0:e.skuName,skuNumber:null===e||void 0===e?void 0:e.skuNumber,uomLabel:"weight",uomValue:null===e||void 0===e?void 0:e.totalQty,uom:null===e||void 0===e?void 0:e.unitOfMeassures,isCheckedHandler:function(e){return Object(j.b)({idx:t,checked:e,dispatch:D,setLocalEntryData:F,moduleSummary:B,moduleEntry:V,moduleName:"stockTransfer",warehouseUuid:L,warehouseIdDestination:he,areaId:ke,areaIdDesposition:xe})},check:null===e||void 0===e?void 0:e.checked})})):l.a.createElement("div",{className:"w-100 text-center emptyTextField d-flex flex-column align-items-center justify-content-center",style:{minHeight:Ve,maxHeight:Ve}},Object(E.s)({isLoading:W,summary:B})?ke&&xe&&0===(null===B||void 0===B?void 0:B.length)?l.a.createElement("div",null,"Sorry, we couldn't find any matches for '",l.a.createElement("span",{className:"LatoBold"},Z),"' in ",ke&&(null===xe||void 0===xe?void 0:xe.label)," area.",l.a.createElement("br",null),"Please Try search with another term."):"Enter SKU":l.a.createElement("img",{className:"loading",src:y.a,alt:"loading"})))),l.a.createElement("div",{className:"h-screen-summary-footer d-flex flex-column justify-content-start"},l.a.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between mb-1"},l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e.history.push("/inventory-entry/stock-transfer/CSV-upload")},type:"button",className:"btn px-4 no-shadow border-all bg-white fontSizeButton"},"Upload File")),l.a.createElement("button",{onClick:function(){var t,n;0===U&&V&&(null===V||void 0===V||null===(t=V.jobPost)||void 0===t||null===(n=t.list)||void 0===n?void 0:n.length)>0&&!0===Ue&&(D({type:d.b,stockTransferEntryData:V}),e.history.push("/inventory-entry/stock-transfer/weight-entry"))},type:"button",className:"btn px-5 fontSizeButton no-shadow text-white ".concat(0===U&&V&&(null===V||void 0===V||null===(n=V.jobPost)||void 0===n||null===(a=n.list)||void 0===a?void 0:a.length)>0&&!0===Ue?"bg-green":"bg-lineGrey")},V&&0!==(null===V||void 0===V||null===(h=V.jobPost)||void 0===h||null===(w=h.list)||void 0===w?void 0:w.length)||0!==U?0===U&&V&&(null===V||void 0===V||null===(x=V.jobPost)||void 0===x||null===(N=x.list)||void 0===N?void 0:N.length)>0?"Next":"Processing...":"Next"))))}))},692:function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(661);n(671);t.a=function(e){var t=e.discard,n=e.moduleEntry,a=e.close,r=e.discardEntry,u=e.module;document.documentElement.clientHeight;return i.a.createElement(o.B,{className:t?null:"d-none"},i.a.createElement(o.f,null,i.a.createElement(o.s,{show:t,size:"lg",closeOnBackdrop:!1},i.a.createElement("div",{className:"d-flex flex-row-reverse pr-3 pt-3 mt-1"},i.a.createElement("i",{onClick:function(){return a()},className:"iconU-modalClose"})),i.a.createElement(o.v,{className:"px-5 pb-4 mb-2 pt-4 mt-2 border-none"},i.a.createElement(o.w,{className:"red LatoBold"},"Discard? ",i.a.createElement("span",null,i.a.createElement("i",{className:"em em-astonished"})))),i.a.createElement(o.t,{className:"px-5 pb-5 mb-4 py-0"},i.a.createElement("p",{className:"text mb-3 h5 respon-txt"},"Are you sure you want to discard ",i.a.createElement("span",{className:"green"}," ".concat(null===n||void 0===n?void 0:n.jobPost.list.length," selected SKU ").concat((null===n||void 0===n?void 0:n.jobPost.list.length)>1?"(s)":"")),"from this",i.a.createElement("div",{className:"green h5 pt-2 respon-txt"},u)),i.a.createElement("br",null),i.a.createElement(o.d,{onClick:function(){return r(null===n||void 0===n?void 0:n.jobPost.id)},className:"bg-background text no-shadow pl-5 pr-5 mr-3 LatoBlack"},"Discard"),i.a.createElement(o.d,{onClick:function(){return a()},className:"bg-green no-shadow pl-4 pr-4 LatoBlack"},"Don't Discard")," "))))}},732:function(e,t,n){},779:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return y}));var a=n(4),i=n(65),o=n.n(i),r=n(71),u=n(664),l=n(91),s=n(22),c=n.n(s),d=n(19),m=n(663),v=n(672),p=n(116),f=n(662),b=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,i,s,b,h,y,j,E,k,O,g,w,x,N,D,S,U,I,L,P;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.idx,i=t.checked,s=t.dispatch,b=t.setLocalEntryData,h=t.moduleName,y=t.moduleSummary,j=t.moduleEntry,E=t.warehouseUuid,k=t.warehouseIdDestination,O=t.areaId,g=t.areaIdDesposition,(w=Object(u.a)(y))[a].checked=i,s(Object(r.a)({type:d.c},"".concat(h,"summaryData"),w)),x=null===w||void 0===w?void 0:w.filter((function(e){if(e.checked)return e})),N=[],j&&j.jobPost.list.map((function(e){var t={skuUuid:e.skuUuid};t.skuUuid&&N.push(t.skuUuid)})),D=[],S=x.map(function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.includes(t.skuUuid)){e.next=10;break}return e.next=4,Object(v.a)({skuId:t.skuUuid});case 4:return a=e.sent,t.gradeList=a,e.next=8,Object(m.f)({skuId:t.skuUuid,warehouseUuid:E,dispatch:s,areaId:O.value,moduleName:h});case 8:(i=e.sent)&&(r=i.map((function(e){e.itemList=[];var n=e.expiryDate?c()(e.expiryDate).valueOf():null,a=e.inboundDate?c()(e.inboundDate).valueOf():null;return e.expiryDate=n,e.inboundDate=a,e.skuUuid=t.skuUuid,e.uom=t.unitOfMeassures,e.category=t.category,e.initialWeight=Object(p.e)(e.initialWeight)?Object(p.e)(e.initialWeight):e.initialWeight,e})),t.poList=r,D.push(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=11,Promise.all(S);case 11:e.sent,U=[],j&&(U=j.jobPost.list.concat(D)),j||(U=D),(I=w[a]).checked||(U=U.filter((function(e){return e.skuUuid!==I.skuUuid}))),L=null===j||void 0===j||null===(n=j.jobPost)||void 0===n?void 0:n.id,P={jobPost:{id:L||0,warehouseSource:E,warehouseDestination:null===k||void 0===k?void 0:k.value,warehouseDestinationName:null===k||void 0===k?void 0:k.label,areaSource:parseInt(null===O||void 0===O?void 0:O.value),areaName:null===O||void 0===O?void 0:O.label,areaDestination:parseInt(null===g||void 0===g?void 0:g.value),areaDestinationName:null===g||void 0===g?void 0:g.label,list:U.sort((function(e,t){return Object(f.g)(e,t)}))}},0===U.length&&s(Object(r.a)({type:d.b},"".concat(h,"EntryData"),null)),b(P);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,i,r,s,d,f,b,h,y,j,E,k,O,g,w;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.idx,a=t.checked,i=t.dispatch,r=t.moduleName,s=t.moduleSummary,d=t.moduleEntry,f=t.warehouseUuid,b=t.areaId,h=t.preAddHandler,(y=Object(u.a)(s))[n].checked=a,j=null===y||void 0===y?void 0:y.filter((function(e){if(e.checked)return e})),E=[],d&&d.map((function(e){var t={skuUuid:e.skuUuid};t.skuUuid&&E.push(t.skuUuid)})),k=[],O=j.map(function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.includes(t.skuUuid)){e.next=10;break}return e.next=4,Object(v.a)({skuId:t.skuUuid});case 4:return a=e.sent,t.gradeList=a,e.next=8,Object(m.f)({skuId:t.skuUuid,warehouseUuid:f,dispatch:i,areaId:b.value,moduleName:r});case 8:(u=e.sent)&&(l=u.map((function(e){e.itemList=[];var n=e.expiryDate?c()(e.expiryDate).valueOf():null,a=e.inboundDate?c()(e.inboundDate).valueOf():null;return e.expiryDate=n,e.inboundDate=a,e.skuUuid=t.skuUuid,e.uom=t.unitOfMeassures,e.initialWeight=Object(p.e)(e.initialWeight)?Object(p.e)(e.initialWeight):e.initialWeight,e})),t.poList=l,t.isNewItem=!0,k.push(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=10,Promise.all(O);case 10:e.sent,g=[],d&&(g=d.concat(k)),d||(g=k),(w=y[n]).checked||(g=g.filter((function(e){return e.skuUuid!==w.skuUuid}))),h(g);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.setActiveSKU,n=e.moduleEntry,i=e.moduleName,o=e.setConfirmation,u=e.dispatch,l=e.setIsRequired,s=[],c=Object(a.a)({},n),m=n.jobPost.list.map((function(e){return e.poList.map((function(e){var t=Object(f.y)({moduleList:e.itemList});return e.itemList.map((function(n){var a=n.qty,i=n.grade;n.ripeness,n.note;return"kg"===e.uom?0!=a&&!isNaN(a)||null!==(null===i||void 0===i?void 0:i.value)?isNaN(a)||0==a||""===a||null===a?n.qtyIsEmpty=!0:n.qtyIsEmpty=!1:(n.qtyIsEmpty=!1,n.gradeIsEmpty=!1,n.ripenessIsEmpty=!1,n.noteIsEmpty=!1):isNaN(a)||0==a||""===a||null===a?n.qtyIsEmpty=!0:n.qtyIsEmpty=!1,n.qtyIsEmpty||(Number(t)>Number(e.initialWeight)?n.qtyIsEmpty=!0:n.qtyIsEmpty=!1),(null===n||void 0===n?void 0:n.qtyIsEmpty)||(null===n||void 0===n?void 0:n.gradeIsEmpty)||(null===n||void 0===n?void 0:n.ripenessIsEmpty)||(null===n||void 0===n?void 0:n.noteIsEmpty)?s.push(!1):s.push(!0),n})),e})),e})),v=!1;m.map((function(e){e.poList.map((function(e){e.itemList.map((function(e){e.qty&&(v=!0)}))}))})),c.jobPost.list=m,u(Object(r.a)({type:d.b},"".concat(i,"EntryData"),c)),!s.includes(!1)&&v?"function"===typeof o&&o({show:!0,name:"submit"}):("function"===typeof o&&o({show:!1,name:null}),"function"===typeof l&&l(!0)),Object(f.b)({setActiveSKU:t,moduleEntry:n,moduleName:i})}}}]);
//# sourceMappingURL=69.7e7c0f20.chunk.js.map