(this["webpackJsonp@coreui/coreui-pro-react-admin-template"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template"]||[]).push([[49],{1262:function(e,t,a){"use strict";a.r(t);var n=a(659),s=a(1),o=a.n(s),r=a(56),l=a(20),u=(a(727),a(675)),i=a(674),c=(a(734),a(65)),d=a.n(c),m=a(91),p=a(71),f=a(19),b=a(663),v=a(22),h=a.n(v),y=(a(783),function(e){var t=[],a=new Date,n=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),o=a.getFullYear();return a=n+"-"+s+"-"+o,e.map((function(e,n){t.push({isSuccess:!0,skuUuid:e.skuUuid,warehouseId:e.warehouseDestinationUuid,unitOfMeassures:e.uom,qty:e.qty||0,photo:e.photo,poSku:e.wmsPoSkuCode,expiryDate:h()(e.expiryDateCol,"DD-MM-YYYY").toDate().getTime()||"",inboundDate:h()(a,"DD-MM-YYYY").toDate().getTime()||"",errorMessage:"",category:e.category,skuNumber:e.skuNumber,skuDescription:e.skuDescription,warehouseCode:e.warehouseDestination})})),t}),w=function(e){var t=[];return e.data.map((function(e,a){var n,s="Failed";e.isSuccess&&(s="Success"),t.push((n={warehouseDestination:"",wmsPoSkuCode:e.poSku,qty:e.qty,expiryDateCol:h()(e.expiryDate).format("DD-MM-YYYY"),category:"",skuDescription:"",skuNumber:"",uploadStatus:s||"",uploadStatusReason:e.errorMessage||""},Object(p.a)(n,"category",e.category),Object(p.a)(n,"skuNumber",e.skuNumber),Object(p.a)(n,"skuDescription",e.skuDescription),Object(p.a)(n,"warehouseDestination",e.warehouseCode),n))})),t},g=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,s,o,r,l,u,i,c,m,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.csvData,n=t.csvField,s=t.dispatch,t.selectorStatus,o=t.setIsShowModal,r=t.setIsSubmitText,l=t.setSubmitStatus,r("Loading..."),console.clear(),u={source:"upload",codeTransaction:"inbound",list:[]},e.next=6,y(a);case 6:return i=e.sent,u.list=i,e.next=10,Object(b.s)({dataCsv:u,setSubmitStatus:l,dispatch:s});case 10:if("error"!=(c=e.sent)){e.next=13;break}return e.abrupt("return",0);case 13:return e.next=15,w(c);case 15:return m=e.sent,console.log(m),e.next=19,s({type:f.l,csvDataResult:m});case 19:return(p=[]).push({dataField:"uploadStatus",text:"Upload Status",type:"string",sort:!0}),n.map((function(e,t){p.push(e)})),e.next=24,s({type:f.l,csvFieldResult:p});case 24:o(!1),r("Submit"),l(!0);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=a(667);t.default=Object(l.i)((function(e){var t=Object(r.c)(),a=Object(r.d)((function(e){return e.csvFileName})),l=Object(r.d)((function(e){return e.csvData})),c=Object(r.d)((function(e){return e.csvField})),d=Object(r.d)((function(e){return e.warehouseAreaCsv})),m=Object(r.d)((function(e){return e.status})),p=Object(r.d)((function(e){return e.warehouseData})),b=o.a.useState(!1),v=Object(n.a)(b,2),h=v[0],y=v[1],w=o.a.useState(null),x=Object(n.a)(w,2),E=x[0],k=x[1],N=o.a.useState(!0),C=Object(n.a)(N,2),O=C[0],D=C[1],j=o.a.useState(!1),T=Object(n.a)(j,2),U=T[0],I=T[1],F=o.a.useState(!1),R=Object(n.a)(F,2),B=R[0],L=R[1],A=o.a.useState(!0),M=Object(n.a)(A,2),W=M[0],P=M[1],q=o.a.useState(!1),V=Object(n.a)(q,2),H=V[0],K=V[1],G=o.a.useState(null),Y=Object(n.a)(G,2),_=Y[0],J=Y[1],Q=o.a.useState(null),X=Object(n.a)(Q,2),Z=X[0],z=X[1],$=o.a.useState(null),ee=Object(n.a)($,2),te=ee[0],ae=ee[1],ne=o.a.useState(null),se=Object(n.a)(ne,2),oe=se[0],re=se[1],le=o.a.useState(null),ue=Object(n.a)(le,2),ie=ue[0],ce=ue[1],de=o.a.useState("Submit"),me=Object(n.a)(de,2),pe=me[0],fe=me[1],be=o.a.useState(null),ve=Object(n.a)(be,2),he=ve[0],ye=(ve[1],o.a.useState(null)),we=Object(n.a)(ye,2),ge=we[0],Se=we[1],xe=o.a.useState(null),Ee=Object(n.a)(xe,2),ke=Ee[0],Ne=Ee[1];if(Object(s.useEffect)((function(){!function(e){var t=e.csvData,a=e.csvField,n=e.setIsValidate,s=e.setCheckingCsv;if(void 0===t)return 0;var o=!0;t.map((function(e,t){a.map((function(t,a){!1===e[t.dataField+"Status"]&&(o=!1)}))})),n(!1!==o),s(!1)}({csvData:l,csvField:c,setIsValidate:I,setCheckingCsv:P})}),[W]),Object(s.useEffect)((function(){}),[l]),Object(s.useEffect)((function(){"success"===H?(ce("Done"),re(""),z(a+" upload successfull. "),ae("Would you import another file?"),J("Success"),Se("bg-green background ml-0"),Ne("green"),L(!0)):"failed"===H&&(ce("Retry"),re("Cancel"),z(null===m||void 0===m?void 0:m.message),ae("do you want to retry?"),J("Failed!"),Se("bg-red background ml-0"),Ne("red"),L(!0))}),[H]),Object(s.useEffect)((function(){!0===H&&e.history.push("/inventory-entry/additional-inbound/CSV-upload/result")}),[H]),void 0===l||null===l)return e.history.push("/inventory-entry/additional-inbound/CSV-upload"),0;var Ce=function(e){!function(e){var t=e.param,a=e.dispatch,n=e.setCheckingCsv;a({type:f.l,csvData:t}),n(!0)}({param:e,dispatch:t,setCheckingCsv:P})};return o.a.createElement("div",{className:"w-100 d-flex flex-column stock-take-summary"},o.a.createElement(u.a,{globalData:l,columns:c,tableClass:"reviewTable",hiddenRows:E,warehouseArea:d,setCsvDataTmp:function(e){return Ce(e)},setIsValidate:function(e){return I(e)},dispatch:t,setCheckingCsv:P,warehousesData:p,transaction:"additional_inbound"}),o.a.createElement("div",{className:"row pt-3"},o.a.createElement("div",{className:"col-4"},o.a.createElement("button",{type:"button",className:"btn px-3 mr-3 text no-shadow",style:{backgroundColor:"#fff"},onClick:function(){return function(e){var t=e.csvData,a=e.csvField,n=e.isShowErrorOnly,s=e.setIsShowErrorOnly,o=e.setIsHiddenRows,r=e.setCheckingCsv,l=[],u=[];t.map((function(e,t){var n=!0,s=t+1;a.map((function(t,a){var s=t.dataField+"Status";!1===e[s]&&(n=!1)})),!1===n?l.includes(s)||l.push(s):u.includes(s)||u.push(s)}));var i=[];if(!0===n){if((i=u.filter((function(e){return!l.includes(e)}))).length==t.length)return 0}else i=[];o(i),s(!n),r(!0)}({csvData:l,csvField:c,isShowErrorOnly:O,setIsShowErrorOnly:D,setIsHiddenRows:k,setCheckingCsv:P})}},"Show ",O?"Errors Only":"All"),o.a.createElement("button",{type:"button",className:"btn px-3 mr-3  text no-shadow",style:{backgroundColor:"#fff"},onClick:function(){return function(e){var t=e.csvData,a=e.csvField,n=e.dispatch,s=e.setCheckingCsv,o=[];t.map((function(e,t){var n=!0;a.map((function(t,a){var s=t.dataField+"Status";!1===e[s]&&(n=!1)})),!0===n&&o.push(e)})),n({type:f.l,csvData:o}),s(!0)}({csvData:l,csvField:c,dispatch:t,setCheckingCsv:P})}},"Delete Errors Field")),o.a.createElement("div",{className:"col-4",style:{lineHeight:"40px"}},"Review your imported file: ",a," (",l.length||0," Lines)"),o.a.createElement("div",{className:"col-4"},o.a.createElement("button",{type:"button",className:"btn px-5 bg-red text-white no-shadow float-right",onClick:function(){return e.history.goBack()}},"Discard"),o.a.createElement("button",{type:"button",class:"btn px-5 mr-3 text-white no-shadow float-right "+(!0===U&&(null===l||void 0===l?void 0:l.length)>0?"bg-green":"bg-primaryGrey disabled"),onClick:function(){return y(!h)}},"Submit"))),o.a.createElement(S.a,{status:m,onCloseFunction:function(){L(!1),K(!1)},statusDisplay:B,title:_,cancelButtonTitle:oe,actionButtonTitle:ie,colorText:ke,refreshOnCancel:!1,msg1:Z,msg2:te,cancelButtonClass:he,actionButtonClass:ge+" ml-0",actionButtonEvent:function(){return e.history.push("/inventory-entry/additional-inbound/CSV-upload")}}),o.a.createElement(i.a,{submit:function(){return g({dispatch:t,csvData:l,setIsShowModal:y,setIsSubmitText:fe,setSubmitStatus:K,csvField:c})},submitText:pe,show:h,setIsShowModal:y}))}))},668:function(e,t,a){},674:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return p}));var n=a(659),s=a(1),o=a.n(s),r=a(660),l=(a(668),a(56)),u=a(665),i=a(704),c=function(e){var t=e.e,a=e.state,n=e.isCaptcha,s=e.setIsValidated,o=e.setIsType,r=e.isType,l=e.isValidated,i=e.submit,c=t.key,d=Object(u.a)(r);if("Enter"===c){if(!l)return;i()}if(["ArrowUp","ArrowDown","Tab","Delete"].includes(c))return 0;if("Backspace"===c){var m=Object(u.a)(r);""==m[a]&&1!==a&&(document.getElementById("t"+(parseInt(a)-1)).focus(),document.getElementById("t"+(parseInt(a)-1)).value="",m[a-1]="",d[a-1]=""),console.log(m)}else if("ArrowLeft"===c){if(1!==a)return document.getElementById("t"+(parseInt(a)-1)).focus(),document.getElementById("t"+(parseInt(a)-1)).setSelectionRange(-1,-1),0}else if("ArrowRight"===c){if(3!==a)return document.getElementById("t"+(parseInt(a)+1)).focus(),document.getElementById("t"+(parseInt(a)+1)).setSelectionRange(-1,-1),0}else 3!==a&&document.getElementById("t"+(parseInt(a)+1)).focus();d[a]="Backspace"===c?"":c.toUpperCase();if(!"QWERTYUIOPLKJHGFDSAZXCVBNM1234567890".split("").includes(c.toUpperCase())&&""!=d[a])return 0;document.getElementById("t"+parseInt(a)).value=d[a],o(d);var p=!0;n.map((function(e,t){d[t+1]!=n[t]&&(p=!1),console.log(d[t+1],n[t],p)})),s(p)},d=a(662),m=function(e){var t,a,n,l=e.moduleEntry,u=e.confirmation,c=e.setConfirmation,m=e.save,p=e.submit,f=e.isSuccess,b=e.isLoading,v=e.moveAll,h=e.setAction,y=e.moduleName,w=e.noSkuChecking,g=e.singleViewData,S=document.documentElement.clientHeight-300,x="Submit";"save"===u.name&&(x="Save"),Object(s.useEffect)((function(){f&&c({show:!1,name:null})}),[f]),window.onkeydown=function(e){return 27===e.keyCode?c({show:!1,name:null}):null},Object(s.useEffect)((function(){h(u.name)}),[u]);var E=g&&!v?g:l,k=null===E||void 0===E||null===(t=E.jobPost)||void 0===t?void 0:t.areaDestinationName,N=null===E||void 0===E||null===(a=E.jobPost)||void 0===a?void 0:a.warehouseDestinationName,C=null===E||void 0===E||null===(n=E.jobPost)||void 0===n?void 0:n.areaName,O=function(e,t,a){if(null===e||void 0===e?void 0:e.length){var n=[];e.map((function(e){e.poList.map((function(s){s.itemList.map((function(s){var o,r,l,u,c,d,m=s.qty,p=s.grade,f=Object(i.a)(m)?parseInt(m):m?parseFloat(m):0,b=t?e.skuName:"waste"===a?(null===(o=s.wasteType)||void 0===o?void 0:o.label)?null===(r=s.wasteType)||void 0===r?void 0:r.label:e.skuName:null===p||void 0===p?void 0:p.label,v="waste"===a?"Semi Waste"===(null===(l=s.wasteType)||void 0===l?void 0:l.label)||"Waste"===(null===(u=s.wasteType)||void 0===u?void 0:u.label):"Waste"===(null===p||void 0===p?void 0:p.label)||"Semi Waste"===(null===p||void 0===p?void 0:p.label),h=t?e.unitOfMeassures:"gram"===(null===p||void 0===p?void 0:p.uom)?"kg":null===p||void 0===p?void 0:p.uom,y={sku:b,qty:f,uom:h,wqty:0,swqty:0};v&&(y.qty=0,y.sku=e.skuName),("waste"===a?"Waste"===(null===(c=s.wasteType)||void 0===c?void 0:c.label):"Waste"===(null===p||void 0===p?void 0:p.label))&&(y.wqty=f),("waste"===a?"Semi Waste"===(null===(d=s.wasteType)||void 0===d?void 0:d.label):"Semi Waste"===(null===p||void 0===p?void 0:p.label))&&(y.swqty=f);var w,g,S=n.findIndex((function(t){return(null===t||void 0===t?void 0:t.sku)===(v?e.skuName:b)}));("waste"!==a&&(-1===S&&n.push(y),-1!==S&&(v||(n[S].qty+=f),"Semi Waste"===(null===p||void 0===p?void 0:p.label)&&(n[S].swqty+=f),"Waste"===(null===p||void 0===p?void 0:p.label)&&(n[S].wqty+=f))),"waste"===a)&&(-1===S&&n.push(y),-1!==S&&(v||(n[S].qty+=f),"Semi Waste"===(null===(w=s.wasteType)||void 0===w?void 0:w.label)&&(n[S].swqty+=f),"Waste"===(null===(g=s.wasteType)||void 0===g?void 0:g.label)&&(n[S].wqty+=f)))}))}))}));var s=e.length?e[0].skuName:"No SKU",o=n.findIndex((function(e){return e.sku===s}));return n.forEach((function(e){-1!==o&&("Waste"===e.sku&&(n[o].wqty=e.qty),"Semi Waste"===e.sku&&(n[o].swqty=e.qty))})),n}}(null===E||void 0===E?void 0:E.jobPost.list,w,y);return o.a.createElement(r.B,{className:u.show?null:"d-none"},o.a.createElement(r.f,null,o.a.createElement(r.s,{show:u.show,closeOnBackdrop:!1},o.a.createElement(r.v,{className:"px-4 pt-5 border-none"},o.a.createElement(r.w,{className:"text LatoBold"},"Confirmation ",o.a.createElement("span",null,o.a.createElement("i",{className:"em em-pray"}))),o.a.createElement("label",{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&c({show:!1,name:null})},onClick:function(){return c({show:!1,name:null})},className:"sku-item iconU-modalClose"})),o.a.createElement(r.t,{className:"px-4 py-0",style:{minHeight:S}},o.a.createElement("p",{className:"text mb-2"},o.a.createElement("span",null,"Are you sure want to ".concat("Waste"==C?"update":"send"," this Item ")),o.a.createElement("span",{className:" ".concat(k?null:"d-none")}," from"),o.a.createElement("span",{className:"green ".concat(k?null:"d-none")}," ".concat(C," ")),o.a.createElement("span",null,"outbound"==y?"from":"repack"===y?"":"to"," "),o.a.createElement("span",{className:"green ".concat("repack"!==y?null:"d-none")}," ".concat("stockTransfer"===y?N:k||C," "))),o.a.createElement("p",{className:"text"},"Please double check this list, this record will store to database."),o.a.createElement("div",{style:{minHeight:S,maxHeight:S,overflow:"auto",border:"1px solid var(--lineGrey)"}},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",{style:{borderBottom:"1px solid var(--lineGrey)"}},o.a.createElement("th",{style:{color:"var(--emptyTextField)"}},"SKU List"),o.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Weight"),o.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Semi Waste"),o.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Waste"))),o.a.createElement("tbody",null,null===O||void 0===O?void 0:O.map((function(e){return o.a.createElement("tr",{style:{borderBottom:"1px solid var(--lineGrey)"}},o.a.createElement("td",{style:{maxWidth:"160px"}},e.sku),o.a.createElement("td",{className:"text-right py-3",style:{textAlign:"right"}},"".concat(Object(d.B)(null===e||void 0===e?void 0:e.qty))),o.a.createElement("td",{className:"text-right text-nowrap",style:{textAlign:"right"}},o.a.createElement("span",{className:"text-nowrap"},"".concat(Object(d.B)(null===e||void 0===e?void 0:e.swqty)," "))),o.a.createElement("td",{className:"text-right",style:{textAlign:"right"}},"".concat(Object(d.B)(null===e||void 0===e?void 0:e.wqty))))}))))),o.a.createElement("div",{className:"px-0 pb-5 pt-0 justify-content-start border-none"},o.a.createElement(r.d,{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&c({show:!1,name:null})},className:"bg-background sku-item text no-shadow px-5 mt-4 mb-0 mx-0",onClick:function(){return c({show:!1,name:null})}},"Cancel"),o.a.createElement(r.d,{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&(b?null:"save"===u.name?m():p())},className:"".concat(b?"bg-softGreen text":"bg-green text-white"," no-shadow px-5 mt-4 sku-item mb-0 ml-3 mr-0"),onClick:function(){return b?null:"save"===u.name?m():p()}},b?"Processing...":x)," ")))))},p=function(e){for(var t=e.show,a=void 0!==t&&t,u=e.setIsShowModal,i=e.submit,d=e.submitText,m=void 0===d?"Submit":d,p="",f="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",b=f.length,v=[],h=0;h<3;h++){var y=f.charAt(Math.floor(Math.random()*b));p+=y,v.push(y)}var w=Object(l.d)((function(e){return e.csvFileName})),g=o.a.useState(v),S=Object(n.a)(g,2),x=S[0],E=(S[1],o.a.useState(p)),k=Object(n.a)(E,2),N=k[0],C=(k[1],o.a.useState(!1)),O=Object(n.a)(C,2),D=O[0],j=O[1],T=o.a.useState([]),U=Object(n.a)(T,2),I=U[0],F=U[1];return Object(s.useEffect)((function(){!0===a&&(document.getElementById("t1").value="",document.getElementById("t2").value="",document.getElementById("t3").value="")}),[a]),o.a.createElement(r.B,{className:a?null:"d-none"},o.a.createElement(r.f,null,o.a.createElement(r.s,{show:a,onClose:function(){u(!1)},size:"lg",style:{height:"400px"}},o.a.createElement(r.v,{className:"px-5 pt-5 border-none"},o.a.createElement(r.w,{className:"text LatoBold"},"Confirmation")),o.a.createElement(r.t,{className:"px-5 py-0"},o.a.createElement("p",{className:"text mb-2"},"Are you sure want to upload ",o.a.createElement("span",{className:"green"},"Edited")," ",w,"?"),o.a.createElement("p",{className:"text"},"Once uploaded this record will store to databases."),o.a.createElement("p",{className:"text mb-2"},"Please type \u2018",N,"\u2019 on the Box to confirm upload file."),o.a.createElement("div",{className:"captcha-box"},o.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:1,isCaptcha:x,setIsValidated:j,setIsType:F,isType:I,isValidated:D,submit:i})},id:"t1",type:"text",style:{textTransform:"uppercase"},className:"captcha-input",maxLength:"1",placeholder:x[0]}),o.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:2,isCaptcha:x,setIsValidated:j,setIsType:F,isType:I,isValidated:D,submit:i})},id:"t2",type:"text",style:{textTransform:"uppercase"},className:"captcha-input ml-0 mr-0",maxLength:"1",placeholder:x[1]}),o.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:3,isCaptcha:x,setIsValidated:j,setIsType:F,isType:I,isValidated:D,submit:i})},id:"t3",type:"text",style:{textTransform:"uppercase"},className:"captcha-input",maxLength:"1",placeholder:x[2]}))),o.a.createElement(r.u,{className:"px-5 pb-5 pt-0 justify-content-start border-none"},o.a.createElement(r.d,{className:"bg-background text no-shadow px-5 mt-4 mb-0 mx-0",onClick:function(){u(!1)}},"Cancel"),o.a.createElement(r.d,{className:(D?"bg-green":"bg-emptyTextField disabled")+" no-shadow px-5 mt-4 mb-0 ml-3 mr-0",onClick:function(){i(),j(!1)}},m)," "))))}},675:function(e,t,a){"use strict";a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return w}));var n=a(65),s=a.n(n),o=a(91),r=a(169),l=a(170),u=a(172),i=a(171),c=a(1),d=a.n(c),m=a(660),p=a(706),f=a.n(p),b=(a(676),a(707),a(47)),v=a.n(b),h=a(708),y=a.n(h),w=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).changeWarehouseUuid=function(e,t,a,r,l,u,i){var c=n.props,d=c.setCsvDataTmp,m=c.globalData,p=m.findIndex((function(e){return e.id==r})),f=l.indexOf(e);m[p][t]=u[f],m[p][a]=i[f],setTimeout(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(m);case 1:case"end":return e.stop()}}),e)}))),400)},n.validatePOSKU=function(){var e=Object(o.a)(s.a.mark((function e(t,a,r){var l,u,i,c,d,m,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.props,u=l.setCsvDataTmp,i=l.globalData,c=l.setIsValidate,"additional_inbound"!=l.transaction){e.next=3;break}return e.abrupt("return");case 3:d=i,e.prev=4,c(!1),"/stocktake/rowValidationUpload",m=null,p=null,setTimeout(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=document.getElementById("".concat(r)),p=document.getElementById("".concat(r,"span")),null!==m&&void 0!==m){e.next=4;break}return e.abrupt("return",0);case 4:return p.innerHTML="Validating",e.next=7,v()({method:"post",url:"/stocktake/rowValidationUpload",data:{data:[t]}}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data,s=d.findIndex((function(e){return e.id==a}));n[0]&&!0===n[0].isExist?(d[s].wmsPoSkuCode=n[0].wmsPoSkuCode,d[s].wmsPoSkuCodeStatus=!0,d[s].wmsPoSkuCodeReason="PO SKU Code Not Found",d[s].expiryDate=n[0].expiryDate,d[s].inboundDate=n[0].inboundDate,d[s].supplierName=n[0].supplierName,d[s].supplierUuid=n[0].supplierUuid,d[s].uom=n[0].uom,d[s].photos=n[0].photos,m.classList.remove("red"),m.classList.add("hiddenTooltip")):(d[s].wmsPoSkuCodeStatus=!1,d[s].wmsPoSkuCodeReason="PO SKU Code Not Found",d[s].expiryDate="",d[s].inboundDate="",d[s].supplierName="",d[s].supplierUuid="",m.classList.add("red"),m.classList.remove("hiddenTooltip"),p.innerHTML="PO SKU Code Not Found"),u(d)}));case 7:case"end":return e.stop()}}),e)}))),400),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,a,n){return e.apply(this,arguments)}}(),n.validateOutbountReason=function(e,t,a){var s=n.props.globalData,o=s.findIndex((function(e){return e.id==t})),r=s[o];""==e&&"LAINNYA"==r.outboundType.toUpperCase()&&setTimeout((function(){var e=document.getElementById("row".concat(t,"-outboundReason"));e.classList.add("red","tooltip-custom"),e.innerHTML="Outbound Reason Can't be empty<span class=\"tooltiptext\">Outbound Reason Can't be empty if Outbound type = 'Lainnya'</span>"}),300)},n.validateOutbountType=function(e,t,a){var s=n.props,o=s.globalData,r=s.setIsValidate,l=o;if(r(!1),"LAINNYA"!==e.toUpperCase())return r(!0),0;var u=l.findIndex((function(e){return e.id==t}));""==l[u].outboundReason&&setTimeout((function(){var e=document.getElementById("row".concat(t,"-outboundReason"));e.classList.add("red","tooltip-custom"),e.innerHTML="Outbound Reason Can't be empty<span class=\"tooltiptext\">Outbound Reason Can't be empty if Outbound type = 'Lainnya'</span>"}),300)},n.validateSKUNumber=function(){var e=Object(o.a)(s.a.mark((function e(t,a,r,l){var u,i,c,d,m,p,f,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=n.props,i=u.globalData,c=u.setCsvDataTmp,d=u.setIsValidate,m=u.transaction,p=i,e.prev=2,d(!1),"/oss/skuByNumbers",f=null,b=null,setTimeout(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=document.getElementById("".concat(r)),b=document.getElementById("".concat(r,"span")),null!==f&&void 0!==f){e.next=4;break}return e.abrupt("return",0);case 4:return b.innerHTML="Validating",e.next=7,v()({method:"post",url:"/oss/skuByNumbers",data:{skuList:[t]}}).then((function(e){var n,s=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data,o=e.data.isSuccess,r=p.findIndex((function(e){return e.id==a}));!0===o&&s.length>0?(p[r][l]=s[0].skuNumber,p[r][l+"Reason"]=s[0].skuDescription,p[r][l+"Status"]=!0,p[r][l+"Uuid"]=s[0].id,f.classList.remove("red"),f.classList.add("hiddenTooltip"),"skuNumber"==l&&(p[r].skuUuid=s[0].id,p[r].photo=s[0].imageMd),"newGrade"==l&&(p[r].newGradeUom=s[0].uom),"additional_inbound"==m&&(p[r].uom=s[0].uom)):(p[r][l]=t,p[r][l+"Reason"]="SKU Number Not Found",p[r][l+"Status"]=!1,p[r][l+"Uuid"]=null,f.classList.add("red"),f.classList.remove("hiddenTooltip"),b.innerHTML="SKU Number Not Found","skuNumber"==l&&(p[r].skuUuid="",p[r].photo=""),"newGrade"==l&&(p[r].newGradeUom=null),"additional_inbound"==m&&(p[r].uom="")),c(p)}));case 7:case"end":return e.stop()}}),e)}))),400),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,n,s){return e.apply(this,arguments)}}(),n.state={validateStatus:!1,validateResult:"Please Wait...",rowCount:0,keyy:0},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.columns,n=t.hiddenRows,s=t.tableClass,o=t.warehouseArea,r=t.outboundType,l=t.setCheckingCsv,u=t.globalData,i=t.editable,c=void 0===i||i,p=t.warehousesData,b=void 0===p?[]:p,v=this.state,h=(v.validateStatus,v.keyy),w=[],g=[],S=[];if(b){var x;null===b||void 0===b||null===(x=b.data)||void 0===x||x.map((function(e){w.push(e.code),g.push(e.id),S.push(e.name)}))}var E=o.map((function(e){return e.label.toUpperCase()}))||[],k=o.map((function(e){return e.value}))||[],N=r?r.map((function(e){return e.label.toUpperCase()})):[],C=r?r.map((function(e){return e.value})):[],O=a.map((function(t,a){return t.validator=function(a,n,s,o){var r=t.dataField,u=r+"Status",i=r+"Reason",c=null,d=null,m="row"+n.id+"-"+r;"wmsPoSkuCode"==r&&(e.validatePOSKU(a,n.id,m,r),c=!0),"skuNumber"==r&&(e.validateSKUNumber(a,n.id,m,r),c=!0);var p=["WASTE","SEMI WASTE"];if("newGrade"==r&&"waste"==e.props.transaction?p.includes(a.toUpperCase())?(n.newGradeUuid=a,n.newGradeUom=null):(d="Waste Type not found",v=!1,c=!1):"newGrade"==r&&(p.includes(a.toUpperCase())?(n.newGradeUuid=a,n.newGradeUom=null):parseInt(a)?(c=!0,e.validateSKUNumber(a,n.id,m,r)):""==a?(n.newGradeUuid=null,n.newGradeUom=null,c=!0):(d="Grade Undefined",v=!1,c=!1)),"outboundType"==r&&C.length>0)if(N.includes(a.toUpperCase())){var f=N.indexOf(a.toUpperCase());n.outboundTypeCode=C[f],c=!0,e.validateOutbountType(a,n.id,m)}else c=!1,d="Outbound Type Not Found";if("outboundReason"==r&&e.validateOutbountReason(a,n.id,m),"warehouse"==r&&(w.includes(a)?e.changeWarehouseUuid(a,"warehouseUuid","warehouseName",n.id,w,g,S):(c=!1,d="Warehouse Not Found")),"warehouseDestination"==r&&(w.includes(a)?e.changeWarehouseUuid(a,"warehouseDestinationUuid","warehouseDestinationName",n.id,w,g,S):(c=!1,d="Warehouse Not Found")),"areaName"==r||"areaNameDestination"==r)if(E.includes(a.toUpperCase())){var b=E.indexOf(a.toUpperCase());"areaNameDestination"==r?n.areaDestination=k[b]:n.areaSource=k[b],c=!0}else c=!1,d="Warehouse Area Not Found";"newPack"==r&&(!isNaN(a)?c=!0:(c=!1,d="Pack Should be a number"));var v=null;!1===(v="number"!=t.type||!isNaN(a))&&(d="".concat(t.text," Should be a ").concat(t.type));if(["grade","outboundReason","ripenessLevel","newRipeness","reason","expiryDate"].includes(r)&&""===a?(d="",v=!0,c=!0):"grade"==r&&(p.includes(a.toUpperCase())||(d="Waste Type Not Found",v=!1,c=!1)),"ripenessLevel"==r||"newRipeness"==r){[0,1,2,3].includes(parseInt(a))||""==a?(v=!0,c=!0,d="",""==a&&(a="")):(v=!1,c=!1,d="Undefined Ripeness Level")}if("date_indo"==t.type){a.match(/(0[1-9]|[12][0-9]|3[01])[-.](0[1-9]|1[012])[-.](19|20)\d\d/)||""==a?(v=!0,c=!0):(d="Date format must be 'dd-mm-yyyy'",v=!1,c=!1)}if(n[i]=d,c&&v){["wmsPoSkuCode","skuNumber"].includes(r)||(n[u]=!0,l())}return{valid:!(!c||!v),message:d}},t.formatter=function(e,a,n){var s=t.dataField,o=s+"Status",r=s+"Reason",l="row"+a.id+"-"+s,u=a[r];return!1===a[o]?(!1,!1,d.a.createElement("div",{id:l,className:"tooltip-custom red"},e,d.a.createElement("span",{id:l+"span",className:"tooltiptext"},u))):d.a.createElement("div",{id:l,className:"tooltip-custom hiddenTooltip"},e,d.a.createElement("span",{id:l+"span",className:"tooltiptext"},u))},t})),D={sortFunc:this.sortFunc,sortCaret:function(e,t){return e?"asc"===e?d.a.createElement("i",{className:"iconU-tableSortingTop ml-2"}):"desc"===e?d.a.createElement("i",{className:"iconU-tableSortingBottom ml-2"}):null:d.a.createElement("i",{className:"iconU-tableSortingNull ml-2"})}};return console.clear(),console.log(u),d.a.createElement(m.e,{className:"table-responsive"},d.a.createElement(f.a,{keyField:"id",data:u,columns:O,sort:D,classes:s||null,cellEdit:!0===c?y()({mode:"click",blurToSave:!0,nonEditableRows:function(){return e.props.dataDoubleRow||[]}}):null,bordered:!1,hiddenRows:n,key:h}))}}]),a}(d.a.Component),g=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.columns,a=e.tableClass,n=e.data,s=t.map((function(e,t){return e.formatter=function(t,a,n){var s=e.dataField;return"uploadStatus"==s&&"Failed"===a.uploadStatus?d.a.createElement("div",{className:"tooltip-custom red"},t,d.a.createElement("span",{className:"tooltiptext"},a.uploadStatusReason)):"uploadStatus"==s&&"Success"===a.uploadStatus?d.a.createElement("div",{className:"green"},t,d.a.createElement("span",null)):d.a.createElement("div",null,t,d.a.createElement("span",null))},e})),o={sortFunc:this.sortFunc,sortCaret:function(e,t){return e?"asc"===e?d.a.createElement("i",{className:"iconU-tableSortingTop ml-2"}):"desc"===e?d.a.createElement("i",{className:"iconU-tableSortingBottom ml-2"}):null:d.a.createElement("i",{className:"iconU-tableSortingNull ml-2"})}};return d.a.createElement(m.e,{className:"table-responsive"},d.a.createElement(f.a,{keyField:"id",data:n,columns:s,sort:o,classes:a||null,bordered:!1}))}}]),a}(d.a.Component)},676:function(e,t,a){},734:function(e,t,a){},783:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s}));var n=[{width:"100%",Header:"SYNC DATE",placeholder:"Sync Date",accessor:"updatedAt",style:{textAlign:"left",display:"start",justifyContent:"flex-start"}},{width:"100%",Header:"USER",placeholder:"User",accessor:"createdBy"},{width:"100%",Header:"MODULE",placeholder:"Module",accessor:"module",style:{textAlign:"right",display:"flex",justifyContent:"flex-start"}},{width:"100%",Header:"MESSAGE RESPONSE",placeholder:"Message Response",accessor:"responseMessage",style:{textAlign:"right !important",display:"flex",justifyContent:"flex-start"},className:"flex-adjust",headerClassName:"flex-adjust"}],s=[{width:"100%",Header:"SKU DESCRIPTION",placeholder:"Sku Description",accessor:"skuDescription",style:{textAlign:"left",display:"start",justifyContent:"flex-start"}},{width:"100%",Header:"SKU NUMBER",placeholder:"Sku Number",accessor:"skuNumber"},{width:"100%",Header:"REASON",placeholder:"Reason",accessor:"reason",style:{textAlign:"right !important",display:"flex",justifyContent:"flex-start"},className:"flex-adjust",headerClassName:"flex-adjust"}]}}]);
//# sourceMappingURL=49.a3127b02.chunk.js.map