(this["webpackJsonp@coreui/coreui-pro-react-admin-template"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template"]||[]).push([[14],{662:function(t,e,a){"use strict";a.d(e,"i",(function(){return m})),a.d(e,"s",(function(){return b})),a.d(e,"a",(function(){return h})),a.d(e,"d",(function(){return k})),a.d(e,"f",(function(){return y})),a.d(e,"g",(function(){return g})),a.d(e,"h",(function(){return x})),a.d(e,"c",(function(){return j})),a.d(e,"l",(function(){return w})),a.d(e,"e",(function(){return O})),a.d(e,"t",(function(){return L})),a.d(e,"u",(function(){return I})),a.d(e,"o",(function(){return N})),a.d(e,"p",(function(){return P})),a.d(e,"q",(function(){return U})),a.d(e,"n",(function(){return S})),a.d(e,"m",(function(){return M})),a.d(e,"k",(function(){return T})),a.d(e,"j",(function(){return E})),a.d(e,"b",(function(){return D})),a.d(e,"r",(function(){return Q}));var n=a(665),r=a(4),o=a(71),u=a(65),s=a.n(u),i=a(91),c=a(47),d=a.n(c),l=a(835),p=a(116),v=a(21),f=a(670),m=(a(664),function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u,i,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dispatch,n=e.sessionId,r=e.setComplete,t.prev=1,a({type:v.e,status:null}),o="user/validate?sessionId=".concat(n),t.next=6,d()(o);case 6:return u=t.sent,i=u.data,c=u.headers,r(!0),i&&(i.sessionId=c["session-id"],(null===i||void 0===i?void 0:i.isSuccess)?a({type:v.e,user:i,status:null}):a({type:v.e,user:null,status:{message:"Unauthorized",code:401},statusMessage:i.message})),t.abrupt("return",!0);case 14:t.prev=14,t.t0=t.catch(1),l=Object(p.i)(t.t0),r(!0),a({type:"STATUS",status:l,user:null});case 19:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}()),b=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dispatch,n=e.email,t.prev=1,r="/user/signOut?email=".concat(n),t.next=5,d()(r);case 5:return a({type:v.m,user:null}),window.location.replace("https://dev-wms-web.sayurbox.tech/"),t.abrupt("return",!0);case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dispatch,n=e.sessionId,t.prev=1,r="/user/checkSession?sessionId=".concat(n),t.next=5,d()(r);case 5:(o=t.sent)&&((null===o||void 0===o||null===(u=o.data)||void 0===u?void 0:u.isSuccess)||a({type:v.m,user:null})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),i=Object(p.i)(t.t0),a({type:v.e,user:null,status:{message:"Unauthorized",code:401},statusMessage:i.message});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u,c,l,v,m,b,h,k;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.moduleName,e.setModule,e.dispatch,n=e.poNumber,r=e.warehouseUuid,o=e.areaId,e.areaName,e.setSkuList,u=e.setLocalEntryData,t.prev=1,l="",n.length>0&&(l="&wmsPoSkuCode=".concat(n)),r&&(l+="&warehouseUuid=".concat(r)),o&&(l+="&areaId=".concat(null===o||void 0===o?void 0:o.value)),v="/".concat(null===a||void 0===a?void 0:a.toLowerCase(),"/poByPoSkuCode? ").concat(l),t.next=9,d()(v);case 9:if(m=t.sent,b=m.data,m.status,!(null===b||void 0===b||null===(c=b.data)||void 0===c?void 0:c.length)){t.next=21;break}return(h={}).jobPost={},h.jobPost.list=[],k=b.data.map(function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,u,i,c,d,l,v,m,b,k,y,g,x,j,w,O,L,I,N,P,U,S,M,T,E;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d=e.ripeness,l=e.expiryDate,v=e.codeGrade,m=e.inboundDate,b=e.inboundQty,k=e.initialWeight,y=e.photo,g=e.skuName,x=e.skuUuid,j=e.skuNumber,w=e.supplierId,O=e.supplierName,L=e.totalPack,I=e.uom,N=e.wmsPoSkuCode,P=e.slot,U=e.category,t.next=3,Object(f.a)({skuId:x});case 3:S=t.sent,M=null===S||void 0===S?void 0:S.filter((function(t){return t.label===g})),M=(null===(a=M)||void 0===a?void 0:a.length)?M[0]:{label:null,value:null},h.jobPost.id=0,h.jobPost.warehouseSource=r,h.jobPost.warehouseDestination=r,h.jobPost.areaSource=null===o||void 0===o?void 0:o.value,h.jobPost.areaName=null===o||void 0===o?void 0:o.label,h.jobPost.areaDestination=null===o||void 0===o?void 0:o.value,(null===h||void 0===h||null===(n=h.jobPost)||void 0===n||null===(u=n.list)||void 0===u?void 0:u.length)&&(-1===(E=null===h||void 0===h||null===(T=h.jobPost.list)||void 0===T?void 0:T.findIndex((function(t,e){return(null===t||void 0===t?void 0:t.skuName)===g})))&&h.jobPost.list.push({category:U,packSize:L,checked:!0,gradeList:S,slot:P,skuUuid:x,skuNumber:j,skuName:g,warehouseId:r,unitOfMeassures:I,totalQty:k,photo:y,poList:[{wmsPoSkuCode:N,skuUuid:x,inboundDate:m,initialWeight:k,uom:I,expiryDate:l,supplierId:w,supplierName:O,codeGrade:v,inboundQty:b,totalPack:L,packSize:L,category:U,itemList:[{qty:k,grade:M,ripeness:{label:d,value:d},expiryDate:l,expiryDateText:Object(p.a)({date:l})}]}]}),E>=0&&(h.jobPost.list[E].totalQty+=k,h.jobPost.list[E].poList.push({wmsPoSkuCode:N,skuUuid:x,inboundDate:m,initialWeight:k,uom:I,expiryDate:l,supplierId:w,supplierName:O,codeGrade:v,inboundQty:b,totalPack:L,category:U,itemList:[{qty:k,grade:M,ripeness:{label:d,value:d},expiryDate:l,expiryDateText:Object(p.a)({date:l})}]}))),(null===h||void 0===h||null===(i=h.jobPost)||void 0===i||null===(c=i.list)||void 0===c?void 0:c.length)||h.jobPost.list.push({checked:!0,category:U,packSize:L,gradeList:S,skuUuid:x,skuNumber:j,skuName:g,warehouseId:r,unitOfMeassures:I,totalQty:k,photo:y,poList:[{wmsPoSkuCode:N,skuUuid:x,inboundDate:m,initialWeight:k,uom:I,expiryDate:l,supplierId:w,supplierName:O,codeGrade:v,inboundQty:b,totalPack:L,category:U,itemList:[{qty:k,grade:M,ripeness:{label:d,value:d},expiryDate:l,expiryDateText:Object(p.a)({date:l})}]}]});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=19,Promise.all(k);case 19:return t.next=21,u(h);case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(1),console.log(t.t0);case 26:case"end":return t.stop()}}),t,null,[[1,23]])})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u,i,c,l,f,m,b,h,k,y,g,x,j,w,O,L;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.stockMovementTargetRepack,n=e.targetRepack,r=e.moduleName,o=e.zeroQuantity,u=e.singleView,i=e.module,c=e.setModule,l=e.dispatch,f=e.desc,m=e.warehouseUuid,b=e.areaId,h=e.areaIdDestination,k=e.transaction,t.prev=1,g="",f.length>0&&(g="&desc=".concat(f)),0===f.length&&(g="&desc="),m&&(g+="&warehouseUuid=".concat(m)),b&&(g+="&areaId=".concat(null===b||void 0===b?void 0:b.value)),"waste"===k&&(g+="&transaction=".concat(k)),"movement"===h&&(g+="&areaId=".concat(null===h||void 0===h?void 0:h.value)),"stockMovement"===r&&a&&(g+="&haveTargetMovement=".concat(a)),"repack"===r&&n&&(g+="&haveTargetRepack=".concat(n)),x="oss/skus? ".concat(g),l({type:v.c,isLoading:!0}),c(O),t.next=16,d()(x);case 16:j=t.sent,w=j.data,j.status,O=[],L=null===i||void 0===i||null===(y=i.jobPost)||void 0===y?void 0:y.list,(null===w||void 0===w?void 0:w.data)||l({type:v.c,isLoading:!1}),null===w||void 0===w?void 0:w.data.map((function(t){if(Object(p.e)(t.totalQty),Object(p.e)(t.totalQty)<=0&&o&&"stockTake"===r){var e,a,n=null===L||void 0===L?void 0:L.filter((function(e){return e.skuUuid===t.skuUuid}));u&&(n=[]),O.push({targetMovementProgress:(null===(e=t.targetMovementProgress)||void 0===e?void 0:e.length)?t.targetMovementProgress:[],checked:(null===(a=n)||void 0===a?void 0:a.length)>0,gradeList:t.gradeList,photo:t.photo,poList:t.poList,packSize:t.packSize,category:t.category,skuName:t.skuName,skuNumber:parseInt(t.skuNumber),skuUuid:t.skuUuid,totalQty:Object(p.e)(t.totalQty),unitOfMeassures:t.unitOfMeassures,warehouseId:t.warehouseId,originalUom:t.originalUom})}if(Object(p.e)(t.totalQty)>0&&("stockTake"!==r||!o)){var s,i,c=null===L||void 0===L?void 0:L.filter((function(e){return e.skuUuid===t.skuUuid}));u&&(c=[]),O.push({targetMovementProgress:(null===(s=t.targetMovementProgress)||void 0===s?void 0:s.length)?t.targetMovementProgress:[],checked:(null===(i=c)||void 0===i?void 0:i.length)>0,gradeList:t.gradeList,photo:t.photo,poList:t.poList,packSize:t.packSize,category:t.category,skuName:t.skuName,skuNumber:parseInt(t.skuNumber),skuUuid:t.skuUuid,totalQty:Object(p.e)(t.totalQty),unitOfMeassures:t.unitOfMeassures,warehouseId:t.warehouseId,originalUom:t.originalUom})}})),c(O),l({type:v.c,isLoading:!1}),t.next=29;break;case 27:t.prev=27,t.t0=t.catch(1);case 29:case"end":return t.stop()}}),t,null,[[1,27]])})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u,i,c,l,f,m,b,h,k,y,g,x;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.zeroQuantity,n=e.moduleName,r=e.setModule,o=e.dispatch,u=e.desc,i=e.warehouseUuid,c=e.areaId,l=e.selectedSkusNumber,f=e.transaction,m=e.stockMovementTargetRepack,b=e.targetRepack,t.prev=1,h="",u&&(h="&desc=".concat(u)),i&&(h+="&warehouseUuid=".concat(i)),c&&(h+="&areaId=".concat(null===c||void 0===c?void 0:c.value)),"waste"===f&&(h+="&transaction=".concat(f)),"stockMovement"===n&&m&&(h+="&haveTargetMovement=".concat(m)),"repack"===n&&b&&(h+="&haveTargetRepack=".concat(b)),k="oss/skus? ".concat(h),o({type:v.c,isLoading:!0}),r(x),t.next=14,d()(k);case 14:y=t.sent,g=y.data,y.status,x=[],null===g||void 0===g?void 0:g.data.map((function(t,e){if(l.includes(parseInt(t.skuNumber)))return!1;var r;(Object(p.e)(t.totalQty),Object(p.e)(t.totalQty)<=0&&a&&"stockTake"===n)&&x.push({targetMovement:(null===(r=t.targetMovementProgress)||void 0===r?void 0:r.length)?t.targetMovementProgress:[],gradeList:t.gradeList,photo:t.photo,poList:t.poList,packSize:t.packSize,category:t.category,skuName:t.skuName,skuNumber:parseInt(t.skuNumber),skuUuid:t.skuUuid,totalQty:Object(p.e)(t.totalQty),unitOfMeassures:t.unitOfMeassures,warehouseId:t.warehouseId,originalUom:t.originalUom});if(Object(p.e)(t.totalQty)>0&&("stockTake"!==n||!a)){var o,u={targetMovement:(null===(o=t.targetMovementProgress)||void 0===o?void 0:o.length)?t.targetMovementProgress:[],checked:t.checked,gradeList:t.gradeList,photo:t.photo,poList:t.poList,skuName:t.skuName,skuNumber:parseInt(t.skuNumber),packSize:t.packSize,category:t.category,skuUuid:t.skuUuid,totalQty:Object(p.e)(t.totalQty),unitOfMeassures:t.unitOfMeassures,warehouseId:t.warehouseId,originalUom:t.originalUom};x.push(u)}})),r(x),o({type:v.c,isLoading:!1}),t.next=25;break;case 23:t.prev=23,t.t0=t.catch(1);case 25:case"end":return t.stop()}}),t,null,[[1,23]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,u,c,l,m,b,h,k,y,g,x,j,w;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.dispatch,n=e.moduleName,u=e.isExist,c=e.ripeness,!u){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,a({type:v.g,isLoading:!0}),h="".concat(n.toLowerCase(),"/unfinishedEntries"),t.next=8,d()(h);case 8:if(k=t.sent,y=k.data,0!==(null===(l=y.data)||void 0===l?void 0:l.length)&&y.data[0].list&&0!==(null===(m=y.data[0])||void 0===m||null===(b=m.list)||void 0===b?void 0:b.length)){t.next=13;break}return a(Object(o.a)({type:v.g,isLoading:!1},"".concat(n,"FirstLoad"),!0)),t.abrupt("return");case 13:if(g={jobPost:Object(r.a)({},y.data[0])},x=[],!y){t.next=22;break}return w=g.jobPost.list.map(function(){var t=Object(i.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.checked=!0,"outbound"!==n){t.next=5;break}return t.next=4,Object(f.b)({dispatch:a});case 4:e.outboundTypeList=t.sent;case 5:if("stockTake"!==n){t.next=9;break}return t.next=8,Object(f.a)({skuId:e.skuUuid,dispatch:a});case 8:e.gradeList=t.sent;case 9:if("repack"!==n){t.next=13;break}return t.next=12,Object(f.a)({skuId:e.skuUuid,dispatch:a});case 12:e.gradeList=t.sent;case 13:if("waste"!==n){t.next=17;break}return t.next=16,Object(f.a)({skuId:e.skuUuid,dispatch:a});case 16:e.gradeList=t.sent;case 17:if("stockMovement"!==n){t.next=21;break}return t.next=20,Object(f.a)({skuId:e.skuUuid,dispatch:a});case 20:e.gradeList=t.sent;case 21:e.poList.map((function(t){t.category=e.category,t.skuUuid=e.skuUuid,t.uom=e.unitOfMeassures,t.ripenessLevel=0;var a=(e.unitOfMeassures,parseFloat(t.initialWeight));t.initialWeight=a;var r=0;return t.edited=t.itemList.length>0,t.itemList.map((function(a){return a.expiryDate=null===t||void 0===t?void 0:t.expiryDate,a.expiryDateText=Object(p.a)({date:null===t||void 0===t?void 0:t.expiryDate}),"stockTake"===n&&(a.ripeness=c.filter((function(t){var e;return(null===t||void 0===t?void 0:t.value)===(null===a||void 0===a||null===(e=a.ripeness)||void 0===e?void 0:e.value)})),a.ripeness=a.ripeness[0],a.grade=e.gradeList.filter((function(t){var e;return(null===t||void 0===t?void 0:t.value)===(null===a||void 0===a||null===(e=a.grade)||void 0===e?void 0:e.value)})),a.grade=a.grade[0]),"repack"===n&&(a.grade=e.gradeList.filter((function(t){var e;return(null===t||void 0===t?void 0:t.value)===(null===a||void 0===a||null===(e=a.grade)||void 0===e?void 0:e.value)})),a.grade=a.grade[0]),"outbound"===n&&(a.outboundType=e.outboundTypeList.filter((function(t){var e;return(null===t||void 0===t?void 0:t.value)===(null===a||void 0===a||null===(e=a.outboundType)||void 0===e?void 0:e.value)})),a.outboundType=a.outboundType[0]),"gram"===e.unitOfMeassures&&"kg"===e.unitOfMeassures||isNaN(a.qty)||(r+=parseInt(a.qty)),a})),t.initialWeightUpdate=t.inboundQty-r<=0?0:t.inboundQty-r,r>=t.inboundQty?t.initialWeightOver=r:t.initialWeightOver=0,t})),x.push(e);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=19,Promise.all(w);case 19:t.sent,g.jobPost.list=x,a((j={type:v.b},Object(o.a)(j,"".concat(n,"EntryData"),g),Object(o.a)(j,"isLoading",!1),Object(o.a)(j,"".concat(n,"FirstLoad"),!0),j));case 22:t.next=28;break;case 24:t.prev=24,t.t0=t.catch(3),a(Object(o.a)({type:v.k},"".concat(n,"FirstLoad"),!0)),console.log(t.t0);case 28:case"end":return t.stop()}}),t,null,[[3,24]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.skuId,n=e.warehouseId,r=e.uom,o="repack/totalWeightBySku?warehouseUuid=".concat(n,"&skuId=").concat(a,"&uom=").concat(r),t.next=4,d()(o);case 4:if(!(u=t.sent).data){t.next=7;break}return t.abrupt("return",u.data);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,u,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.id,n=e.moduleName,r=e.dispatch,u=e.setDiscard,0!==a){t.next=5;break}return r(Object(o.a)({type:v.b},"".concat(n,"EntryData"),null)),"function"===typeof u&&u(!1),t.abrupt("return",!0);case 5:return t.prev=5,i="".concat(n.toLowerCase(),"/discard?jobId=").concat(a),t.next=9,d()(i);case 9:return c=t.sent,c.data,r(Object(o.a)({type:v.b},"".concat(n,"EntryData"),null)),"function"===typeof u&&u(!1),t.abrupt("return",!0);case 16:return t.prev=16,t.t0=t.catch(5),t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u,i,c,l,p,v,f,m;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.skuId,n=e.warehouseUuid,r=e.areaId,o=e.dispatch,u=e.moduleName,i=e.zeroQuantity,t.prev=1,v="".concat(null===u||void 0===u?void 0:u.toLowerCase(),"/poBySkuId?skuId=").concat(a,"&warehouseUuid=").concat(n,"&areaId=").concat(r,"&zeroQuantity=").concat(i),t.next=5,d()(v);case 5:if(f=t.sent,(null===(m=f.data)||void 0===m||null===(c=m.data)||void 0===c||null===(l=c.poItems)||void 0===l?void 0:l.length)||o({type:"STATUS",status:{code:500,message:"There is no PO"}}),"stockMovement"!==u){t.next=10;break}return t.abrupt("return",{poItems:null===m||void 0===m?void 0:m.data.poItems,targetMovements:null===m||void 0===m?void 0:m.data.targetMovements});case 10:return t.abrupt("return",null===m||void 0===m||null===(p=m.data)||void 0===p?void 0:p.poItems);case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return");case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.dispatch,n=e.skuData,r=e.status,o=e.bulk,u=void 0===o||o,!1!==r&&null!==r&&null!==n||!0!==u){t.next=3;break}return t.abrupt("return",0);case 3:return t.prev=3,"/stocktake/rowValidationUpload",t.next=7,d()({method:"post",url:"/stocktake/rowValidationUpload",data:{data:n}}).then((function(t){if(!0!==u)return null===t||void 0===t?void 0:t.data.data;a({type:v.n,skuCodeValidated:null===t||void 0===t?void 0:t.data.data})}));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.dispatch,n=e.skuNumberData,r=e.bulk,o=void 0===r||r,!1!==(u=e.status)&&null!==u&&null!==n||!0!==o){t.next=3;break}return t.abrupt("return",0);case 3:return t.prev=3,"/oss/skuByNumbers",t.next=7,d()({method:"post",url:"/oss/skuByNumbers",data:{skuList:n}}).then((function(t){if(!0!==o)return null===t||void 0===t?void 0:t.data.data;a({type:v.n,skuNumberValidated:null===t||void 0===t?void 0:t.data.data})}));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dispatch,n=e.dataCsv,r=e.setSubmitStatus,o=e.transaction,u=null,"stockTake"==o?u="/stocktake/submit":"movement"==o?u="/stockmovement/submit":"additionalOutbound"==o?u="/outbound/submit":"repacking"==o?u="/repack/submit":"waste"==o&&(u="/waste/submit"),t.prev=3,t.next=6,d()({method:"post",url:u,data:{source:"upload",jobPost:n[0]}}).then((function(t){var e,n;return!0===(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.isSuccess)?(a({type:v.k,status:200}),r("success")):!1===(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.isSuccess)?(a({type:v.k,status:200}),r("failed")):r(!1),null===t||void 0===t?void 0:t.data}));case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(3),r(!1),t.abrupt("return","error");case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=Object(i.a)(s.a.mark((function t(e){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dispatch,a=e.dataCsv,e.setSubmitStatus,e.transaction,"/stocktransfer/submit",t.next=4,d()({method:"post",url:"/stocktransfer/submit",data:{source:"upload",jobPost:a[0]}}).then((function(t){return null===t||void 0===t?void 0:t.data})).catch((function(t){var e;return null===t||void 0===t||null===(e=t.response)||void 0===e?void 0:e.data}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dispatch,n=e.data,r=e.setSubmitStatus,"/repack/target_repacks/save",t.prev=2,t.next=5,d()({method:"post",url:"/repack/target_repacks/save",data:{data:n}}).then((function(t){var e,n;return!0===(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.isSuccess)?(a({type:v.k,status:200}),r("success")):!1===(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.isSuccess)?(a({type:v.k,status:200}),r("failed")):r(!1),null===t||void 0===t?void 0:t.data}));case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t.catch(2),r(!1),t.abrupt("return","error");case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,u,i,c,l,f,m,b,h;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.moduleEntry,n=e.moduleName,u=e.setIsSuccess,i=e.dispatch,c=e.name,e.table,t.prev=1,l=Object.assign({},JSON.parse(JSON.stringify(a))),i({type:v.g,isLoading:!0}),f="".concat(n.toLowerCase()).concat("submit"===c?"/submit":"/save"),t.next=7,d.a.post(f,l);case 7:return m=t.sent,m.status,0===(null===(b=m.data)||void 0===b?void 0:b.length)&&(u({success:!0,name:c,status:500}),i({type:v.g,isLoading:!1})),h=Object(r.a)({},l),"submit"===c?(u({success:!0,name:c,status:200}),i({type:v.g,isLoading:!1})):(h.jobPost.id=b.data.id,i(Object(o.a)({type:v.b},"".concat(n,"EntryData"),h)),u({success:!0,name:c,status:200}),i({type:v.g,isLoading:!1})),t.abrupt("return",!0);case 16:return t.prev=16,t.t0=t.catch(1),console.log(t.t0),Object(p.i)(t.t0),u({success:!0,name:null,status:500,isLoading:!1}),t.abrupt("return",!1);case 22:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u,i,c,p,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.e,n=e.dispatch,t.prev=1,n({type:v.g,isLoading:!0}),r=a.target.files[0],o={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"jpeg"},t.next=7,Object(l.a)(r,o);case 7:return u=t.sent,i=new File([u],u.name),(c=new FormData).append("files",i),"waste/uploadImages",t.next=14,d.a.post("waste/uploadImages",c);case 14:return p=t.sent,f=p.data,n({type:v.g,isLoading:!1}),t.abrupt("return",f.data[0]);case 20:t.prev=20,t.t0=t.catch(1),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[1,20]])})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o,u,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.warehouseUuid,n=e.setAreaId,t.prev=1,r="inventory/wasteArea?warehouseUuid=".concat(a),t.next=5,d()(r);case 5:return o=t.sent,u=o.data,(i=null===u||void 0===u?void 0:u.data.map((function(t){return{label:t.areaName,value:t.id}})))&&n(i[0]),t.abrupt("return",i[0]);case 12:return t.prev=12,t.t0=t.catch(1),t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dispatch,t.prev=1,"/oss/warehouses",t.next=5,d()("/oss/warehouses");case 5:n=t.sent,r=n.data,a({type:"DATA_WAREHOUSE",data:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,r,o,u,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dispatch,"inventory/getLastHistories",t.next=4,d()("inventory/getLastHistories");case 4:(r=t.sent)&&(i=Object(n.a)(null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.data),i=null===(u=i)||void 0===u?void 0:u.map((function(t){return t.updatedAt=Object(p.b)({date:t.updatedAt}),t})),a({type:v.g,lastSyncHistories:i}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=Object(i.a)(s.a.mark((function t(e){var a,n,r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.warehouseUuid,n=e.setSubmit,r="/inventory/syncAllHistories?warehouseUuid=".concat(a),t.next=4,d.a.post(r);case 4:o=t.sent,n(o),console.log(o);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},664:function(t,e,a){"use strict";a.d(e,"l",(function(){return d})),a.d(e,"a",(function(){return l})),a.d(e,"f",(function(){return p})),a.d(e,"s",(function(){return v})),a.d(e,"q",(function(){return f})),a.d(e,"g",(function(){return m})),a.d(e,"r",(function(){return b})),a.d(e,"b",(function(){return h})),a.d(e,"k",(function(){return k})),a.d(e,"h",(function(){return y})),a.d(e,"p",(function(){return g})),a.d(e,"i",(function(){return x})),a.d(e,"j",(function(){return j})),a.d(e,"m",(function(){return w})),a.d(e,"c",(function(){return O})),a.d(e,"d",(function(){return L})),a.d(e,"n",(function(){return I})),a.d(e,"e",(function(){return N})),a.d(e,"t",(function(){return P})),a.d(e,"o",(function(){return U}));var n=a(65),r=a.n(n),o=a(71),u=a(4),s=a(91),i=a(21),c=a(662),d=function(t){var e=t.moduleEntry,a=0;return e&&e.jobPost.list.map((function(t){t.checked&&(a+=1)})),a},l=function(){var t=Object(s.a)(r.a.mark((function t(e){var a,n,s,c,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.dispatch,n=e.moduleEntry,s=e.moduleSummary,c=e.moduleName,d=Object(u.a)({},s),n.map((function(t){d.jobPost.list.push(t)})),a(Object(o.a)({type:i.b},"".concat(c,"EntryData"),d.jobPost.list.length>0?d:null));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(t){var e,a=t.data,n=!1;null===a||void 0===a||null===(e=a.poList)||void 0===e||e.map((function(t){t.edited&&(n=!0)}));return n},v=function(t){var e=t.moduleEntry,a=t.activeSku,n=0;return e&&e.jobPost.list[a].poList.map((function(t){t.itemList.map((function(t){var e=Number.isInteger(t.qty)?parseInt(t.qty):Number.parseFloat(t.qty?t.qty:0);n+=e}))})),n=Number.isInteger(n)?n:Number.parseFloat(n).toFixed(2)},f=function(t){var e=t.moduleEntry,a=t.activeSku,n=0;return e&&e.jobPost.list[a].poList.map((function(t){t.itemList.map((function(t){var e=Number.isInteger(t.pack)?parseInt(t.pack):Number.parseFloat(t.pack?t.pack:0);n+=e}))})),n=Number.isInteger(n)?n:Number.parseFloat(n).toFixed(2)},m=function(t){var e,a,n=t.moduleEntry,r=!1;null===n||void 0===n||null===(e=n.jobPost)||void 0===e||null===(a=e.list)||void 0===a||a.map((function(t){p({data:t})&&(r=!0)}));return r},b=function(t){return t?Number.isInteger(t)?t:Number.parseFloat(t).toFixed(2):0},h=function(t){var e=!1;return t.poList.map((function(t){t.itemList.map((function(t){(t.qtyIsEmpty||t.noteIsEmpty||t.outboundTypeIsEmpty||t.ripenessIsEmpty||t.gradeIsEmpty||t.packIsEmpty)&&(e=!0)}))})),e},k=function(t){var e=t.isLoading,a=t.summaryData;return!(void 0===a?null:a)&&!e||!e},y=function(t){var e=t.dispatch,a=t.moduleEntry,n=t.moduleName,r=t.idx,s=t.checked,c=Object(u.a)({},a);c.jobPost.list[r].checked=s,e(Object(o.a)({type:i.b},"".concat(n,"EntryData"),c))},g=function(t){var e=t.moduleList,a=0;return e&&e.map((function(t){var e=Number.isInteger(t.qty)?parseInt(t.qty):Number.parseFloat(t.qty?t.qty:0);a+=e})),a=Number.isInteger(a)?a:Number.parseFloat(a).toFixed(2)},x=function(){var t=Object(s.a)(r.a.mark((function t(e){var a,n,s,d,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.dispatch,n=e.moduleEntry,s=e.moduleName,d=Object(u.a)({},n),l=n.jobPost.list.filter((function(t){if(t.checked)return t})),d.jobPost.list=l,a(Object(o.a)({type:i.b},"".concat(s,"EntryData"),d)),0===l.length&&Object(c.l)({id:d.jobPost.id,moduleName:s,dispatch:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(t){var e=t.dispatch,a=t.moduleSummary,n=t.moduleName,r=Object(u.a)({},a);r.jobPost.list.map((function(t){t.checked=!0})),e(Object(o.a)({type:i.b},"".concat(n,"EntryData"),r))},w=function(t){var e=t.dispatch,a=t.selected;a&&e({type:i.j,areaId:a})},O=function(t){var e=t.activeSku,a=t.moduleEntry,n=t.poListIdx,r=t.entryListIdx,o=parseInt(0);return a.jobPost.list[e].poList[n].itemList.map((function(t,e){e!==r&&(o+=Number.isInteger(null===t||void 0===t?void 0:t.qty)?null===t||void 0===t?void 0:t.qty:parseFloat(null===t||void 0===t?void 0:t.qty))})),o},L=function(t){var e=t.dispatch,a=t.moduleEntry,n=t.moduleName,r=t.activeSku,s=t.poListIdx,c=t.entryListIdx,d=(t.e,t.countQty),l=Object(u.a)({},a),p=d({moduleEntry:a,activeSku:r,poListIdx:s,entryListIdx:c}),v=l.jobPost.list[r].poList[s].initialWeight;l.jobPost.list[r].poList[s].initialWeightScreenUpdate=v-p,l.jobPost.list[r].poList[s].itemList.splice(c,1),0===l.jobPost.list[r].poList[s].itemList.length&&(l.jobPost.list[r].poList[s].edited=!1),e(Object(o.a)({type:i.b},"".concat(n,"EntryData"),l))},I=function(t){var e,a,n=t.moduleName,r=t.search,o=t.updateList,u=t.dispatch,s=t.zeroQuantity,i=t.stockMovementTargetRepack,c=t.isMovement;c||(0,(e={dispatch:u,zeroQuantity:s}).dispatch)({type:"SET_ZERO_QUANTITY",data:!e.zeroQuantity}),c&&(0,(a={dispatch:u,stockMovementTargetRepack:i}).dispatch)({type:"SET_MOVEMENT_TARGET_REPACK",data:!a.stockMovementTargetRepack}),r&&o(!s,!i,n)},N=function(t,e,a,n,r,u){var s,i,c=document.documentElement.clientWidth<=500?100:"auto",d=null===e||void 0===e?void 0:e.map((function(t){return t.value})),l=null===t||void 0===t?void 0:t.map((function(t,r){if(d.includes(t.skuUuid)){var s=null;e.map((function(e){e.value===t.skuUuid&&(s=e.label)}));var i=(u?null===t||void 0===t?void 0:t.totalMove:null===t||void 0===t?void 0:t.totalPack)+(u?function(t){var e=t.activeSku,a=t.moduleEntry,n=t.grade,r=(t.slot,0);return a.jobPost.list[e].poList.map((function(t){t.itemList.map((function(t){(null===t||void 0===t?void 0:t.qty)&&t.grade.label===n&&(r+=null===t||void 0===t?void 0:t.qty)}))})),r}({activeSku:a,moduleEntry:n,grade:s,slot:null===t||void 0===t?void 0:t.slot}):function(t){var e=t.activeSku,a=t.moduleEntry,n=t.grade,r=t.slot,o=0;return a.jobPost.list[e].poList[0].itemList.map((function(t){var e;(null===t||void 0===t?void 0:t.pack)&&t.grade.label===n&&(null===(e=t.slot)||void 0===e?void 0:e.value)==r&&(o+=null===t||void 0===t?void 0:t.pack)})),o}({activeSku:a,moduleEntry:n,grade:s,slot:null===t||void 0===t?void 0:t.slot})),c=t.targetUom,l=t.targetUos,p=i/(u?l:c)*100;return Object(o.a)({warehouse:t.warehouse,skuUuid:t.skuUuid,skuName:t.skuName,targetDate:t.targetDate,targetUom:t.targetUom,targetUos:t.targetUos,slot:t.slot,totalPack:i,totalMove:t.totalMove,no:r+1,grade:s},u?"%Moved":"%Repack","".concat(null===p||void 0===p?void 0:p.toFixed(2),"%"))}}));if(l=null===(s=l)||void 0===s?void 0:s.filter((function(t){return void 0!==t})),null===r||void 0===r?void 0:r.length){var p=r.map((function(t){return Number.parseInt(null===t||void 0===t?void 0:t.value)}));p.includes(null)||(l=l.filter((function(t){return p.includes(Number.parseInt(t.slot))})))}return(l=null===(i=l)||void 0===i?void 0:i.map((function(t,e){return t.no=e+1,t})))||(l=[]),{data:l,columns:u?[{Header:"Grade",placeholder:"Grade",accessor:"grade",width:300},{Header:"Total Movement",placeholder:"Total Movement",accessor:"totalPack",width:c,style:{textAlign:"right !important",display:"flex",justifyContent:"flex-end"},className:"flex-end !important",headerClassName:"flex-end !important"},{Header:"Target Movement",placeholder:"Target Movement",accessor:"targetUos",width:c,style:{textAlign:"right !important",display:"flex",justifyContent:"flex-end"},className:"flex-adjust",headerClassName:"flex-adjust"},{Header:"%Moved",placeholder:"%Moved",accessor:"%Moved",width:c,style:{textAlign:"right",display:"flex",justifyContent:"flex-end"}}]:[{Header:"Slot",placeholder:"Slot",accessor:"slot",width:70,style:{textAlign:"left",display:"end",justifyContent:"flex-end"}},{Header:"Grade",placeholder:"Grade",accessor:"grade",width:300},{Header:"Total Pack",placeholder:"Total Pack",accessor:"totalPack",style:{textAlign:"right",display:"flex",justifyContent:"flex-end"},width:c},{Header:"Target Pack",placeholder:"Target Pack",accessor:"targetUom",width:c,style:{textAlign:"right !important",display:"flex",justifyContent:"flex-end"},className:"flex-adjust",headerClassName:"flex-adjust"},{Header:"%Repack",placeholder:"%Repack",accessor:"%Repack",width:c,style:{textAlign:"right",display:"flex",justifyContent:"flex-end"}}]}},P=function(t){t.data,t.targetRepacks,t.activeSku,t.dispatch},U=function(t){var e=t.moduleEntry,a=t.dispatch,n=[];e.jobPost.list.map((function(t){var e;(null===(e=t.poList[0].targetRepacks)||void 0===e?void 0:e.length)&&(n=n.concat(t.poList[0].targetRepacks))})),a({type:"IS_LOADING",targetRepacks:n})}},670:function(t,e,a){"use strict";a.d(e,"e",(function(){return d})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return p})),a.d(e,"b",(function(){return v})),a.d(e,"d",(function(){return f}));var n=a(836),r=a(65),o=a.n(r),u=a(91),s=a(47),i=a.n(s),c=a(21),d=function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n,r,u,s,d,l,p;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.warehouseUuid,n=e.dispatch,r=e.type,u=void 0===r?"dropdown":r,t.prev=1,s="/inventory/warehouseArea?warehouseUuid=".concat(a),t.next=5,i()(s);case 5:if(d=t.sent,l=d.data,p=void 0===l?null:l,"csvValidator"!=u){t.next=12;break}n({type:c.o,warehouseAreaCsv:null===p||void 0===p?void 0:p.data.map((function(t){return{label:null===t||void 0===t?void 0:t.areaName,value:null===t||void 0===t?void 0:t.id}}))}),t.next=13;break;case 12:return t.abrupt("return",null===p||void 0===p?void 0:p.data.map((function(t){return{label:null===t||void 0===t?void 0:t.areaName,value:null===t||void 0===t?void 0:t.id}})));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n,r,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dispatch,t.prev=1,"/inventory/ripenessLevel",t.next=5,i()("/inventory/ripenessLevel");case 5:return n=t.sent,r=n.data,u=null===r||void 0===r?void 0:r.data.map((function(t,e){return{label:t,value:String(t)}})),a({type:c.i,ripenessLevel:u}),t.abrupt("return",u);case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n,r,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.skuId,e.dispatch,t.prev=1,n="/inventory/grade?skuId=".concat(a),t.next=5,i()(n);case 5:if(r=t.sent,!(u=r.data)){t.next=9;break}return t.abrupt("return",u.data.map((function(t){return{label:t.skuDescription,value:t.id,multiplier:t.parentToChildMultiplier,uom:t.uom}})));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n,r,u,s,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.type,n=void 0===a?"dropdown":a,r=e.dispatch,t.prev=1,"/inventory/outboundType",t.next=5,i()("/inventory/outboundType");case 5:return u=t.sent,s=u.data,d=[],s&&("csvValidator"==n?r({type:c.h,outboundTypeCsv:null===s||void 0===s?void 0:s.data.map((function(t){return{label:t.description,value:t.code}}))}):d=s.data.map((function(t){return{label:t.description,value:t.code}}))),t.abrupt("return",d);case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(u.a)(o.a.mark((function t(e){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(n.a)(e),t.prev=1,"/oss/warehouses",t.next=5,i()("/oss/warehouses");case 5:if(a=t.sent,!(r=a.data)){t.next=9;break}return t.abrupt("return",null===r||void 0===r?void 0:r.data.map((function(t){return{label:t.name,value:t.id}})));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=14.a1ed85cb.chunk.js.map