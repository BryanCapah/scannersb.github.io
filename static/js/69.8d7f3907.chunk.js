(this["webpackJsonp@coreui/coreui-pro-react-admin-template"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template"]||[]).push([[69],{1210:function(e,t,n){"use strict";n.r(t);var a=n(659),o=n(1),i=n.n(o),r=n(20),u=n(56),l=n(19),s=n(665),c=n(678),d=n(663),m=n(670),p=n(680),v=n.n(p),b=(n(728),n(777)),y=n(662),h=n(666),f=n(724),g=n(692),E=n(676);t.default=Object(r.i)((function(e){var t,n,p,k,x=Object(u.c)(),w=Object(r.g)(),N=Object(E.c)(400),j=N.height,O=N.emptyItem,U=Object(E.a)({dispatch:x}),I=U.moduleName,D=U.thereAreRequest,L=U.moduleFirstLoad,S=U.warehouseUuid,P=U.status,C=U.isLoading,q=U.outboundEntryData,A=U.outboundAddSku,B=U.summary,T=U.setSummary,W=U.localEntryData,H=U.setLocalEntryData,K=U.next,F=U.setNext,M=U.area,V=U.areaId,z=U.setAreaId,J=U.search,R=U.setSearch,G=U.discard,Q=U.setDiscard,X=U.isCheckedTotal;!1===A&&(null===q||void 0===q?void 0:q.jobPost.list.length)>0&&K&&e.history.push("/inventory-entry/additional-outbound/weight-entry");var Y=Object(o.useState)(),Z=Object(a.a)(Y,2),$=Z[0],_=Z[1],ee=X>1?"s":"",te=(null===B||void 0===B?void 0:B.length)?"flex-column":"flex-row",ne=0===D&&W&&(null===W||void 0===W||null===(t=W.jobPost)||void 0===t||null===(n=t.list)||void 0===n?void 0:n.length)>0;return i.a.createElement("div",{className:"w-100  stock-take-summary"},i.a.createElement(g.a,{discard:G,module:"Inventory Entry - Additional Outbound",moduleEntry:q,close:function(){return Q(!1)},discardEntry:function(e){return Object(d.o)({id:e,moduleName:I,dispatch:x,setDiscard:Q})}}),i.a.createElement(f.a,{discard:G,addSku:A,moduleFirstLoad:L,moduleEntry:q,redirect:function(){return e.history.push("/inventory-entry/additional-outbound/weight-entry")},previousPage:function(){return w.goBack()},setDiscard:function(){return Q(!0)}}),i.a.createElement(h.a,{status:P}),i.a.createElement("div",{className:"px-3 pt-3 bg-white border-all radius-all d-md-flex dd-group"},i.a.createElement("div",{className:"col-lg-3 px-0 stock-take-dropdown"},i.a.createElement(s.a,{show:!0,title:"Select Area",placeholder:"Select Area",options:M,onChangeDropdown:function(e){return z(e)},selectedValue:V,showTitle:!0}))),i.a.createElement("div",{className:"pt-3 pb-0 pl-3 pr-3 bg-white mt-3 border-all radius-all mb-3"},i.a.createElement("div",{className:"d-md-flex d-lg-flex mb-3 justify-content-between"},i.a.createElement("div",{className:"text LatoBold d-flex justify-content-between align-items-center sku-des"},i.a.createElement("div",null,"Enter SKU or Description"," ",i.a.createElement("span",{className:"green"},"(".concat(X," Selected SKU").concat(ee,")"))))),i.a.createElement(c.a,{category:$,setCategory:_,placeholder:"Enter SKU",filter:!1,searchHandler:function(e){return V?Object(d.g)({category:$,dispatch:x,desc:e,warehouseUuid:S,areaId:V,setModule:T,transaction:"additionalOutbound",module:W},R(e)):z("empty")}}),i.a.createElement("div",{className:"mb-3 mt-3 d-flex align-items-center scroll-sku ".concat(te," w-100 text-center"),style:{minHeight:j,maxHeight:j}},(null===B||void 0===B?void 0:B.length)?null===B||void 0===B?void 0:B.map((function(e,t){return i.a.createElement(m.a,{key:t,img:null===e||void 0===e?void 0:e.photo,skuDescription:null===e||void 0===e?void 0:e.skuName,skuNumber:null===e||void 0===e?void 0:e.skuNumber,uomLabel:"weight",uomValue:null===e||void 0===e?void 0:e.totalQty,uom:null===e||void 0===e?void 0:e.unitOfMeassures,isCheckedHandler:function(e){return Object(b.b)({idx:t,checked:e,dispatch:x,setLocalEntryData:H,moduleSummary:B,moduleEntry:W,moduleName:I,warehouseUuid:S,areaId:V})},check:null===e||void 0===e?void 0:e.checked})})):i.a.createElement("div",{className:"w-100 text-center emptyTextField d-flex flex-column align-items-center justify-content-center",style:{minHeight:O,maxHeight:O}},Object(y.r)({isLoading:C,summary:B})?V&&M&&0===(null===B||void 0===B?void 0:B.length)?i.a.createElement("div",null,"Sorry, we couldn't find any matches for '",i.a.createElement("span",{className:"LatoBold"},J),"' in ",V&&(null===V||void 0===V?void 0:V.label)," area.",i.a.createElement("br",null),"Please Try search with another term."):"Enter SKU":i.a.createElement("img",{className:"loading",src:v.a,alt:"loading"})))),i.a.createElement("div",{className:"h-screen-summary-footer d-flex flex-column justify-content-start"},i.a.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between mb-1"},i.a.createElement("button",{tabIndex:"0",onClick:function(){return e.history.push("/inventory-entry/additional-outbound/CSV-upload")},type:"button",className:"btn sku-item px-4 no-shadow border-all bg-white fontSizeButton"},"Upload File"),i.a.createElement("button",{tabIndex:"0",onClick:function(){ne&&(F(!0),x({type:l.b,outboundEntryData:W}),e.history.push("/inventory-entry/additional-outbound/weight-entry"))},type:"button",className:"btn sku-item px-5 fontSizeButton no-shadow text-white ".concat(ne?"bg-green":"bg-lineGrey")},W&&0!==(null===W||void 0===W||null===(p=W.jobPost)||void 0===p||null===(k=p.list)||void 0===k?void 0:k.length)||0!==D?ne?"Next":"Processing...":"Next"))))}))},692:function(e,t,n){"use strict";var a=n(1),o=n.n(a),i=n(661);n(671);t.a=function(e){var t=e.discard,n=e.moduleEntry,a=e.close,r=e.discardEntry,u=e.module;document.documentElement.clientHeight;return o.a.createElement(i.B,{className:t?null:"d-none"},o.a.createElement(i.f,null,o.a.createElement(i.s,{show:t,size:"lg",closeOnBackdrop:!1},o.a.createElement("div",{className:"d-flex flex-row-reverse pr-3 pt-3 mt-1"},o.a.createElement("i",{onClick:function(){return a()},className:"iconU-modalClose"})),o.a.createElement(i.v,{className:"px-5 pb-4 mb-2 pt-4 mt-2 border-none"},o.a.createElement(i.w,{className:"red LatoBold"},"Discard? ",o.a.createElement("span",null,o.a.createElement("i",{className:"em em-astonished"})))),o.a.createElement(i.t,{className:"px-5 pb-5 mb-4 py-0"},o.a.createElement("p",{className:"text mb-3 h5 respon-txt"},"Are you sure you want to discard ",o.a.createElement("span",{className:"green"}," ".concat(null===n||void 0===n?void 0:n.jobPost.list.length," selected SKU ").concat((null===n||void 0===n?void 0:n.jobPost.list.length)>1?"(s)":"")),"from this",o.a.createElement("div",{className:"green h5 pt-2 respon-txt"},u)),o.a.createElement("br",null),o.a.createElement(i.d,{onClick:function(){return r(null===n||void 0===n?void 0:n.jobPost.id)},className:"bg-background text no-shadow pl-5 pr-5 mr-3 LatoBlack"},"Discard"),o.a.createElement(i.d,{onClick:function(){return a()},className:"bg-green no-shadow pl-4 pr-4 LatoBlack"},"Don't Discard")," "))))}},728:function(e,t,n){},777:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return f}));var a=n(4),o=n(65),i=n.n(o),r=n(71),u=n(664),l=n(91),s=n(22),c=n.n(s),d=n(19),m=n(663),p=n(672),v=n(116),b=n(662),y=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a,o,s,v,y,h,f,g,E,k,x,w,N,j,O,U,I,D;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.idx,o=t.checked,s=t.dispatch,v=t.setLocalEntryData,y=t.moduleName,h=t.moduleSummary,f=t.moduleEntry,g=t.warehouseUuid,E=t.areaId,(k=Object(u.a)(h))[a].checked=o,s(Object(r.a)({type:d.c},"".concat(y,"summaryData"),k)),x=null===k||void 0===k?void 0:k.filter((function(e){if(e.checked)return e})),w=[],f&&f.jobPost.list.map((function(e){var t={skuUuid:e.skuUuid};t.skuUuid&&w.push(t.skuUuid)})),N=[],j=x.map(function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.includes(t.skuUuid)){e.next=10;break}return e.next=4,Object(p.c)({});case 4:return a=e.sent,t.outboundTypeList=a,e.next=8,Object(m.f)({skuId:t.skuUuid,warehouseUuid:g,dispatch:s,areaId:E.value,moduleName:y});case 8:(o=e.sent)&&(r=o.map((function(e){var n;e.itemList=[];var a=e.expiryDate?c()(e.expiryDate).valueOf():null,o=e.inboundDate?c()(e.inboundDate).valueOf():null;return e.expiryDate=a,e.inboundDate=o,e.skuUuid=t.skuUuid,e.uom=t.unitOfMeassures,e.category=t.category,e.initialWeight=Number.isInteger(e.initialWeight)?parseInt(e.initialWeight):parseFloat(e.initialWeight),"staging"!==(null===E||void 0===E||null===(n=E.label)||void 0===n?void 0:n.toLowerCase())&&(e.totalPack=null),e})),t.poList=r,N.push(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=11,Promise.all(j);case 11:e.sent,O=[],f&&(O=f.jobPost.list.concat(N)),f||(O=N),(U=k[a]).checked||(O=O.filter((function(e){return e.skuUuid!==U.skuUuid}))),I=null===f||void 0===f||null===(n=f.jobPost)||void 0===n?void 0:n.id,D={jobPost:{id:I||0,warehouseSource:g,warehouseDestination:g,areaSource:parseInt(null===E||void 0===E?void 0:E.value),areaName:null===E||void 0===E?void 0:E.label,areaDestination:parseInt(null===E||void 0===E?void 0:E.value),list:O.sort((function(e,t){return Object(b.f)(e,t)}))}},0===O.length&&s(Object(r.a)({type:d.b},"".concat(y,"EntryData"),null)),v(D);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a,o,r,s,d,b,y,h,f,g,E,k,x,w,N;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.idx,a=t.checked,o=t.dispatch,r=t.moduleName,s=t.moduleSummary,d=t.moduleEntry,b=t.warehouseUuid,y=t.areaId,h=t.preAddHandler,(f=Object(u.a)(s))[n].checked=a,g=null===f||void 0===f?void 0:f.filter((function(e){if(e.checked)return e})),E=[],d&&d.map((function(e){var t={skuUuid:e.skuUuid};t.skuUuid&&E.push(t.skuUuid)})),k=[],x=g.map(function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.includes(t.skuUuid)){e.next=10;break}return e.next=4,Object(p.c)({});case 4:return a=e.sent,t.outboundTypeList=a,e.next=8,Object(m.f)({skuId:t.skuUuid,warehouseUuid:b,dispatch:o,areaId:y.value,moduleName:r});case 8:(u=e.sent)&&(l=u.map((function(e){var n;e.itemList=[];var a=e.expiryDate?c()(e.expiryDate).valueOf():null,o=e.inboundDate?c()(e.inboundDate).valueOf():null;return e.expiryDate=a,e.inboundDate=o,e.skuUuid=t.skuUuid,e.uom=t.unitOfMeassures,e.category=t.category,e.initialWeight=Object(v.e)(e.initialWeight)?Object(v.e)(e.initialWeight):e.initialWeight,"staging"!==(null===y||void 0===y||null===(n=y.label)||void 0===n?void 0:n.toLowerCase())&&(e.totalPack=null),e})),t.poList=l,t.isNewItem=!0,k.push(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=10,Promise.all(x);case 10:e.sent,w=[],d&&(w=d.concat(k)),d||(w=k),(N=f[n]).checked||(w=w.filter((function(e){return e.skuUuid!==N.skuUuid}))),h(w);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=e.setActiveSKU,n=e.moduleEntry,o=e.moduleName,i=e.setConfirmation,u=e.dispatch,l=e.setIsRequired,s=[],c=Object(a.a)({},n),m=n.jobPost.list.map((function(e){return e.poList.map((function(t){var n=t.totalPack,a=Object(b.x)({moduleList:t.itemList});return t.itemList.map((function(o){var i,r,u,l=o.qty,d=(o.grade,o.ripeness,o.reason,o.pack);return isNaN(l)||0==l||""===l||null===l?o.qtyIsEmpty=!0:o.qtyIsEmpty=!1,(null===o||void 0===o||null===(i=o.codeOutbound)||void 0===i?void 0:i.value)?o.outboundTypeIsEmpty=!1:o.outboundTypeIsEmpty=!0,"lainnya"==(null===o||void 0===o||null===(r=o.codeOutbound)||void 0===r?void 0:r.value)&&(""==(null===o||void 0===o?void 0:o.note)||void 0===(null===o||void 0===o?void 0:o.note))?o.noteIsEmpty=!0:o.noteIsEmpty=!1,"staging"!==(null===(u=c.jobPost.areaName)||void 0===u?void 0:u.toLowerCase())||"Fruits"!==(null===e||void 0===e?void 0:e.category)&&"Vegetables"!==(null===e||void 0===e?void 0:e.category)||!d&&n>0&&(o.packIsEmpty=!0),o.qtyIsEmpty||(Number(a)>Number(t.initialWeight)?o.qtyIsEmpty=!0:o.qtyIsEmpty=!1),(null===o||void 0===o?void 0:o.qtyIsEmpty)||(null===o||void 0===o?void 0:o.outboundTypeIsEmpty)||(null===o||void 0===o?void 0:o.noteIsEmpty)||(null===o||void 0===o?void 0:o.packIsEmpty)?s.push(!1):s.push(!0),o})),t})),e}));console.log(s);var p=!1;m.map((function(e){e.poList.map((function(e){e.itemList.map((function(e){e.qty&&(p=!0)}))}))})),c.jobPost.list=m,u(Object(r.a)({type:d.b},"".concat(o,"EntryData"),c)),!s.includes(!1)&&p?"function"===typeof i&&i({show:!0,name:"submit"}):("function"===typeof i&&i({show:!1,name:null}),"function"===typeof l&&l(!0)),Object(b.b)({setActiveSKU:t,moduleEntry:n,moduleName:o})}}}]);
//# sourceMappingURL=69.8d7f3907.chunk.js.map