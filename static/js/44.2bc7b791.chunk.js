(this["webpackJsonp@coreui/coreui-pro-react-admin-template"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template"]||[]).push([[44],{1270:function(e,t,a){"use strict";a.r(t);var n=a(659),o=a(1),s=a.n(o),r=a(56),l=a(20),i=a(676),u=a(674),c=(a(712),a(65)),d=a.n(c),m=a(91),p=a(19),v=a(663),f=a(22),b=a.n(f),h=function(e){var t=e.csvData,a=e.csvField,n=e.isShowErrorOnly,o=e.setIsShowErrorOnly,s=e.setIsHiddenRows,r=e.setCheckingCsv,l=[],i=[];t.map((function(e,t){var n=!0,o=t+1;a.map((function(t,a){var o=t.dataField+"Status";!1===e[o]&&(n=!1)})),!1===n?l.includes(o)||l.push(o):i.includes(o)||i.push(o)}));var u=[];if(!0===n){if((u=i.filter((function(e){return!l.includes(e)}))).length==t.length)return 0}else u=[];s(u),o(!n),r(!0)},y=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,o,s,r,l,i,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.csvData,n=t.dispatch,o=t.setIsSubmitText,s=t.setSubmitStatus,r=t.setMsg1,l=t.setIsShowModal,console.log(a),o("Loading..."),i=null===a||void 0===a?void 0:a.map((function(e,t){return{warehouse:e.warehouseUuid,skuUuid:e.skuUuid,skuName:e.skuDescription,targetDate:b()(e.deliveryDate,"DD-MM-YYYY").format("YYYY-MM-DD"),targetUos:parseFloat(e.uos),targetUom:parseInt(e.uom),slot:parseInt(e.slot)}})),e.next=6,Object(v.w)({data:i,setSubmitStatus:s,dispatch:n});case 6:u=e.sent,l(!1),o("Submit"),(null===u||void 0===u?void 0:u.isSuccess)&&r(null===u||void 0===u?void 0:u.message);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=a(668);t.default=Object(l.i)((function(e){var t=Object(r.c)(),a=Object(r.d)((function(e){return e.csvFileName})),l=Object(r.d)((function(e){return e.csvData})),c=Object(r.d)((function(e){return e.csvField})),d=Object(r.d)((function(e){return e.warehouseAreaCsv})),m=Object(r.d)((function(e){return e.status})),v=Object(r.d)((function(e){return e.warehouseData})),f=s.a.useState(!1),b=Object(n.a)(f,2),g=b[0],k=b[1],E=s.a.useState(null),S=Object(n.a)(E,2),N=S[0],x=S[1],C=s.a.useState(!0),O=Object(n.a)(C,2),D=O[0],T=O[1],U=s.a.useState(!1),I=Object(n.a)(U,2),j=I[0],F=I[1],B=s.a.useState(!1),R=Object(n.a)(B,2),L=R[0],P=R[1],A=s.a.useState(!0),W=Object(n.a)(A,2),M=W[0],V=W[1],K=s.a.useState(!1),q=Object(n.a)(K,2),G=q[0],H=q[1],Y=s.a.useState(null),_=Object(n.a)(Y,2),J=_[0],z=_[1],Q=s.a.useState(null),X=Object(n.a)(Q,2),Z=X[0],$=X[1],ee=s.a.useState(null),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],oe=s.a.useState(null),se=Object(n.a)(oe,2),re=se[0],le=se[1],ie=s.a.useState(null),ue=Object(n.a)(ie,2),ce=ue[0],de=ue[1],me=s.a.useState("Submit"),pe=Object(n.a)(me,2),ve=pe[0],fe=pe[1],be=s.a.useState(null),he=Object(n.a)(be,2),ye=he[0],we=he[1],ge=s.a.useState(null),ke=Object(n.a)(ge,2),Ee=ke[0],Se=ke[1],Ne=s.a.useState([]),xe=Object(n.a)(Ne,2),Ce=xe[0],Oe=xe[1],De=s.a.useState([]),Te=Object(n.a)(De,2),Ue=Te[0],Ie=Te[1];if(console.log("rowwsss",Ue),Object(o.useEffect)((function(){V(!1),function(e){var t=e.csvData,a=e.csvField,n=e.setIsValidate,o=e.setCheckingCsv;if(void 0===t)return 0;var s=!0;t.map((function(e,t){a.map((function(t,a){var n=e[t.dataField+"Status"];"outboundType"==t.dataField&&("LAINNYA"==e[t.dataField].toUpperCase()&&""==e.outboundReason&&(n=!1));!1===n&&(s=!1)}))})),n(!1!==s),o(!1)}({csvData:l,csvField:c,setIsValidate:F,setCheckingCsv:V})}),[M]),Object(o.useEffect)((function(){!function(e){var t=e.selectorCsvData,a=e.setNewCsvData,n=e.setRowDouble,o=(e.dispatch,[]),s={},r=[],l=[];null===t||void 0===t||t.map((function(e,t){o.includes(e.skuNumber)||o.push(e.skuNumber);var a="sku_"+e.skuNumber;if(s[a]){var n=s[a],i=!0;if(n.map((function(t,a){t.deliveryDate==e.deliveryDate&&t.skuNumber==e.skuNumber&&t.slot==e.slot&&t.warehouse==e.warehouse&&(i=!1,l.push(e.id),e.warehouseStatus=!1,e.deliveryDateStatus=!1,e.slotStatus=!1,e.skuNumberStatus=!1,e.warehouseReason="Data Duplicated",e.deliveryDateReason="Data Duplicated",e.slotReason="Data Duplicated",e.skuNumberReason="Data Duplicated")})),i){var u={warehouse:e.warehouse,deliveryDate:e.deliveryDate,skuNumber:e.skuNumber,slot:e.slot};s[a].push(u)}}else{var c={warehouse:e.warehouse,deliveryDate:e.deliveryDate,skuNumber:e.skuNumber,slot:e.slot};s[a]=[c]}console.log("data",e),r.push(e)}));console.log(r),a(r),n(l)}({selectorCsvData:l,dispatch:t,setNewCsvData:Oe,setRowDouble:Ie})}),[l]),Object(o.useEffect)((function(){"success"==G?(z("Success!"),ne("Would you import another file?"),le("Cancel"),de("Import new file"),we("bg-green background"),Se("green"),P(!0)):"failed"==G&&(Se("red"),z("Failed!"),we("bg-red background"),$(a+" failed to upload"),ne("Do you want to retry?"),le("Cancel"),de("Retry"),P(!0))}),[G]),void 0===l||null===l)return e.history.push("/inventory-entry/repacking/upload-target-repack"),0;var je=function(e){!function(e){var t=e.param,a=e.dispatch,n=e.setCheckingCsv;a({type:p.l,csvData:t}),n(!0)}({param:e,dispatch:t,setCheckingCsv:V}),h({csvData:l,csvField:c,isShowErrorOnly:!1,setIsShowErrorOnly:T,setIsHiddenRows:x,setCheckingCsv:V})};return s.a.createElement("div",{className:"w-100 d-flex flex-column stock-take-summary"},s.a.createElement(i.a,{globalData:Ce,columns:c,tableClass:"reviewTable",hiddenRows:N,warehouseArea:d,setCsvDataTmp:function(e){return je(e)},setIsValidate:function(e){return F(e)},dispatch:t,setCheckingCsv:V,warehousesData:v,dataDoubleRow:Ue}),s.a.createElement("div",{className:"row pt-3"},s.a.createElement("div",{className:"col-4"},s.a.createElement("button",{type:"button",className:"btn px-3 mr-3 text no-shadow",style:{backgroundColor:"#fff"},onClick:function(){return h({csvData:Ce,csvField:c,isShowErrorOnly:D,setIsShowErrorOnly:T,setIsHiddenRows:x,setCheckingCsv:V})}},"Show ",D?"Errors Only":"All"),s.a.createElement("button",{type:"button",className:"btn px-3 mr-3  text no-shadow",style:{backgroundColor:"#fff"},onClick:function(){return function(e){var t=e.csvData,a=e.csvField,n=e.dispatch,o=e.setCheckingCsv,s=[];t.map((function(e,t){var n=!0;a.map((function(t,a){var o=t.dataField+"Status";!1===e[o]&&(n=!1)})),!0===n&&s.push(e)})),n({type:p.l,csvData:s}),o(!0)}({csvData:l,csvField:c,dispatch:t,setCheckingCsv:V})}},"Delete Errors Field")),s.a.createElement("div",{className:"col-4",style:{lineHeight:"40px"}},"Review your imported file: ",a," (",l.length||0," Lines)"),s.a.createElement("div",{className:"col-4"},s.a.createElement("button",{type:"button",className:"btn px-5 bg-red text-white no-shadow float-right",onClick:function(){return e.history.goBack()}},"Discard"),s.a.createElement("button",{type:"button",class:"btn px-5 mr-3 text-white no-shadow float-right "+(!0===j&&(null===l||void 0===l?void 0:l.length)>0?"bg-green":"bg-primaryGrey disabled"),onClick:function(){return k(!g)}},"Submit"))),s.a.createElement(w.a,{status:m,onCloseFunction:function(){P(!1),H(!1),e.history.push("/inventory-entry/repacking")},statusDisplay:L,title:J,cancelButtonTitle:re,actionButtonTitle:ce,colorText:Ee,refreshOnCancel:!1,msg1:Z,msg2:ae,cancelButtonClass:null,actionButtonClass:ye+" ml-0",actionButtonEvent:function(){return e.history.push("/inventory-entry/repacking/upload-target-repack")}}),s.a.createElement(u.a,{submit:function(){return y({dispatch:t,csvData:l,setIsShowModal:k,setIsSubmitText:fe,setSubmitStatus:H,setMsg1:$})},submitText:ve,show:g,setIsShowModal:k}))}))},664:function(e,t,a){},668:function(e,t,a){"use strict";var n=a(659),o=a(1),s=a.n(o),r=a(660),l=(a(664),a(56)),i=a(19);t.a=function(e){var t=e.refresh,a=e.status,u=e.icon,c=e.statusDisplay,d=void 0!==c&&c,m=e.title,p=void 0===m?"":m,v=e.cancelButtonTitle,f=void 0===v?"Cancel":v,b=e.actionButtonTitle,h=void 0===b?"Submit":b,y=e.cancelButtonClass,w=void 0===y?"bg-background":y,g=e.actionButtonClass,k=void 0===g?"bg-background":g,E=e.actionButtonEvent,S=void 0===E?null:E,N=e.colorText,x=void 0===N?"red":N,C=e.msg1,O=void 0===C?null:C,D=e.msg2,T=void 0===D?null:D,U=e.onCloseFunction,I=void 0===U?null:U,j=e.refreshOnCancel,F=void 0===j||j,B=e.setIsSuccess,R=Object(l.c)();500===(null===a||void 0===a?void 0:a.code)&&(u="em-pensive",p="Server Error",f="Try Again",h="Contact Administration",x="red",O=null===a||void 0===a?void 0:a.message,T="Please try again or contact Sayurbox administration for further information.",w="bg-green",d=!0,F=!0),408===(null===a||void 0===a?void 0:a.code)&&(u="em-alarm_clock",p="Request Timeout",f="Try Again",h="Contact Administration",x="red",O=null===a||void 0===a?void 0:a.message,T="Please try again or contact Sayurbox administration for further information.",w="bg-green",d=!0,F=!0),400===(null===a||void 0===a?void 0:a.code)&&(u="em-alarm_clock",p="Server Error",f="Try Again",h="Contact Administration",x="red",O=null===a||void 0===a?void 0:a.message,T="Please try again or contact Sayurbox administration for further information.",w="bg-green",d=!0,F=!1),404===(null===a||void 0===a?void 0:a.code)&&(p="Something wrong with the application",f="Try Again",h="Contact Administration",x="red",O=null===a||void 0===a?void 0:a.message,T="Please try again or contact Sayurbox administration for further information.",w="bg-green",d=!0,F=!1);var L=Object(o.useState)(d),P=Object(n.a)(L,2),A=P[0],W=P[1];return Object(o.useEffect)((function(){W(d)}),[d]),Object(o.useEffect)((function(){}),[A]),window.onkeydown=function(e){return 27===e.keyCode?W(!1):null},s.a.createElement(r.B,{className:"".concat(A?null:"d-none")},s.a.createElement(r.f,null,s.a.createElement(r.s,{show:A,closeOnBackdrop:!1,onClose:function(){W(!1),"function"===typeof B&&B({success:null,name:null}),R({type:i.k,status:null}),I&&I()},size:"lg",style:{minHeight:"280px"},bodyOpenClassName:"p-3"},s.a.createElement("div",{className:"d-flex flex-row-reverse"},s.a.createElement("i",{className:"pr-3 pt-3 iconU-modalClose",onClick:function(){W(!1),"function"===typeof B&&B({success:null,name:null}),R({type:i.k,status:null}),I&&I()}})),s.a.createElement(r.v,{className:"px-5 pt-5 border-none"},s.a.createElement(r.w,{className:"text LatoBold ".concat(x)},p," ",s.a.createElement("span",null,s.a.createElement("i",{className:"em ".concat(u)})))),s.a.createElement(r.t,{className:"px-5 py-0"},s.a.createElement("p",{className:"text mb-2"},O),s.a.createElement("p",{className:"text"},T)),s.a.createElement(r.u,{className:"px-5 pb-5 pt-0 justify-content-start border-none"},f?s.a.createElement(r.d,{className:"".concat(w," no-shadow px-5 mt-4 mb-0 mx-0"),onClick:function(){F?"function"===typeof t?t():function(e){var t=e.refresh;!0===(void 0===t||t)&&window.location.reload(!1)}({refresh:!0}):function(e){var t=e.setShow,a=e.parentOncCloseFunction;t(!1),a&&a()}({setShow:W,parentOncCloseFunction:I}),R({type:i.k,status:null})}},f):null,h?s.a.createElement(r.d,{className:"".concat(k," text no-shadow px-5 mt-4 mb-0 ml-3 mr-0"),onClick:function(){S?(S(),W(!1)):W(!1)}},h):null," "))))}},669:function(e,t,a){},674:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return p}));var n=a(659),o=a(1),s=a.n(o),r=a(660),l=(a(669),a(56)),i=a(665),u=a(705),c=function(e){var t=e.e,a=e.state,n=e.isCaptcha,o=e.setIsValidated,s=e.setIsType,r=e.isType,l=e.isValidated,u=e.submit,c=t.key,d=Object(i.a)(r);if("Enter"===c){if(!l)return;u()}if(["ArrowUp","ArrowDown","Tab","Delete"].includes(c))return 0;if("Backspace"===c){var m=Object(i.a)(r);""==m[a]&&1!==a&&(document.getElementById("t"+(parseInt(a)-1)).focus(),document.getElementById("t"+(parseInt(a)-1)).value="",m[a-1]="",d[a-1]=""),console.log(m)}else if("ArrowLeft"===c){if(1!==a)return document.getElementById("t"+(parseInt(a)-1)).focus(),document.getElementById("t"+(parseInt(a)-1)).setSelectionRange(-1,-1),0}else if("ArrowRight"===c){if(3!==a)return document.getElementById("t"+(parseInt(a)+1)).focus(),document.getElementById("t"+(parseInt(a)+1)).setSelectionRange(-1,-1),0}else 3!==a&&document.getElementById("t"+(parseInt(a)+1)).focus();d[a]="Backspace"===c?"":c.toUpperCase();if(!"QWERTYUIOPLKJHGFDSAZXCVBNM1234567890".split("").includes(c.toUpperCase())&&""!=d[a])return 0;document.getElementById("t"+parseInt(a)).value=d[a],s(d);var p=!0;n.map((function(e,t){d[t+1]!=n[t]&&(p=!1),console.log(d[t+1],n[t],p)})),o(p)},d=a(662),m=function(e){var t,a,n,l=e.moduleEntry,i=e.confirmation,c=e.setConfirmation,m=e.save,p=e.submit,v=e.isSuccess,f=e.isLoading,b=e.moveAll,h=e.setAction,y=e.moduleName,w=e.noSkuChecking,g=e.singleViewData,k=document.documentElement.clientHeight-300,E="Submit";"save"===i.name&&(E="Save"),Object(o.useEffect)((function(){v&&c({show:!1,name:null})}),[v]),window.onkeydown=function(e){return 27===e.keyCode?c({show:!1,name:null}):null},Object(o.useEffect)((function(){h(i.name)}),[i]);var S=g&&!b?g:l,N=null===S||void 0===S||null===(t=S.jobPost)||void 0===t?void 0:t.areaDestinationName,x=null===S||void 0===S||null===(a=S.jobPost)||void 0===a?void 0:a.warehouseDestinationName,C=null===S||void 0===S||null===(n=S.jobPost)||void 0===n?void 0:n.areaName,O=function(e,t,a){if(null===e||void 0===e?void 0:e.length){var n=[];e.map((function(e){e.poList.map((function(o){o.itemList.map((function(o){var s,r,l,i,c,d,m=o.qty,p=o.grade,v=Object(u.a)(m)?parseInt(m):m?parseFloat(m):0,f=t?e.skuName:"waste"===a?(null===(s=o.wasteType)||void 0===s?void 0:s.label)?null===(r=o.wasteType)||void 0===r?void 0:r.label:e.skuName:null===p||void 0===p?void 0:p.label,b="waste"===a?"Semi Waste"===(null===(l=o.wasteType)||void 0===l?void 0:l.label)||"Waste"===(null===(i=o.wasteType)||void 0===i?void 0:i.label):"Waste"===(null===p||void 0===p?void 0:p.label)||"Semi Waste"===(null===p||void 0===p?void 0:p.label),h=t?e.unitOfMeassures:"gram"===(null===p||void 0===p?void 0:p.uom)?"kg":null===p||void 0===p?void 0:p.uom,y={sku:f,qty:v,uom:h,wqty:0,swqty:0};b&&(y.qty=0,y.sku=e.skuName),("waste"===a?"Waste"===(null===(c=o.wasteType)||void 0===c?void 0:c.label):"Waste"===(null===p||void 0===p?void 0:p.label))&&(y.wqty=v),("waste"===a?"Semi Waste"===(null===(d=o.wasteType)||void 0===d?void 0:d.label):"Semi Waste"===(null===p||void 0===p?void 0:p.label))&&(y.swqty=v);var w,g,k=n.findIndex((function(t){return(null===t||void 0===t?void 0:t.sku)===(b?e.skuName:f)}));("waste"!==a&&(-1===k&&n.push(y),-1!==k&&(b||(n[k].qty+=v),"Semi Waste"===(null===p||void 0===p?void 0:p.label)&&(n[k].swqty+=v),"Waste"===(null===p||void 0===p?void 0:p.label)&&(n[k].wqty+=v))),"waste"===a)&&(-1===k&&n.push(y),-1!==k&&(b||(n[k].qty+=v),"Semi Waste"===(null===(w=o.wasteType)||void 0===w?void 0:w.label)&&(n[k].swqty+=v),"Waste"===(null===(g=o.wasteType)||void 0===g?void 0:g.label)&&(n[k].wqty+=v)))}))}))}));var o=e.length?e[0].skuName:"No SKU",s=n.findIndex((function(e){return e.sku===o}));return n.forEach((function(e){-1!==s&&("Waste"===e.sku&&(n[s].wqty=e.qty),"Semi Waste"===e.sku&&(n[s].swqty=e.qty))})),n}}(null===S||void 0===S?void 0:S.jobPost.list,w,y);return s.a.createElement(r.B,{className:"modalConfirmation "+(i.show?null:"d-none")},s.a.createElement(r.f,null,s.a.createElement(r.s,{show:i.show,closeOnBackdrop:!1},s.a.createElement(r.v,{className:"px-4 pt-5 border-none"},s.a.createElement(r.w,{className:"text LatoBold"},"Confirmation ",s.a.createElement("span",null,s.a.createElement("i",{className:"em em-pray"}))),s.a.createElement("label",{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&c({show:!1,name:null})},onClick:function(){return c({show:!1,name:null})},className:"sku-item iconU-modalClose"})),s.a.createElement(r.t,{className:"px-4 py-0",style:{minHeight:k}},s.a.createElement("p",{className:"text mb-2"},s.a.createElement("span",null,"Are you sure want to ".concat("Waste"==C?"update":"send"," this Item ")),s.a.createElement("span",{className:" ".concat(N?null:"d-none")}," from"),s.a.createElement("span",{className:"green ".concat(N?null:"d-none")}," ".concat(C," ")),s.a.createElement("span",null,"outbound"==y?"from":"repack"===y?"":"to"," "),s.a.createElement("span",{className:"green ".concat("repack"!==y?null:"d-none")}," ".concat("stockTransfer"===y?x:N||C," "))),s.a.createElement("p",{className:"text"},"Please double check this list, this record will store to database."),s.a.createElement("div",{style:{minHeight:k,maxHeight:k,overflow:"auto",border:"1px solid var(--lineGrey)"}},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",{style:{borderBottom:"1px solid var(--lineGrey)"}},s.a.createElement("th",{style:{color:"var(--emptyTextField)"}},"SKU List"),s.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Weight"),s.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Semi Waste"),s.a.createElement("th",{style:{textAlign:"right",color:"var(--emptyTextField)"}},"Waste"))),s.a.createElement("tbody",null,null===O||void 0===O?void 0:O.map((function(e){return s.a.createElement("tr",{style:{borderBottom:"1px solid var(--lineGrey)"}},s.a.createElement("td",{style:{maxWidth:"160px"}},e.sku),s.a.createElement("td",{className:"text-right py-3",style:{textAlign:"right"}},"".concat(Object(d.B)(null===e||void 0===e?void 0:e.qty))),s.a.createElement("td",{className:"text-right text-nowrap",style:{textAlign:"right"}},s.a.createElement("span",{className:"text-nowrap"},"".concat(Object(d.B)(null===e||void 0===e?void 0:e.swqty)," "))),s.a.createElement("td",{className:"text-right",style:{textAlign:"right"}},"".concat(Object(d.B)(null===e||void 0===e?void 0:e.wqty))))}))))),s.a.createElement("div",{className:"px-0 pb-5 pt-0 justify-content-start border-none"},s.a.createElement(r.d,{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&c({show:!1,name:null})},className:"bg-background sku-item text no-shadow px-5 mt-4 mb-0 mx-0",onClick:function(){return c({show:!1,name:null})}},"Cancel"),s.a.createElement(r.d,{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&(f?null:"save"===i.name?m():p())},className:"".concat(f?"bg-softGreen text":"bg-green text-white"," no-shadow px-5 mt-4 sku-item mb-0 ml-3 mr-0"),onClick:function(){return f?null:"save"===i.name?m():p()}},f?"Processing...":E)," ")))))},p=function(e){for(var t=e.show,a=void 0!==t&&t,i=e.setIsShowModal,u=e.submit,d=e.submitText,m=void 0===d?"Submit":d,p="",v="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",f=v.length,b=[],h=0;h<3;h++){var y=v.charAt(Math.floor(Math.random()*f));p+=y,b.push(y)}var w=Object(l.d)((function(e){return e.csvFileName})),g=s.a.useState(b),k=Object(n.a)(g,2),E=k[0],S=(k[1],s.a.useState(p)),N=Object(n.a)(S,2),x=N[0],C=(N[1],s.a.useState(!1)),O=Object(n.a)(C,2),D=O[0],T=O[1],U=s.a.useState([]),I=Object(n.a)(U,2),j=I[0],F=I[1];return Object(o.useEffect)((function(){!0===a&&(document.getElementById("t1").value="",document.getElementById("t2").value="",document.getElementById("t3").value="")}),[a]),s.a.createElement(r.B,{className:a?null:"d-none"},s.a.createElement(r.f,null,s.a.createElement(r.s,{show:a,onClose:function(){i(!1)},size:"lg",style:{height:"400px"}},s.a.createElement(r.v,{className:"px-5 pt-5 border-none"},s.a.createElement(r.w,{className:"text LatoBold"},"Confirmation")),s.a.createElement(r.t,{className:"px-5 py-0"},s.a.createElement("p",{className:"text mb-2"},"Are you sure want to upload ",s.a.createElement("span",{className:"green"},"Edited")," ",w,"?"),s.a.createElement("p",{className:"text"},"Once uploaded this record will store to databases."),s.a.createElement("p",{className:"text mb-2"},"Please type \u2018",x,"\u2019 on the Box to confirm upload file."),s.a.createElement("div",{className:"captcha-box"},s.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:1,isCaptcha:E,setIsValidated:T,setIsType:F,isType:j,isValidated:D,submit:u})},id:"t1",type:"text",style:{textTransform:"uppercase"},className:"captcha-input",maxLength:"1",placeholder:E[0]}),s.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:2,isCaptcha:E,setIsValidated:T,setIsType:F,isType:j,isValidated:D,submit:u})},id:"t2",type:"text",style:{textTransform:"uppercase"},className:"captcha-input ml-0 mr-0",maxLength:"1",placeholder:E[1]}),s.a.createElement("input",{autocomplete:"off",onKeyUp:function(e){c({e:e,state:3,isCaptcha:E,setIsValidated:T,setIsType:F,isType:j,isValidated:D,submit:u})},id:"t3",type:"text",style:{textTransform:"uppercase"},className:"captcha-input",maxLength:"1",placeholder:E[2]}))),s.a.createElement(r.u,{className:"px-5 pb-5 pt-0 justify-content-start border-none"},s.a.createElement(r.d,{className:"bg-background text no-shadow px-5 mt-4 mb-0 mx-0",onClick:function(){i(!1)}},"Cancel"),s.a.createElement(r.d,{className:(D?"bg-green":"bg-emptyTextField disabled")+" no-shadow px-5 mt-4 mb-0 ml-3 mr-0",onClick:function(){u(),T(!1)}},m)," "))))}},676:function(e,t,a){"use strict";a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return w}));var n=a(65),o=a.n(n),s=a(91),r=a(169),l=a(170),i=a(172),u=a(171),c=a(1),d=a.n(c),m=a(660),p=a(707),v=a.n(p),f=(a(677),a(708),a(47)),b=a.n(f),h=a(709),y=a.n(h),w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).changeOutboundReason=function(e){setTimeout((function(){var t=document.getElementById("row".concat(e,"-outboundReason"));t.classList.add("red","tooltip-custom"),t.innerHTML="Outbound Reason Can't be empty<span class=\"tooltiptext\">Outbound Reason Can't be empty if Outbound type = 'Lainnya'</span>"}),300)},n.changeWarehouseUuid=function(e,t,a,r,l,i,u){var c=n.props,d=c.setCsvDataTmp,m=c.globalData,p=m.findIndex((function(e){return e.id==r})),v=l.indexOf(e);m[p][t]=i[v],m[p][a]=u[v],console.clear(),console.log(e,l),console.log(m),setTimeout(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(m);case 1:case"end":return e.stop()}}),e)}))),400)},n.validatePOSKU=function(){var e=Object(s.a)(o.a.mark((function e(t,a,r){var l,i,u,c,d,m,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.props,i=l.setCsvDataTmp,u=l.globalData,c=l.setIsValidate,"additional_inbound"!=l.transaction){e.next=3;break}return e.abrupt("return");case 3:d=u,e.prev=4,c(!1),"/stocktake/rowValidationUpload",m=null,p=null,setTimeout(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=document.getElementById("".concat(r)),p=document.getElementById("".concat(r,"span")),null!==m&&void 0!==m){e.next=4;break}return e.abrupt("return",0);case 4:return p.innerHTML="Validating",e.next=7,b()({method:"post",url:"/stocktake/rowValidationUpload",data:{data:[t]}}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data,o=d.findIndex((function(e){return e.id==a}));n[0]&&!0===n[0].isExist?(d[o].wmsPoSkuCode=n[0].wmsPoSkuCode,d[o].wmsPoSkuCodeStatus=!0,d[o].wmsPoSkuCodeReason="PO SKU Code Not Found",d[o].expiryDate=n[0].expiryDate,d[o].inboundDate=n[0].inboundDate,d[o].supplierName=n[0].supplierName,d[o].supplierUuid=n[0].supplierUuid,d[o].uom=n[0].uom,d[o].photos=n[0].photos,m.classList.remove("red"),m.classList.add("hiddenTooltip")):(d[o].wmsPoSkuCodeStatus=!1,d[o].wmsPoSkuCodeReason="PO SKU Code Not Found",d[o].expiryDate="",d[o].inboundDate="",d[o].supplierName="",d[o].supplierUuid="",m.classList.add("red"),m.classList.remove("hiddenTooltip"),p.innerHTML="PO SKU Code Not Found"),i(d)}));case 7:case"end":return e.stop()}}),e)}))),400),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,a,n){return e.apply(this,arguments)}}(),n.validatePOSKUStockTransfer=function(){var e=Object(s.a)(o.a.mark((function e(t,a,r){var l,i,u,c,d,m,p,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=n.props,i=l.setCsvDataTmp,u=l.globalData,c=l.setIsValidate,l.transaction,d=u,e.prev=2,c(!1),"/stocktransfer/rowValidationUpload",m=null,p=null,v=[{id:a.id,poSkuCode:t,skuNumber:a.skuNumber,skuUuid:a.skuUuid,warehouseSource:a.warehouseSource,areaSource:a.areaSource,weight:a.qty}],setTimeout(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=document.getElementById("".concat(r)),p=document.getElementById("".concat(r,"span")),null!==m&&void 0!==m){e.next=4;break}return e.abrupt("return",0);case 4:return p.innerHTML="Validating",e.next=7,b()({method:"post",url:"/stocktransfer/rowValidationUpload",data:{data:v}}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data,o=d.findIndex((function(e){return e.id==a.id}));n[0]&&!0===n[0].isExist?(d[o].wmsPoSkuCode=n[0].wmsPoSkuCode,d[o].wmsPoSkuCodeStatus=n[0].isExist,d[o].wmsPoSkuCodeReason=n[0].errorMessage,d[o].expiryDate=n[0].expiryDate,d[o].inboundDate=n[0].inboundDate,d[o].supplierName=n[0].supplierName,d[o].supplierUuid=n[0].supplierUuid,d[o].uom=n[0].uom,d[o].photos=n[0].photos,m.classList.remove("red"),m.classList.add("hiddenTooltip")):(d[o].wmsPoSkuCodeStatus=!1,d[o].wmsPoSkuCodeReason="PO SKU Code Not Found",d[o].expiryDate="",d[o].inboundDate="",d[o].supplierName="",d[o].supplierUuid="",m.classList.add("red"),m.classList.remove("hiddenTooltip"),p.innerHTML="PO SKU Code Not Found"),i(d)}));case 7:case"end":return e.stop()}}),e)}))),400),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a,n){return e.apply(this,arguments)}}(),n.validateOutbountReason=function(e,t,a){var o=n.props.globalData,s=o.findIndex((function(e){return e.id==t})),r=o[s];""==e&&"LAINNYA"==r.outboundType.toUpperCase()&&n.changeOutboundReason(t)},n.validateOutbountType=function(e,t,a){var o=n.props,s=o.globalData,r=o.setIsValidate,l=s;if(r(!1),"LAINNYA"!==e.toUpperCase())return r(!0),0;var i=l.findIndex((function(e){return e.id==t}));""==l[i].outboundReason&&n.changeOutboundReason(t)},n.validateSKUNumber=function(){var e=Object(s.a)(o.a.mark((function e(t,a,r,l){var i,u,c,d,m,p,v,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.props,u=i.globalData,c=i.setCsvDataTmp,d=i.setIsValidate,m=i.transaction,p=u,e.prev=2,d(!1),"/oss/skuByNumbers",v=null,f=null,setTimeout(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v=document.getElementById("".concat(r)),f=document.getElementById("".concat(r,"span")),null!==v&&void 0!==v){e.next=4;break}return e.abrupt("return",0);case 4:return f.innerHTML="Validating",e.next=7,b()({method:"post",url:"/oss/skuByNumbers",data:{skuList:[t]}}).then((function(e){var n,o=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data,s=e.data.isSuccess,r=p.findIndex((function(e){return e.id==a}));!0===s&&o.length>0?(p[r][l]=o[0].skuNumber,p[r][l+"Reason"]=o[0].skuDescription,p[r][l+"Status"]=!0,p[r][l+"Uuid"]=o[0].id,v.classList.remove("red"),v.classList.add("hiddenTooltip"),"skuNumber"==l&&(p[r].skuUuid=o[0].id,p[r].photo=o[0].imageMd),"newGrade"==l&&(p[r].newGradeUom=o[0].uom),"additional_inbound"==m&&(p[r].uom=o[0].uom)):(p[r][l]=t,p[r][l+"Reason"]="SKU Number Not Found",p[r][l+"Status"]=!1,p[r][l+"Uuid"]=null,v.classList.add("red"),v.classList.remove("hiddenTooltip"),f.innerHTML="SKU Number Not Found","skuNumber"==l&&(p[r].skuUuid="",p[r].photo=""),"newGrade"==l&&(p[r].newGradeUom=null),"additional_inbound"==m&&(p[r].uom="")),c(p)}));case 7:case"end":return e.stop()}}),e)}))),400),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,n,o){return e.apply(this,arguments)}}(),n.state={validateStatus:!1,validateResult:"Please Wait...",rowCount:0,keyy:0},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.columns,n=t.hiddenRows,o=t.tableClass,s=t.warehouseArea,r=t.outboundType,l=t.setCheckingCsv,i=t.globalData,u=t.editable,c=void 0===u||u,p=t.warehousesData,f=void 0===p?[]:p,b=t.transaction,h=this.state,w=(h.validateStatus,h.keyy),g=[],k=[],E=[];if(f){var S;null===f||void 0===f||null===(S=f.data)||void 0===S||S.map((function(e){g.push(e.code),k.push(e.id),E.push(e.name)}))}var N=s.map((function(e){return e.label.toUpperCase()}))||[],x=s.map((function(e){return e.value}))||[],C=r?r.map((function(e){return e.label.toUpperCase()})):[],O=r?r.map((function(e){return e.value})):[],D=a.map((function(t,a){return t.validator=function(a,n,o,s){var r=t.dataField,i=r+"Status",u=r+"Reason",c=!0,d=null,m="row"+n.id+"-"+r;"wmsPoSkuCode"==r&&"stockTransfer"==b?(e.validatePOSKUStockTransfer(a,n,m,r),c=!0):"wmsPoSkuCode"==r&&(e.validatePOSKU(a,n.id,m,r),c=!0),"skuNumber"==r&&(e.validateSKUNumber(a,n.id,m,r),c=!0);var p=["WASTE","SEMI WASTE"];if("newGrade"==r&&"waste"==e.props.transaction?p.includes(a.toUpperCase())?(n.newGradeUuid=a,n.newGradeUom=null):(d="Waste Type not found",h=!1,c=!1):"newGrade"==r&&(p.includes(a.toUpperCase())?(n.newGradeUuid=a,n.newGradeUom=null):parseInt(a)?(c=!0,e.validateSKUNumber(a,n.id,m,r)):""==a?(n.newGradeUuid=null,n.newGradeUom=null,c=!0):(d="Grade Undefined",h=!1,c=!1)),"outboundType"==r&&O.length>0)if(C.includes(a.toUpperCase())){var v=C.indexOf(a.toUpperCase());n.outboundTypeCode=O[v],c=!0,e.validateOutbountType(a,n.id,m)}else c=!1,d="Outbound Type Not Found";if("outboundReason"==r&&e.validateOutbountReason(a,n.id,m),"warehouse"==r&&(g.includes(a)?(c=!0,e.changeWarehouseUuid(a,"warehouseUuid","warehouseName",n.id,g,k,E)):(c=!1,d="Warehouse Not Found")),"warehouseDestination"==r&&(g.includes(a)?(c=!0,e.changeWarehouseUuid(a,"warehouseDestinationUuid","warehouseDestinationName",n.id,g,k,E)):(c=!1,d="Warehouse Not Found"),console.log(c)),"areaName"==r||"areaNameDestination"==r)if(N.includes(a.toUpperCase())){var f=N.indexOf(a.toUpperCase());"areaNameDestination"==r?n.areaDestination=x[f]:n.areaSource=x[f],c=!0}else c=!1,d="Warehouse Area Not Found";"newPack"==r&&(!isNaN(a)?c=!0:(c=!1,d="Pack Should be a number"));var h=null;!1===(h="number"!=t.type||!isNaN(a))&&(d="".concat(t.text," Should be a ").concat(t.type)),"wmsPoSkuCode"==r&&"stockTransfer"==b&&isNaN(a)&&(h=!1,d="".concat(t.text," Should be a number")),setTimeout((function(){console.log(r,b,h)}),3e3);if(["grade","outboundReason","ripenessLevel","newRipeness","reason","expiryDate"].includes(r)&&""===a?(d="",h=!0,c=!0):"grade"==r&&(p.includes(a.toUpperCase())||(d="Waste Type Not Found",h=!1,c=!1)),"ripenessLevel"==r||"newRipeness"==r){[0,1,2,3].includes(parseInt(a))||""==a?(h=!0,c=!0,d="",""==a&&(a="")):(h=!1,c=!1,d="Undefined Ripeness Level")}if("date_indo"==t.type){a.match(/(0[1-9]|[12][0-9]|3[01])[-.](0[1-9]|1[012])[-.](19|20)\d\d/)||""==a?(h=!0,c=!0):(d="Date format must be 'dd-mm-yyyy'",h=!1,c=!1)}if(n[u]=d,c&&h){["wmsPoSkuCode","skuNumber"].includes(r)||(n[i]=!0,l())}return console.clear(),console.log(c,h),console.log("reason",d),{valid:!(!c||!h),message:d}},t.formatter=function(e,a,n){var o=t.dataField,s=o+"Status",r=o+"Reason",l="row"+a.id+"-"+o,i=a[r];return!1===a[s]?(!1,!1,d.a.createElement("div",{id:l,className:"tooltip-custom red"},e,d.a.createElement("span",{id:l+"span",className:"tooltiptext"},i))):d.a.createElement("div",{id:l,className:"tooltip-custom hiddenTooltip"},e,d.a.createElement("span",{id:l+"span",className:"tooltiptext"},i))},t})),T={sortFunc:this.sortFunc,sortCaret:function(e,t){return e?"asc"===e?d.a.createElement("i",{className:"iconU-tableSortingTop ml-2"}):"desc"===e?d.a.createElement("i",{className:"iconU-tableSortingBottom ml-2"}):null:d.a.createElement("i",{className:"iconU-tableSortingNull ml-2"})}};return console.log(i),d.a.createElement(m.e,{className:"table-responsive"},d.a.createElement(v.a,{keyField:"id",data:i,columns:D,sort:T,classes:o||null,cellEdit:!0===c?y()({mode:"click",blurToSave:!0,nonEditableRows:function(){return e.props.dataDoubleRow||[]}}):null,bordered:!1,hiddenRows:n,key:w}))}}]),a}(d.a.Component),g=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.columns,a=e.tableClass,n=e.data,o=t.map((function(e,t){return e.formatter=function(t,a,n){var o=e.dataField;return"uploadStatus"==o&&"Failed"===a.uploadStatus?d.a.createElement("div",{className:"tooltip-custom red"},t,d.a.createElement("span",{className:"tooltiptext"},a.uploadStatusReason)):"uploadStatus"==o&&"Success"===a.uploadStatus?d.a.createElement("div",{className:"green"},t,d.a.createElement("span",null)):d.a.createElement("div",null,t,d.a.createElement("span",null))},e})),s={sortFunc:this.sortFunc,sortCaret:function(e,t){return e?"asc"===e?d.a.createElement("i",{className:"iconU-tableSortingTop ml-2"}):"desc"===e?d.a.createElement("i",{className:"iconU-tableSortingBottom ml-2"}):null:d.a.createElement("i",{className:"iconU-tableSortingNull ml-2"})}};return d.a.createElement(m.e,{className:"table-responsive"},d.a.createElement(v.a,{keyField:"id",data:n,columns:o,sort:s,classes:a||null,bordered:!1}))}}]),a}(d.a.Component)},677:function(e,t,a){},712:function(e,t,a){}}]);
//# sourceMappingURL=44.2bc7b791.chunk.js.map