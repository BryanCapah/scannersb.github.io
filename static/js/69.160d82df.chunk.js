(this["webpackJsonp@coreui/coreui-pro-react-admin-template"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template"]||[]).push([[69],{1247:function(e,t,n){"use strict";n.r(t);var a=n(65),o=n.n(a),i=n(91),r=n(659),l=n(1),u=n.n(l),c=n(20),s=n(56),d=n(19),m=n(667),v=n(679),p=n(663),b=n(671),f=n(673),h=n(678),y=n.n(h),j=(n(738),n(787)),g=n(662),O=n(668),E=n(730),k=n(682);t.default=Object(c.i)((function(e){var t,n,a,h,w,x,N,D=Object(s.c)(),S=Object(c.g)(),I=Object(s.d)((function(e){return e.thereAreRequest})),U=Object(s.d)((function(e){return e.stockTransferFirstLoad})),L=Object(s.d)((function(e){return e.user.warehouseUuid})),C=Object(s.d)((function(e){return e.status})),P=Object(s.d)((function(e){return e.isLoading})),B=Object(s.d)((function(e){return e.stockTransferEntryData})),W=Object(l.useState)(null),T=Object(r.a)(W,2),q=T[0],M=T[1],H=Object(l.useState)(),K=Object(r.a)(H,2),A=K[0],z=K[1],R=Object(g.u)({moduleEntry:A,moduleName:"stockTransfer"}),V=Object(l.useState)(0),F=Object(r.a)(V,2),J=F[0],_=F[1],G=J!==R&&R>0,Q=Object(l.useState)(),X=Object(r.a)(Q,2),Y=X[0],Z=X[1],$=Object(l.useState)(),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ae=Object(l.useState)(),oe=Object(r.a)(ae,2),ie=oe[0],re=oe[1],le=Object(l.useState)(),ue=Object(r.a)(le,2),ce=ue[0],se=ue[1];console.log(B);var de=Object(l.useState)(),me=Object(r.a)(de,2),ve=me[0],pe=me[1],be=Object(l.useState)(),fe=Object(r.a)(be,2),he=fe[0],ye=fe[1],je=Object(l.useState)(),ge=Object(r.a)(je,2),Oe=ge[0],Ee=ge[1],ke=Object(l.useState)(),we=Object(r.a)(ke,2),xe=we[0],Ne=we[1],De=Object(l.useState)(),Se=Object(r.a)(De,2),Ie=Se[0],Ue=Se[1];Object(l.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){var t,n,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.g)({});case 2:return t=e.sent,e.next=5,Object(b.e)({dispatch:D});case 5:return n=e.sent,e.next=8,Object(b.h)({dispatch:D,warehouseUuid:L});case 8:a=e.sent,Object(p.k)({dispatch:D,moduleName:"stockTransfer",isExist:!!B,ripeness:n}),i=t.filter((function(e){return e.value===L})),pe(i[0]),re(a),ne(t),_(R);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(e){Ue(!!(Oe&&ve&&he&&ve!==he))}),[Oe,xe,G,ve,he]),Object(l.useEffect)((function(){z(),M()}),[Oe,xe,ve,he]);var Le=Object(l.useState)(),Ce=Object(r.a)(Le,2),Pe=Ce[0],Be=Ce[1],We=Object(l.useState)(),Te=Object(r.a)(We,2),qe=Te[0],Me=Te[1],He=document.documentElement.clientHeight,Ke=He-400,Ae=He-400;return u.a.createElement("div",{className:"w-100  stock-take-summary"},u.a.createElement(k.a,{discard:ce,module:"Inventory Entry - Stock Transfer",moduleEntry:B,close:function(){return se(!1)},discardEntry:function(e){return Object(p.o)({id:e,moduleName:"stockTransfer",dispatch:D,setDiscard:se})}}),u.a.createElement(E.a,{discard:ce,moduleFirstLoad:U,moduleEntry:B,redirect:function(){return e.history.push("/inventory-entry/stock-transfer/weight-entry")},previousPage:function(){return S.goBack()},setDiscard:function(){return se(!0)}}),u.a.createElement(O.a,{status:C}),u.a.createElement("div",{className:"px-3 pt-3 bg-white border-all radius-all d-md-flex dd-group"},u.a.createElement("div",{className:"col-lg-3 px-0 stock-take-dropdown"},u.a.createElement(m.a,{show:!0,isDisabled:!0,title:"Warehouse Source",placeholder:"Select Warehouse Source",options:te,onChangeDropdown:function(e){return pe(e)},selectedValue:ve,showTitle:!0})),u.a.createElement("div",{className:"col-lg-3 px-0 stock-take-dropdown"},u.a.createElement(m.a,{show:!0,title:"Area Source",placeholder:"Select Area Source",options:null===ie||void 0===ie?void 0:ie.filter((function(e){return"Waste"!==e.label})),onChangeDropdown:function(e){return Ee(e)},selectedValue:Oe,showTitle:!0})),u.a.createElement("div",{className:"col-lg-3 px-0 stock-take-dropdown"},u.a.createElement(m.a,{show:!0,title:"Warehouse Destination",placeholder:"Select Warehouse Destination",options:null===te||void 0===te?void 0:te.filter((function(e){return(null===e||void 0===e?void 0:e.label)!==(null===ve||void 0===ve?void 0:ve.label)})),onChangeDropdown:function(e){return ye(e)},selectedValue:he,showTitle:!0}))),u.a.createElement("div",{className:"pt-3 pb-0 pl-3 pr-3 bg-white mt-3 border-all radius-all mb-3"},u.a.createElement("div",{className:"d-md-flex d-lg-flex mb-3 justify-content-between"},u.a.createElement("div",{className:"text LatoBold d-flex justify-content-between align-items-center sku-des"},u.a.createElement("div",null,"Enter SKU or Description"," ",u.a.createElement("span",{className:"green"},"(".concat(R," Selected SKU").concat(R>1?"s":"",")"))))),u.a.createElement(v.a,{setSortBy:Me,category:Pe,setCategory:Be,placeholder:"Enter SKU",filter:!1,searchHandler:function(e){return(null===Oe||void 0===Oe?void 0:Oe.value)&&(null===ve||void 0===ve?void 0:ve.value)&&(null===he||void 0===he?void 0:he.value)&&(null===ve||void 0===ve?void 0:ve.value)!==(null===he||void 0===he?void 0:he.value)?Object(p.g)({category:Pe,dispatch:D,desc:e,warehouseUuid:L,areaId:Oe,areaIdDesposition:xe,setModule:M,module:A},Z(e)):(null===Oe||void 0===Oe?void 0:Oe.value)?(null===Oe||void 0===Oe?void 0:Oe.value)===(null===xe||void 0===xe?void 0:xe.value)?Ne("empty"):(null===ve||void 0===ve?void 0:ve.value)?(null===he||void 0===he?void 0:he.value)?(null===he||void 0===he?void 0:he.value)===(null===ve||void 0===ve?void 0:ve.value)?ye("empty"):null:ye("empty"):pe("empty"):Ee("empty")}}),u.a.createElement("div",{className:"mb-3 mt-3 d-flex align-items-center scroll-sku ".concat((null===q||void 0===q?void 0:q.length)?"flex-column":"flex-row"," w-100 text-center"),style:{minHeight:Ke,maxHeight:Ke}},(null===q||void 0===q?void 0:q.length)?null===q||void 0===q||null===(t=q.sort((function(e,t){return Object(g.g)(e,t,null===qe||void 0===qe?void 0:qe.value)})))||void 0===t?void 0:t.map((function(e,t){return u.a.createElement(f.a,{key:t,img:null===e||void 0===e?void 0:e.photo,skuDescription:null===e||void 0===e?void 0:e.skuName,skuNumber:null===e||void 0===e?void 0:e.skuNumber,uomLabel:"weight",uomValue:null===e||void 0===e?void 0:e.totalQty,uom:null===e||void 0===e?void 0:e.unitOfMeassures,isCheckedHandler:function(e){return Object(j.b)({idx:t,checked:e,dispatch:D,setLocalEntryData:z,moduleSummary:q,moduleEntry:A,moduleName:"stockTransfer",warehouseUuid:L,warehouseIdDestination:he,areaId:Oe,areaIdDesposition:xe})},check:null===e||void 0===e?void 0:e.checked})})):u.a.createElement("div",{className:"w-100 text-center emptyTextField d-flex flex-column align-items-center justify-content-center",style:{minHeight:Ae,maxHeight:Ae}},Object(g.t)({isLoading:P,summary:q})?Oe&&xe&&0===(null===q||void 0===q?void 0:q.length)?u.a.createElement("div",null,"Sorry, we couldn't find any matches for '",u.a.createElement("span",{className:"LatoBold"},Y),"' in ",Oe&&(null===xe||void 0===xe?void 0:xe.label)," area.",u.a.createElement("br",null),"Please Try search with another term."):"Enter SKU":u.a.createElement("img",{className:"loading",src:y.a,alt:"loading"})))),u.a.createElement("div",{className:"h-screen-summary-footer d-flex flex-column justify-content-start"},u.a.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between mb-1"},u.a.createElement("div",null,u.a.createElement("button",{onClick:function(){return e.history.push("/inventory-entry/stock-transfer/CSV-upload")},type:"button",className:"btn px-4 no-shadow border-all bg-white fontSizeButton"},"Upload File")),u.a.createElement("button",{onClick:function(){var t,n;0===I&&A&&(null===A||void 0===A||null===(t=A.jobPost)||void 0===t||null===(n=t.list)||void 0===n?void 0:n.length)>0&&!0===Ie&&(D({type:d.b,stockTransferEntryData:A}),e.history.push("/inventory-entry/stock-transfer/weight-entry"))},type:"button",className:"btn px-5 fontSizeButton no-shadow text-white ".concat(0===I&&A&&(null===A||void 0===A||null===(n=A.jobPost)||void 0===n||null===(a=n.list)||void 0===a?void 0:a.length)>0&&!0===Ie?"bg-green":"bg-lineGrey")},A&&0!==(null===A||void 0===A||null===(h=A.jobPost)||void 0===h||null===(w=h.list)||void 0===w?void 0:w.length)||0!==I?0===I&&A&&(null===A||void 0===A||null===(x=A.jobPost)||void 0===x||null===(N=x.list)||void 0===N?void 0:N.length)>0?"Next":"Processing...":"Next"))))}))},667:function(e,t,n){"use strict";var a=n(665),o=n(4),i=n(659),r=n(1),l=n.n(r),u=n(695);t.a=function(e){var t,n,c=e.isEmpty,s=e.title,d=e.placeholder,m=e.options,v=e.selectedValue,p=e.showTitle,b=e.width,f=e.className,h=e.entryListIdx,y=e.onChangeDropdown,j=e.show,g=e.poListIdx,O=e.isDisabled,E=e.style,k=e.noMarginBottom,w=e.resetName,x=e.isMulti,N=e.hideResetOpt,D=e.zInfinity,S=Object(r.useState)(),I=Object(i.a)(S,2),U=I[0],L=I[1];Object(r.useEffect)((function(){"empty"===v&&L(!0)}),[v,c]);var C=!!c&&function(e){return Object(o.a)(Object(o.a)({},e),{},{border:"solid #eb5c5c 1px",":hover":{border:"solid #eb5c5c 1px !important"},":active":{border:"solid #eb5c5c 1px !important"}})},P=null===(t=document)||void 0===t?void 0:t.getElementById("dropdown".concat(h).concat(g)),B=null===P||void 0===P?void 0:P.getBoundingClientRect();Object(r.useEffect)((function(){B=null===P||void 0===P?void 0:P.getBoundingClientRect()}),[U]);var W=document.documentElement.clientWidth,T=[{label:"-".concat(w||s,"-"),value:null}];m&&(T=[].concat(Object(a.a)(T),Object(a.a)(m))),N&&(T=T.filter((function(e){return null===e||void 0===e?void 0:e.value})));var q,M=(null===(n=B)||void 0===n?void 0:n.bottom)>600?"top":"bottom";W<=500&&(M=(null===(q=B)||void 0===q?void 0:q.bottom)>400?"top":"bottom","Categories"===s&&(M="top"));return l.a.createElement("div",{style:E,className:"mr-0 ".concat(E?null:"mr-lg-3"," ").concat(k?null:"mb-3"," ").concat(b," ").concat(f," ").concat(j?null:"d-none")},l.a.createElement("div",{className:" pb-1 LatoBold ".concat(p?null:"d-none")},s),l.a.createElement(u.a,{inputId:"".concat(s,"_").concat(g,"_").concat(h),isMulti:x,isSearchable:!(W<500),isDisabled:O||!1,id:"dropdown".concat(h).concat(g),value:((null===v||void 0===v?void 0:v.value)||!!(null===v||void 0===v?void 0:v.length))&&v,menuIsOpen:U,menuPortal:!0,placeholder:w||d,options:T,onMenuOpen:function(){return L(!0)},onMenuClose:function(){return L(!1)},onChange:function(e){y(e),L(!1)},menuPortalTarget:document.body,maxMenuHeight:150,menuPlacement:"".concat(M),styles:{menuPortal:function(e){return Object(o.a)(Object(o.a)({},e),{},{zIndex:D?1e16:9999})},control:C,option:function(e,t){var n=t.isFocused,a=t.isSelected;return Object(o.a)(Object(o.a)({},e),{},{backgroundColor:a?"rgb(242, 250, 246, 0)":n?"rgb(242, 250, 246)":null,color:a?"black":"#969696",cursor:"pointer",fontWeight:a?"bold":null,":active":{backgroundColor:"rgb(242, 250, 246) !important",color:"#4abe84"},":hover":{color:a?null:"#4abe84"}})}},theme:function(e){return Object(o.a)(Object(o.a)({},e),{},{borderRadius:4})}}))}},682:function(e,t,n){"use strict";var a=n(1),o=n.n(a),i=n(660);n(669);t.a=function(e){var t=e.discard,n=e.moduleEntry,a=e.close,r=e.discardEntry,l=e.module;return o.a.createElement(i.B,{onKeyDown:function(e){return 27===e.keyCode&&a()},className:t?null:"d-none"},o.a.createElement(i.f,{onKeyDown:function(e){return 27===e.keyCode&&a()}},o.a.createElement(i.s,{onClose:function(){return a()},show:t,size:"lg",closeOnBackdrop:!1},o.a.createElement("div",{className:"d-flex flex-row-reverse pr-3 pt-3 mt-1"},o.a.createElement("i",{onClick:function(){return a()},className:"iconU-modalClose"})),o.a.createElement(i.v,{className:"px-5 pb-4 mb-2 pt-4 mt-2 border-none"},o.a.createElement(i.w,{className:"red LatoBold"},"Discard? ",o.a.createElement("span",null,o.a.createElement("i",{className:"em em-astonished"})))),o.a.createElement(i.t,{className:"px-5 pb-5 mb-4 py-0"},o.a.createElement("p",{className:"text mb-3 h5 respon-txt"},"Are you sure you want to discard ",o.a.createElement("span",{className:"green"}," ".concat(null===n||void 0===n?void 0:n.jobPost.list.length," selected SKU ").concat((null===n||void 0===n?void 0:n.jobPost.list.length)>1?"(s)":"")),"from this",o.a.createElement("div",{className:"green h5 pt-2 respon-txt"},l)),o.a.createElement("br",null),o.a.createElement(i.d,{onClick:function(){return r(null===n||void 0===n?void 0:n.jobPost.id)},className:"bg-background text no-shadow pl-4 pr-5 mr-3 LatoBlack"},"Discard"),o.a.createElement(i.d,{onClick:function(){return a()},className:"bg-green no-shadow pl-4 pr-4 LatoBlack"},"Don't Discard")," "))))}},738:function(e,t,n){},787:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return y}));var a=n(4),o=n(65),i=n.n(o),r=n(71),l=n(665),u=n(91),c=n(22),s=n.n(c),d=n(19),m=n(663),v=n(671),p=n(116),b=n(662),f=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,o,c,f,h,y,j,g,O,E,k,w,x,N,D,S,I,U,L,C;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.idx,o=t.checked,c=t.dispatch,f=t.setLocalEntryData,h=t.moduleName,y=t.moduleSummary,j=t.moduleEntry,g=t.warehouseUuid,O=t.warehouseIdDestination,E=t.areaId,k=t.areaIdDesposition,(w=Object(l.a)(y))[a].checked=o,c(Object(r.a)({type:d.c},"".concat(h,"summaryData"),w)),x=null===w||void 0===w?void 0:w.filter((function(e){if(e.checked)return e})),N=[],j&&j.jobPost.list.map((function(e){var t={skuUuid:e.skuUuid};t.skuUuid&&N.push(t.skuUuid)})),D=[],S=x.map(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.includes(t.skuUuid)){e.next=10;break}return e.next=4,Object(v.a)({skuId:t.skuUuid});case 4:return a=e.sent,t.gradeList=a,e.next=8,Object(m.f)({skuId:t.skuUuid,warehouseUuid:g,dispatch:c,areaId:E.value,moduleName:h});case 8:(o=e.sent)&&(r=o.map((function(e){e.itemList=[];var n=e.expiryDate?s()(e.expiryDate).valueOf():null,a=e.inboundDate?s()(e.inboundDate).valueOf():null;return e.expiryDate=n,e.inboundDate=a,e.skuUuid=t.skuUuid,e.uom=t.unitOfMeassures,e.category=t.category,e.initialWeight=Object(p.e)(e.initialWeight)?Object(p.e)(e.initialWeight):e.initialWeight,e})),t.poList=r,D.push(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=11,Promise.all(S);case 11:e.sent,I=[],j&&(I=j.jobPost.list.concat(D)),j||(I=D),(U=w[a]).checked||(I=I.filter((function(e){return e.skuUuid!==U.skuUuid}))),L=null===j||void 0===j||null===(n=j.jobPost)||void 0===n?void 0:n.id,C={jobPost:{id:L||0,warehouseSource:g,warehouseDestination:null===O||void 0===O?void 0:O.value,warehouseDestinationName:null===O||void 0===O?void 0:O.label,areaSource:parseInt(null===E||void 0===E?void 0:E.value),areaName:null===E||void 0===E?void 0:E.label,areaDestination:parseInt(null===k||void 0===k?void 0:k.value),areaDestinationName:null===k||void 0===k?void 0:k.label,list:I.sort((function(e,t){return Object(b.g)(e,t)}))}},0===I.length&&c(Object(r.a)({type:d.b},"".concat(h,"EntryData"),null)),f(C);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,o,r,c,d,b,f,h,y,j,g,O,E,k,w;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.idx,a=t.checked,o=t.dispatch,r=t.moduleName,c=t.moduleSummary,d=t.moduleEntry,b=t.warehouseUuid,f=t.areaId,h=t.preAddHandler,(y=Object(l.a)(c))[n].checked=a,j=null===y||void 0===y?void 0:y.filter((function(e){if(e.checked)return e})),g=[],d&&d.map((function(e){var t={skuUuid:e.skuUuid};t.skuUuid&&g.push(t.skuUuid)})),O=[],E=j.map(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.includes(t.skuUuid)){e.next=10;break}return e.next=4,Object(v.a)({skuId:t.skuUuid});case 4:return a=e.sent,t.gradeList=a,e.next=8,Object(m.f)({skuId:t.skuUuid,warehouseUuid:b,dispatch:o,areaId:f.value,moduleName:r});case 8:(l=e.sent)&&(u=l.map((function(e){e.itemList=[];var n=e.expiryDate?s()(e.expiryDate).valueOf():null,a=e.inboundDate?s()(e.inboundDate).valueOf():null;return e.expiryDate=n,e.inboundDate=a,e.skuUuid=t.skuUuid,e.uom=t.unitOfMeassures,e.initialWeight=Object(p.e)(e.initialWeight)?Object(p.e)(e.initialWeight):e.initialWeight,e})),t.poList=u,t.isNewItem=!0,O.push(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=10,Promise.all(E);case 10:e.sent,k=[],d&&(k=d.concat(O)),d||(k=O),(w=y[n]).checked||(k=k.filter((function(e){return e.skuUuid!==w.skuUuid}))),h(k);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.setActiveSKU,n=e.moduleEntry,o=e.moduleName,i=e.setConfirmation,l=e.dispatch,u=e.setIsRequired,c=[],s=Object(a.a)({},n),m=n.jobPost.list.map((function(e){return e.poList.map((function(e){var t=Object(b.z)({moduleList:e.itemList});return e.itemList.map((function(n){var a=n.qty,o=n.grade;return"kg"===e.uom?0!=a&&!isNaN(a)||null!==(null===o||void 0===o?void 0:o.value)?isNaN(a)||0==a||""===a||null===a?n.qtyIsEmpty=!0:n.qtyIsEmpty=!1:(n.qtyIsEmpty=!1,n.gradeIsEmpty=!1,n.ripenessIsEmpty=!1,n.noteIsEmpty=!1):isNaN(a)||0==a||""===a||null===a?n.qtyIsEmpty=!0:n.qtyIsEmpty=!1,n.qtyIsEmpty||(Number(t)>Number(e.initialWeight)?n.qtyIsEmpty=!0:n.qtyIsEmpty=!1),(null===n||void 0===n?void 0:n.qtyIsEmpty)||(null===n||void 0===n?void 0:n.gradeIsEmpty)||(null===n||void 0===n?void 0:n.ripenessIsEmpty)||(null===n||void 0===n?void 0:n.noteIsEmpty)?c.push(!1):c.push(!0),n})),e})),e})),v=!1;m.map((function(e){e.poList.map((function(e){e.itemList.map((function(e){e.qty&&(v=!0)}))}))})),s.jobPost.list=m,l(Object(r.a)({type:d.b},"".concat(o,"EntryData"),s)),!c.includes(!1)&&v?"function"===typeof i&&i({show:!0,name:"submit"}):("function"===typeof i&&i({show:!1,name:null}),"function"===typeof u&&u(!0)),Object(b.b)({setActiveSKU:t,moduleEntry:n,moduleName:o})}}}]);
//# sourceMappingURL=69.160d82df.chunk.js.map